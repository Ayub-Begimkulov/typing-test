{"type":"typescript","text":"import React, { Children, cloneElement, memo, useMemo, useRef } from \"react\";\nimport { ElementBindings, __DEV__ } from \"./constants\";\nimport { TransitionGroupContext } from \"./context\";\nimport {\n  useIsMounted,\n  useLatest,\n  usePrevious,\n  useIsomorphicLayoutEffect as useLayoutEffect,\n} from \"./hooks\";\nimport { TransitionProps } from \"./Transition\";\nimport { addClass, hasOwn, removeArrayElement, removeClass } from \"./utils\";\nimport {\n  areChildrenEqual,\n  ensureChildrenKeys,\n  getChildMapping,\n  getElementProps,\n  mergeChildMappings,\n} from \"./utils/children\";\nimport {\n  recordPosition,\n  recordNewPosition,\n  applyTranslation,\n  forceReflow,\n} from \"./utils/position\";\n\ninterface TransitionCloneProps extends Omit<TransitionProps, \"children\"> {\n  key: React.Key;\n}\n\nexport interface TransitionGroupProps {\n  name?: string;\n  appear?: boolean;\n  moveTransition?: boolean;\n  moveClass?: string;\n  children:\n    | React.ReactElement<TransitionProps>\n    | React.ReactElement<TransitionProps>[];\n}\n\nconst TransitionGroup = memo(\n  ({\n    children,\n    name = \"transition\",\n    appear,\n    moveTransition = true,\n    moveClass,\n  }: TransitionGroupProps) => {\n    // we have to check that array didn't had any keys before calling toArray\n    // because it will add keys itself that'd be unstable\n    if (__DEV__) {\n      ensureChildrenKeys(children);\n    }\n    const latestProps = useLatest({ name, moveClass, moveTransition });\n    const isMounted = useIsMounted();\n\n    const childrenArray = Children.toArray(children) as React.ReactElement[];\n    const prevChildren = usePrevious(childrenArray);\n\n    // is it helpful to have `newChildrenElements`?\n    const newChildrenElements = useRef<Element[]>([]);\n    const prevChildrenElements = useRef<Element[]>([]);\n\n    const runEffect = useRef(0);\n\n    if (\n      moveTransition &&\n      (!prevChildren.current ||\n        !areChildrenEqual(childrenArray, prevChildren.current))\n    ) {\n      // children are changed, increment counter to\n      // run layout effect\n      runEffect.current++;\n      // only record positions if children has changed\n      prevChildrenElements.current.forEach(recordPosition);\n    }\n\n    const ctxValue = useMemo(\n      () => ({\n        get isAppearing() {\n          return !isMounted.current;\n        },\n        register(element: Element) {\n          if (!(element as any)[ElementBindings.registered]) {\n            (element as any)[ElementBindings.registered] = true;\n            newChildrenElements.current.push(element);\n          }\n        },\n        unregister(element: Element) {\n          removeArrayElement(prevChildrenElements.current, element);\n          (element as any)[ElementBindings.registered] = null;\n        },\n      }),\n      [isMounted]\n    );\n\n    useLayoutEffect(() => {\n      const { moveTransition, moveClass, name } = latestProps.current;\n\n      if (!moveTransition) return;\n\n      if (isMounted.current) {\n        const moveCls = moveClass || `${name}-move`;\n        const childrenToMove = prevChildrenElements.current;\n\n        // separate loops for reads and writes to improve performance\n        // https://stackoverflow.com/questions/19250971/why-a-tiny-reordering-of-dom-read-write-operations-causes-a-huge-performance-dif\n        childrenToMove.forEach(el =>\n          (el as any)[ElementBindings.moveCallback]?.()\n        );\n        childrenToMove.forEach(recordNewPosition);\n        const movedChildren = childrenToMove.filter(applyTranslation);\n\n        forceReflow();\n\n        movedChildren.forEach(child => {\n          addClass(child, moveCls);\n          (child as HTMLElement).style.transitionDuration = \"\";\n          (child as HTMLElement).style.transform = \"\";\n          const endCb = ((child as any)[ElementBindings.moveCallback] = (\n            e?: Event\n          ) => {\n            if (e && e.target !== child) {\n              return;\n            }\n            if (!e || /transform$/.test((e as TransitionEvent).propertyName)) {\n              child.removeEventListener(\"transitionend\", endCb);\n              (child as any)[ElementBindings.moveCallback] = null;\n              removeClass(child, moveCls);\n            }\n          });\n          child.addEventListener(\"transitionend\", endCb);\n        });\n      }\n\n      if (newChildrenElements.current.length > 0) {\n        prevChildrenElements.current = prevChildrenElements.current.concat(\n          newChildrenElements.current\n        );\n        newChildrenElements.current = [];\n      }\n    }, [runEffect.current, latestProps, isMounted]);\n\n    const childrenToRender = /*#__NOINLINE__*/ useTransitionChildren(\n      childrenArray,\n      appear,\n      name\n    );\n\n    return (\n      <TransitionGroupContext.Provider value={ctxValue}>\n        {childrenToRender}\n      </TransitionGroupContext.Provider>\n    );\n  }\n);\n\nfunction useTransitionChildren(\n  children: React.ReactElement[],\n  appear: boolean | undefined,\n  name?: string\n) {\n  const prevChildrenMapping = useRef<Record<string, React.ReactElement> | null>(\n    null\n  );\n\n  const newChildren = getChildMapping(children);\n  const prevChildren = prevChildrenMapping.current;\n\n  const result: React.ReactElement[] = [];\n\n  if (!prevChildren) {\n    for (const key in newChildren) {\n      const childAppear = getElementProps(newChildren[key], \"appear\", appear);\n      const childName = getElementProps(newChildren[key], \"name\", name);\n\n      result.push(\n        cloneElement(newChildren[key], {\n          key,\n          visible: true,\n          appear: childAppear,\n          name: childName,\n        })\n      );\n    }\n    prevChildrenMapping.current = newChildren;\n  } else {\n    const mapping = (prevChildrenMapping.current = mergeChildMappings(\n      prevChildren,\n      newChildren\n    ));\n    for (const key in mapping) {\n      const isOld = hasOwn(prevChildren, key);\n      const isNew = hasOwn(newChildren, key);\n      if (isOld && !isNew) {\n        // deleted item\n        const onAfterLeaveProp = getElementProps(\n          prevChildren[key],\n          \"onAfterLeave\"\n        );\n        result.push(\n          cloneElement(prevChildren[key], {\n            visible: false,\n            onAfterLeave: (el: Element) => {\n              onAfterLeaveProp?.(el);\n              delete prevChildrenMapping.current?.[key];\n            },\n            name: getElementProps(prevChildren[key], \"name\", name),\n          })\n        );\n      } else {\n        // new or old item\n        const props: TransitionCloneProps = {\n          key,\n          visible: true,\n          name: getElementProps(newChildren[key], \"name\", name),\n          // passing appear `true` for new items, because without it\n          // we won't get enter transition\n          appear: isNew,\n        };\n\n        result.push(cloneElement(newChildren[key], props));\n      }\n    }\n  }\n  return result;\n}\n\nexport default TransitionGroup;\n","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"React","type":"Identifier","range":[7,12]},{"text":"Children","type":"Identifier","range":[16,24]},{"text":"cloneElement","type":"Identifier","range":[26,38]},{"text":"memo","type":"Identifier","range":[40,44]},{"text":"useMemo","type":"Identifier","range":[46,53]},{"text":"useRef","type":"Identifier","range":[55,61]},{"text":"from","type":"Identifier","range":[64,68]},{"text":"\"react\"","type":"String","range":[69,76]},{"text":"import","type":"Keyword","range":[78,84]},{"text":"ElementBindings","type":"Identifier","range":[87,102]},{"text":"__DEV__","type":"Identifier","range":[104,111]},{"text":"from","type":"Identifier","range":[114,118]},{"text":"\"./constants\"","type":"String","range":[119,132]},{"text":"import","type":"Keyword","range":[134,140]},{"text":"TransitionGroupContext","type":"Identifier","range":[143,165]},{"text":"from","type":"Identifier","range":[168,172]},{"text":"\"./context\"","type":"String","range":[173,184]},{"text":"import","type":"Keyword","range":[186,192]},{"text":"useIsMounted","type":"Identifier","range":[197,209]},{"text":"useLatest","type":"Identifier","range":[213,222]},{"text":"usePrevious","type":"Identifier","range":[226,237]},{"text":"useIsomorphicLayoutEffect","type":"Identifier","range":[241,266]},{"text":"as","type":"Identifier","range":[267,269]},{"text":"useLayoutEffect","type":"Identifier","range":[270,285]},{"text":"from","type":"Identifier","range":[289,293]},{"text":"\"./hooks\"","type":"String","range":[294,303]},{"text":"import","type":"Keyword","range":[305,311]},{"text":"TransitionProps","type":"Identifier","range":[314,329]},{"text":"from","type":"Identifier","range":[332,336]},{"text":"\"./Transition\"","type":"String","range":[337,351]},{"text":"import","type":"Keyword","range":[353,359]},{"text":"addClass","type":"Identifier","range":[362,370]},{"text":"hasOwn","type":"Identifier","range":[372,378]},{"text":"removeArrayElement","type":"Identifier","range":[380,398]},{"text":"removeClass","type":"Identifier","range":[400,411]},{"text":"from","type":"Identifier","range":[414,418]},{"text":"\"./utils\"","type":"String","range":[419,428]},{"text":"import","type":"Keyword","range":[430,436]},{"text":"areChildrenEqual","type":"Identifier","range":[441,457]},{"text":"ensureChildrenKeys","type":"Identifier","range":[461,479]},{"text":"getChildMapping","type":"Identifier","range":[483,498]},{"text":"getElementProps","type":"Identifier","range":[502,517]},{"text":"mergeChildMappings","type":"Identifier","range":[521,539]},{"text":"from","type":"Identifier","range":[543,547]},{"text":"\"./utils/children\"","type":"String","range":[548,566]},{"text":"import","type":"Keyword","range":[568,574]},{"text":"recordPosition","type":"Identifier","range":[579,593]},{"text":"recordNewPosition","type":"Identifier","range":[597,614]},{"text":"applyTranslation","type":"Identifier","range":[618,634]},{"text":"forceReflow","type":"Identifier","range":[638,649]},{"text":"from","type":"Identifier","range":[653,657]},{"text":"\"./utils/position\"","type":"String","range":[658,676]},{"text":"interface","type":"Keyword","range":[679,688]},{"text":"TransitionCloneProps","type":"Identifier","range":[689,709]},{"text":"extends","type":"Keyword","range":[710,717]},{"text":"Omit","type":"Identifier","range":[718,722]},{"text":"TransitionProps","type":"Identifier","range":[723,738]},{"text":"\"children\"","type":"String","range":[740,750]},{"text":"key","type":"Identifier","range":[756,759]},{"text":"React","type":"Identifier","range":[761,766]},{"text":"Key","type":"Identifier","range":[767,770]},{"text":"export","type":"Keyword","range":[775,781]},{"text":"interface","type":"Keyword","range":[782,791]},{"text":"TransitionGroupProps","type":"Identifier","range":[792,812]},{"text":"name","type":"Identifier","range":[817,821]},{"text":"string","type":"Identifier","range":[824,830]},{"text":"appear","type":"Identifier","range":[834,840]},{"text":"boolean","type":"Identifier","range":[843,850]},{"text":"moveTransition","type":"Identifier","range":[854,868]},{"text":"boolean","type":"Identifier","range":[871,878]},{"text":"moveClass","type":"Identifier","range":[882,891]},{"text":"string","type":"Identifier","range":[894,900]},{"text":"children","type":"Identifier","range":[904,912]},{"text":"React","type":"Identifier","range":[920,925]},{"text":"ReactElement","type":"Identifier","range":[926,938]},{"text":"TransitionProps","type":"Identifier","range":[939,954]},{"text":"React","type":"Identifier","range":[962,967]},{"text":"ReactElement","type":"Identifier","range":[968,980]},{"text":"TransitionProps","type":"Identifier","range":[981,996]},{"text":"const","type":"Keyword","range":[1004,1009]},{"text":"TransitionGroup","type":"Identifier","range":[1010,1025]},{"text":"memo","type":"Identifier","range":[1028,1032]},{"text":"children","type":"Identifier","range":[1043,1051]},{"text":"name","type":"Identifier","range":[1057,1061]},{"text":"\"transition\"","type":"String","range":[1064,1076]},{"text":"appear","type":"Identifier","range":[1082,1088]},{"text":"moveTransition","type":"Identifier","range":[1094,1108]},{"text":"true","type":"Boolean","range":[1111,1115]},{"text":"moveClass","type":"Identifier","range":[1121,1130]},{"text":"TransitionGroupProps","type":"Identifier","range":[1137,1157]},{"text":" we have to check that array didn't had any keys before calling toArray","type":"Line","range":[1168,1241]},{"text":" because it will add keys itself that'd be unstable","type":"Line","range":[1246,1299]},{"text":"if","type":"Keyword","range":[1304,1306]},{"text":"__DEV__","type":"Identifier","range":[1308,1315]},{"text":"ensureChildrenKeys","type":"Identifier","range":[1325,1343]},{"text":"children","type":"Identifier","range":[1344,1352]},{"text":"const","type":"Keyword","range":[1365,1370]},{"text":"latestProps","type":"Identifier","range":[1371,1382]},{"text":"useLatest","type":"Identifier","range":[1385,1394]},{"text":"name","type":"Identifier","range":[1397,1401]},{"text":"moveClass","type":"Identifier","range":[1403,1412]},{"text":"moveTransition","type":"Identifier","range":[1414,1428]},{"text":"const","type":"Keyword","range":[1437,1442]},{"text":"isMounted","type":"Identifier","range":[1443,1452]},{"text":"useIsMounted","type":"Identifier","range":[1455,1467]},{"text":"const","type":"Keyword","range":[1476,1481]},{"text":"childrenArray","type":"Identifier","range":[1482,1495]},{"text":"Children","type":"Identifier","range":[1498,1506]},{"text":"toArray","type":"Identifier","range":[1507,1514]},{"text":"children","type":"Identifier","range":[1515,1523]},{"text":"as","type":"Identifier","range":[1525,1527]},{"text":"React","type":"Identifier","range":[1528,1533]},{"text":"ReactElement","type":"Identifier","range":[1534,1546]},{"text":"const","type":"Keyword","range":[1554,1559]},{"text":"prevChildren","type":"Identifier","range":[1560,1572]},{"text":"usePrevious","type":"Identifier","range":[1575,1586]},{"text":"childrenArray","type":"Identifier","range":[1587,1600]},{"text":" is it helpful to have `newChildrenElements`?","type":"Line","range":[1608,1655]},{"text":"const","type":"Keyword","range":[1660,1665]},{"text":"newChildrenElements","type":"Identifier","range":[1666,1685]},{"text":"useRef","type":"Identifier","range":[1688,1694]},{"text":"Element","type":"Identifier","range":[1695,1702]},{"text":"const","type":"Keyword","range":[1715,1720]},{"text":"prevChildrenElements","type":"Identifier","range":[1721,1741]},{"text":"useRef","type":"Identifier","range":[1744,1750]},{"text":"Element","type":"Identifier","range":[1751,1758]},{"text":"const","type":"Keyword","range":[1772,1777]},{"text":"runEffect","type":"Identifier","range":[1778,1787]},{"text":"useRef","type":"Identifier","range":[1790,1796]},{"text":"0","type":"Numeric","range":[1797,1798]},{"text":"if","type":"Keyword","range":[1806,1808]},{"text":"moveTransition","type":"Identifier","range":[1817,1831]},{"text":"prevChildren","type":"Identifier","range":[1843,1855]},{"text":"current","type":"Identifier","range":[1856,1863]},{"text":"areChildrenEqual","type":"Identifier","range":[1876,1892]},{"text":"childrenArray","type":"Identifier","range":[1893,1906]},{"text":"prevChildren","type":"Identifier","range":[1908,1920]},{"text":"current","type":"Identifier","range":[1921,1928]},{"text":" children are changed, increment counter to","type":"Line","range":[1945,1990]},{"text":" run layout effect","type":"Line","range":[1997,2017]},{"text":"runEffect","type":"Identifier","range":[2024,2033]},{"text":"current","type":"Identifier","range":[2034,2041]},{"text":" only record positions if children has changed","type":"Line","range":[2051,2099]},{"text":"prevChildrenElements","type":"Identifier","range":[2106,2126]},{"text":"current","type":"Identifier","range":[2127,2134]},{"text":"forEach","type":"Identifier","range":[2135,2142]},{"text":"recordPosition","type":"Identifier","range":[2143,2157]},{"text":"const","type":"Keyword","range":[2171,2176]},{"text":"ctxValue","type":"Identifier","range":[2177,2185]},{"text":"useMemo","type":"Identifier","range":[2188,2195]},{"text":"get","type":"Identifier","range":[2220,2223]},{"text":"isAppearing","type":"Identifier","range":[2224,2235]},{"text":"return","type":"Keyword","range":[2250,2256]},{"text":"isMounted","type":"Identifier","range":[2258,2267]},{"text":"current","type":"Identifier","range":[2268,2275]},{"text":"register","type":"Identifier","range":[2296,2304]},{"text":"element","type":"Identifier","range":[2305,2312]},{"text":"Element","type":"Identifier","range":[2314,2321]},{"text":"if","type":"Keyword","range":[2335,2337]},{"text":"element","type":"Identifier","range":[2341,2348]},{"text":"as","type":"Identifier","range":[2349,2351]},{"text":"any","type":"Identifier","range":[2352,2355]},{"text":"ElementBindings","type":"Identifier","range":[2357,2372]},{"text":"registered","type":"Identifier","range":[2373,2383]},{"text":"element","type":"Identifier","range":[2401,2408]},{"text":"as","type":"Identifier","range":[2409,2411]},{"text":"any","type":"Identifier","range":[2412,2415]},{"text":"ElementBindings","type":"Identifier","range":[2417,2432]},{"text":"registered","type":"Identifier","range":[2433,2443]},{"text":"true","type":"Boolean","range":[2447,2451]},{"text":"newChildrenElements","type":"Identifier","range":[2465,2484]},{"text":"current","type":"Identifier","range":[2485,2492]},{"text":"push","type":"Identifier","range":[2493,2497]},{"text":"element","type":"Identifier","range":[2498,2505]},{"text":"unregister","type":"Identifier","range":[2539,2549]},{"text":"element","type":"Identifier","range":[2550,2557]},{"text":"Element","type":"Identifier","range":[2559,2566]},{"text":"removeArrayElement","type":"Identifier","range":[2580,2598]},{"text":"prevChildrenElements","type":"Identifier","range":[2599,2619]},{"text":"current","type":"Identifier","range":[2620,2627]},{"text":"element","type":"Identifier","range":[2629,2636]},{"text":"element","type":"Identifier","range":[2650,2657]},{"text":"as","type":"Identifier","range":[2658,2660]},{"text":"any","type":"Identifier","range":[2661,2664]},{"text":"ElementBindings","type":"Identifier","range":[2666,2681]},{"text":"registered","type":"Identifier","range":[2682,2692]},{"text":"null","type":"Keyword","range":[2696,2700]},{"text":"isMounted","type":"Identifier","range":[2730,2739]},{"text":"useLayoutEffect","type":"Identifier","range":[2753,2768]},{"text":"const","type":"Keyword","range":[2783,2788]},{"text":"moveTransition","type":"Identifier","range":[2791,2805]},{"text":"moveClass","type":"Identifier","range":[2807,2816]},{"text":"name","type":"Identifier","range":[2818,2822]},{"text":"latestProps","type":"Identifier","range":[2827,2838]},{"text":"current","type":"Identifier","range":[2839,2846]},{"text":"if","type":"Keyword","range":[2855,2857]},{"text":"moveTransition","type":"Identifier","range":[2860,2874]},{"text":"return","type":"Keyword","range":[2876,2882]},{"text":"if","type":"Keyword","range":[2891,2893]},{"text":"isMounted","type":"Identifier","range":[2895,2904]},{"text":"current","type":"Identifier","range":[2905,2912]},{"text":"const","type":"Keyword","range":[2924,2929]},{"text":"moveCls","type":"Identifier","range":[2930,2937]},{"text":"moveClass","type":"Identifier","range":[2940,2949]},{"text":"`${","type":"Template","range":[2953,2956]},{"text":"name","type":"Identifier","range":[2956,2960]},{"text":"}-move`","type":"Template","range":[2960,2967]},{"text":"const","type":"Keyword","range":[2977,2982]},{"text":"childrenToMove","type":"Identifier","range":[2983,2997]},{"text":"prevChildrenElements","type":"Identifier","range":[3000,3020]},{"text":"current","type":"Identifier","range":[3021,3028]},{"text":" separate loops for reads and writes to improve performance","type":"Line","range":[3039,3100]},{"text":" https://stackoverflow.com/questions/19250971/why-a-tiny-reordering-of-dom-read-write-operations-causes-a-huge-performance-dif","type":"Line","range":[3109,3237]},{"text":"childrenToMove","type":"Identifier","range":[3246,3260]},{"text":"forEach","type":"Identifier","range":[3261,3268]},{"text":"el","type":"Identifier","range":[3269,3271]},{"text":"el","type":"Identifier","range":[3286,3288]},{"text":"as","type":"Identifier","range":[3289,3291]},{"text":"any","type":"Identifier","range":[3292,3295]},{"text":"ElementBindings","type":"Identifier","range":[3297,3312]},{"text":"moveCallback","type":"Identifier","range":[3313,3325]},{"text":"childrenToMove","type":"Identifier","range":[3350,3364]},{"text":"forEach","type":"Identifier","range":[3365,3372]},{"text":"recordNewPosition","type":"Identifier","range":[3373,3390]},{"text":"const","type":"Keyword","range":[3401,3406]},{"text":"movedChildren","type":"Identifier","range":[3407,3420]},{"text":"childrenToMove","type":"Identifier","range":[3423,3437]},{"text":"filter","type":"Identifier","range":[3438,3444]},{"text":"applyTranslation","type":"Identifier","range":[3445,3461]},{"text":"forceReflow","type":"Identifier","range":[3473,3484]},{"text":"movedChildren","type":"Identifier","range":[3497,3510]},{"text":"forEach","type":"Identifier","range":[3511,3518]},{"text":"child","type":"Identifier","range":[3519,3524]},{"text":"addClass","type":"Identifier","range":[3540,3548]},{"text":"child","type":"Identifier","range":[3549,3554]},{"text":"moveCls","type":"Identifier","range":[3556,3563]},{"text":"child","type":"Identifier","range":[3577,3582]},{"text":"as","type":"Identifier","range":[3583,3585]},{"text":"HTMLElement","type":"Identifier","range":[3586,3597]},{"text":"style","type":"Identifier","range":[3599,3604]},{"text":"transitionDuration","type":"Identifier","range":[3605,3623]},{"text":"\"\"","type":"String","range":[3626,3628]},{"text":"child","type":"Identifier","range":[3641,3646]},{"text":"as","type":"Identifier","range":[3647,3649]},{"text":"HTMLElement","type":"Identifier","range":[3650,3661]},{"text":"style","type":"Identifier","range":[3663,3668]},{"text":"transform","type":"Identifier","range":[3669,3678]},{"text":"\"\"","type":"String","range":[3681,3683]},{"text":"const","type":"Keyword","range":[3695,3700]},{"text":"endCb","type":"Identifier","range":[3701,3706]},{"text":"child","type":"Identifier","range":[3711,3716]},{"text":"as","type":"Identifier","range":[3717,3719]},{"text":"any","type":"Identifier","range":[3720,3723]},{"text":"ElementBindings","type":"Identifier","range":[3725,3740]},{"text":"moveCallback","type":"Identifier","range":[3741,3753]},{"text":"e","type":"Identifier","range":[3771,3772]},{"text":"Event","type":"Identifier","range":[3775,3780]},{"text":"if","type":"Keyword","range":[3810,3812]},{"text":"e","type":"Identifier","range":[3814,3815]},{"text":"e","type":"Identifier","range":[3819,3820]},{"text":"target","type":"Identifier","range":[3821,3827]},{"text":"child","type":"Identifier","range":[3832,3837]},{"text":"return","type":"Keyword","range":[3855,3861]},{"text":"if","type":"Keyword","range":[3889,3891]},{"text":"e","type":"Identifier","range":[3894,3895]},{"text":"/transform$/","type":"RegularExpression","range":[3899,3911]},{"text":"test","type":"Identifier","range":[3912,3916]},{"text":"e","type":"Identifier","range":[3918,3919]},{"text":"as","type":"Identifier","range":[3920,3922]},{"text":"TransitionEvent","type":"Identifier","range":[3923,3938]},{"text":"propertyName","type":"Identifier","range":[3940,3952]},{"text":"child","type":"Identifier","range":[3971,3976]},{"text":"removeEventListener","type":"Identifier","range":[3977,3996]},{"text":"\"transitionend\"","type":"String","range":[3997,4012]},{"text":"endCb","type":"Identifier","range":[4014,4019]},{"text":"child","type":"Identifier","range":[4037,4042]},{"text":"as","type":"Identifier","range":[4043,4045]},{"text":"any","type":"Identifier","range":[4046,4049]},{"text":"ElementBindings","type":"Identifier","range":[4051,4066]},{"text":"moveCallback","type":"Identifier","range":[4067,4079]},{"text":"null","type":"Keyword","range":[4083,4087]},{"text":"removeClass","type":"Identifier","range":[4103,4114]},{"text":"child","type":"Identifier","range":[4115,4120]},{"text":"moveCls","type":"Identifier","range":[4122,4129]},{"text":"child","type":"Identifier","range":[4170,4175]},{"text":"addEventListener","type":"Identifier","range":[4176,4192]},{"text":"\"transitionend\"","type":"String","range":[4193,4208]},{"text":"endCb","type":"Identifier","range":[4210,4215]},{"text":"if","type":"Keyword","range":[4245,4247]},{"text":"newChildrenElements","type":"Identifier","range":[4249,4268]},{"text":"current","type":"Identifier","range":[4269,4276]},{"text":"length","type":"Identifier","range":[4277,4283]},{"text":"0","type":"Numeric","range":[4286,4287]},{"text":"prevChildrenElements","type":"Identifier","range":[4299,4319]},{"text":"current","type":"Identifier","range":[4320,4327]},{"text":"prevChildrenElements","type":"Identifier","range":[4330,4350]},{"text":"current","type":"Identifier","range":[4351,4358]},{"text":"concat","type":"Identifier","range":[4359,4365]},{"text":"newChildrenElements","type":"Identifier","range":[4377,4396]},{"text":"current","type":"Identifier","range":[4397,4404]},{"text":"newChildrenElements","type":"Identifier","range":[4424,4443]},{"text":"current","type":"Identifier","range":[4444,4451]},{"text":"runEffect","type":"Identifier","range":[4474,4483]},{"text":"current","type":"Identifier","range":[4484,4491]},{"text":"latestProps","type":"Identifier","range":[4493,4504]},{"text":"isMounted","type":"Identifier","range":[4506,4515]},{"text":"const","type":"Keyword","range":[4524,4529]},{"text":"childrenToRender","type":"Identifier","range":[4530,4546]},{"text":"#__NOINLINE__","type":"Block","range":[4549,4566]},{"text":"useTransitionChildren","type":"Identifier","range":[4567,4588]},{"text":"childrenArray","type":"Identifier","range":[4596,4609]},{"text":"appear","type":"Identifier","range":[4617,4623]},{"text":"name","type":"Identifier","range":[4631,4635]},{"text":"return","type":"Keyword","range":[4648,4654]},{"text":"TransitionGroupContext","type":"JSXIdentifier","range":[4664,4686]},{"text":"Provider","type":"JSXIdentifier","range":[4687,4695]},{"text":"value","type":"JSXIdentifier","range":[4696,4701]},{"text":"ctxValue","type":"Identifier","range":[4703,4711]},{"text":"\n        ","type":"JSXText","range":[4713,4722]},{"text":"childrenToRender","type":"Identifier","range":[4723,4739]},{"text":"\n      ","type":"JSXText","range":[4740,4747]},{"text":"TransitionGroupContext","type":"JSXIdentifier","range":[4749,4771]},{"text":"Provider","type":"JSXIdentifier","range":[4772,4780]},{"text":"function","type":"Keyword","range":[4797,4805]},{"text":"useTransitionChildren","type":"Identifier","range":[4806,4827]},{"text":"children","type":"Identifier","range":[4831,4839]},{"text":"React","type":"Identifier","range":[4841,4846]},{"text":"ReactElement","type":"Identifier","range":[4847,4859]},{"text":"appear","type":"Identifier","range":[4865,4871]},{"text":"boolean","type":"Identifier","range":[4873,4880]},{"text":"undefined","type":"Identifier","range":[4883,4892]},{"text":"name","type":"Identifier","range":[4896,4900]},{"text":"string","type":"Identifier","range":[4903,4909]},{"text":"const","type":"Keyword","range":[4916,4921]},{"text":"prevChildrenMapping","type":"Identifier","range":[4922,4941]},{"text":"useRef","type":"Identifier","range":[4944,4950]},{"text":"Record","type":"Identifier","range":[4951,4957]},{"text":"string","type":"Identifier","range":[4958,4964]},{"text":"React","type":"Identifier","range":[4966,4971]},{"text":"ReactElement","type":"Identifier","range":[4972,4984]},{"text":"null","type":"Keyword","range":[4988,4992]},{"text":"null","type":"Keyword","range":[4999,5003]},{"text":"const","type":"Keyword","range":[5012,5017]},{"text":"newChildren","type":"Identifier","range":[5018,5029]},{"text":"getChildMapping","type":"Identifier","range":[5032,5047]},{"text":"children","type":"Identifier","range":[5048,5056]},{"text":"const","type":"Keyword","range":[5061,5066]},{"text":"prevChildren","type":"Identifier","range":[5067,5079]},{"text":"prevChildrenMapping","type":"Identifier","range":[5082,5101]},{"text":"current","type":"Identifier","range":[5102,5109]},{"text":"const","type":"Keyword","range":[5114,5119]},{"text":"result","type":"Identifier","range":[5120,5126]},{"text":"React","type":"Identifier","range":[5128,5133]},{"text":"ReactElement","type":"Identifier","range":[5134,5146]},{"text":"if","type":"Keyword","range":[5158,5160]},{"text":"prevChildren","type":"Identifier","range":[5163,5175]},{"text":"for","type":"Keyword","range":[5183,5186]},{"text":"const","type":"Keyword","range":[5188,5193]},{"text":"key","type":"Identifier","range":[5194,5197]},{"text":"in","type":"Keyword","range":[5198,5200]},{"text":"newChildren","type":"Identifier","range":[5201,5212]},{"text":"const","type":"Keyword","range":[5222,5227]},{"text":"childAppear","type":"Identifier","range":[5228,5239]},{"text":"getElementProps","type":"Identifier","range":[5242,5257]},{"text":"newChildren","type":"Identifier","range":[5258,5269]},{"text":"key","type":"Identifier","range":[5270,5273]},{"text":"\"appear\"","type":"String","range":[5276,5284]},{"text":"appear","type":"Identifier","range":[5286,5292]},{"text":"const","type":"Keyword","range":[5301,5306]},{"text":"childName","type":"Identifier","range":[5307,5316]},{"text":"getElementProps","type":"Identifier","range":[5319,5334]},{"text":"newChildren","type":"Identifier","range":[5335,5346]},{"text":"key","type":"Identifier","range":[5347,5350]},{"text":"\"name\"","type":"String","range":[5353,5359]},{"text":"name","type":"Identifier","range":[5361,5365]},{"text":"result","type":"Identifier","range":[5375,5381]},{"text":"push","type":"Identifier","range":[5382,5386]},{"text":"cloneElement","type":"Identifier","range":[5396,5408]},{"text":"newChildren","type":"Identifier","range":[5409,5420]},{"text":"key","type":"Identifier","range":[5421,5424]},{"text":"key","type":"Identifier","range":[5439,5442]},{"text":"visible","type":"Identifier","range":[5454,5461]},{"text":"true","type":"Boolean","range":[5463,5467]},{"text":"appear","type":"Identifier","range":[5479,5485]},{"text":"childAppear","type":"Identifier","range":[5487,5498]},{"text":"name","type":"Identifier","range":[5510,5514]},{"text":"childName","type":"Identifier","range":[5516,5525]},{"text":"prevChildrenMapping","type":"Identifier","range":[5557,5576]},{"text":"current","type":"Identifier","range":[5577,5584]},{"text":"newChildren","type":"Identifier","range":[5587,5598]},{"text":"else","type":"Keyword","range":[5604,5608]},{"text":"const","type":"Keyword","range":[5615,5620]},{"text":"mapping","type":"Identifier","range":[5621,5628]},{"text":"prevChildrenMapping","type":"Identifier","range":[5632,5651]},{"text":"current","type":"Identifier","range":[5652,5659]},{"text":"mergeChildMappings","type":"Identifier","range":[5662,5680]},{"text":"prevChildren","type":"Identifier","range":[5688,5700]},{"text":"newChildren","type":"Identifier","range":[5708,5719]},{"text":"for","type":"Keyword","range":[5732,5735]},{"text":"const","type":"Keyword","range":[5737,5742]},{"text":"key","type":"Identifier","range":[5743,5746]},{"text":"in","type":"Keyword","range":[5747,5749]},{"text":"mapping","type":"Identifier","range":[5750,5757]},{"text":"const","type":"Keyword","range":[5767,5772]},{"text":"isOld","type":"Identifier","range":[5773,5778]},{"text":"hasOwn","type":"Identifier","range":[5781,5787]},{"text":"prevChildren","type":"Identifier","range":[5788,5800]},{"text":"key","type":"Identifier","range":[5802,5805]},{"text":"const","type":"Keyword","range":[5814,5819]},{"text":"isNew","type":"Identifier","range":[5820,5825]},{"text":"hasOwn","type":"Identifier","range":[5828,5834]},{"text":"newChildren","type":"Identifier","range":[5835,5846]},{"text":"key","type":"Identifier","range":[5848,5851]},{"text":"if","type":"Keyword","range":[5860,5862]},{"text":"isOld","type":"Identifier","range":[5864,5869]},{"text":"isNew","type":"Identifier","range":[5874,5879]},{"text":" deleted item","type":"Line","range":[5891,5906]},{"text":"const","type":"Keyword","range":[5915,5920]},{"text":"onAfterLeaveProp","type":"Identifier","range":[5921,5937]},{"text":"getElementProps","type":"Identifier","range":[5940,5955]},{"text":"prevChildren","type":"Identifier","range":[5967,5979]},{"text":"key","type":"Identifier","range":[5980,5983]},{"text":"\"onAfterLeave\"","type":"String","range":[5996,6010]},{"text":"result","type":"Identifier","range":[6030,6036]},{"text":"push","type":"Identifier","range":[6037,6041]},{"text":"cloneElement","type":"Identifier","range":[6053,6065]},{"text":"prevChildren","type":"Identifier","range":[6066,6078]},{"text":"key","type":"Identifier","range":[6079,6082]},{"text":"visible","type":"Identifier","range":[6099,6106]},{"text":"false","type":"Boolean","range":[6108,6113]},{"text":"onAfterLeave","type":"Identifier","range":[6127,6139]},{"text":"el","type":"Identifier","range":[6142,6144]},{"text":"Element","type":"Identifier","range":[6146,6153]},{"text":"onAfterLeaveProp","type":"Identifier","range":[6174,6190]},{"text":"el","type":"Identifier","range":[6193,6195]},{"text":"delete","type":"Keyword","range":[6212,6218]},{"text":"prevChildrenMapping","type":"Identifier","range":[6219,6238]},{"text":"current","type":"Identifier","range":[6239,6246]},{"text":"key","type":"Identifier","range":[6249,6252]},{"text":"name","type":"Identifier","range":[6282,6286]},{"text":"getElementProps","type":"Identifier","range":[6288,6303]},{"text":"prevChildren","type":"Identifier","range":[6304,6316]},{"text":"key","type":"Identifier","range":[6317,6320]},{"text":"\"name\"","type":"String","range":[6323,6329]},{"text":"name","type":"Identifier","range":[6331,6335]},{"text":"else","type":"Keyword","range":[6370,6374]},{"text":" new or old item","type":"Line","range":[6385,6403]},{"text":"const","type":"Keyword","range":[6412,6417]},{"text":"props","type":"Identifier","range":[6418,6423]},{"text":"TransitionCloneProps","type":"Identifier","range":[6425,6445]},{"text":"key","type":"Identifier","range":[6460,6463]},{"text":"visible","type":"Identifier","range":[6475,6482]},{"text":"true","type":"Boolean","range":[6484,6488]},{"text":"name","type":"Identifier","range":[6500,6504]},{"text":"getElementProps","type":"Identifier","range":[6506,6521]},{"text":"newChildren","type":"Identifier","range":[6522,6533]},{"text":"key","type":"Identifier","range":[6534,6537]},{"text":"\"name\"","type":"String","range":[6540,6546]},{"text":"name","type":"Identifier","range":[6548,6552]},{"text":" passing appear `true` for new items, because without it","type":"Line","range":[6565,6623]},{"text":" we won't get enter transition","type":"Line","range":[6634,6666]},{"text":"appear","type":"Identifier","range":[6677,6683]},{"text":"isNew","type":"Identifier","range":[6685,6690]},{"text":"result","type":"Identifier","range":[6712,6718]},{"text":"push","type":"Identifier","range":[6719,6723]},{"text":"cloneElement","type":"Identifier","range":[6724,6736]},{"text":"newChildren","type":"Identifier","range":[6737,6748]},{"text":"key","type":"Identifier","range":[6749,6752]},{"text":"props","type":"Identifier","range":[6755,6760]},{"text":"return","type":"Keyword","range":[6784,6790]},{"text":"result","type":"Identifier","range":[6791,6797]},{"text":"export","type":"Keyword","range":[6802,6808]},{"text":"default","type":"Keyword","range":[6809,6816]},{"text":"TransitionGroup","type":"Identifier","range":[6817,6832]}]}