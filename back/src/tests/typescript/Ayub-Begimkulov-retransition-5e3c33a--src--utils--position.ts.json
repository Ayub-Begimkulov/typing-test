{"type":"typescript","text":"const positionMap = new WeakMap<Element, { top: number; left: number }>();\nconst newPositionMap = new WeakMap<Element, { top: number; left: number }>();\n\nexport function recordPosition(element: Element) {\n  positionMap.set(element, element.getBoundingClientRect());\n}\n\nexport function recordNewPosition(element: Element) {\n  newPositionMap.set(element, element.getBoundingClientRect());\n}\n\nexport function applyTranslation(element: Element) {\n  const oldPos = positionMap.get(element);\n  const newPos = newPositionMap.get(element);\n  // istanbul ignore if\n  if (!oldPos || !newPos) return;\n  const dx = oldPos.left - newPos.left;\n  const dy = oldPos.top - newPos.top;\n  if (!dx && !dy) return;\n  const style = (element as HTMLElement).style;\n  style.transform = `translate(${dx}px,${dy}px)`;\n  style.transitionDuration = \"0\";\n  return element;\n}\n\nexport function forceReflow() {\n  return document.body.offsetHeight;\n}\n","words":[{"text":"const","type":"Keyword","range":[0,5]},{"text":"positionMap","type":"Identifier","range":[6,17]},{"text":"new","type":"Keyword","range":[20,23]},{"text":"WeakMap","type":"Identifier","range":[24,31]},{"text":"Element","type":"Identifier","range":[32,39]},{"text":"top","type":"Identifier","range":[43,46]},{"text":"number","type":"Identifier","range":[48,54]},{"text":"left","type":"Identifier","range":[56,60]},{"text":"number","type":"Identifier","range":[62,68]},{"text":"const","type":"Keyword","range":[75,80]},{"text":"newPositionMap","type":"Identifier","range":[81,95]},{"text":"new","type":"Keyword","range":[98,101]},{"text":"WeakMap","type":"Identifier","range":[102,109]},{"text":"Element","type":"Identifier","range":[110,117]},{"text":"top","type":"Identifier","range":[121,124]},{"text":"number","type":"Identifier","range":[126,132]},{"text":"left","type":"Identifier","range":[134,138]},{"text":"number","type":"Identifier","range":[140,146]},{"text":"export","type":"Keyword","range":[154,160]},{"text":"function","type":"Keyword","range":[161,169]},{"text":"recordPosition","type":"Identifier","range":[170,184]},{"text":"element","type":"Identifier","range":[185,192]},{"text":"Element","type":"Identifier","range":[194,201]},{"text":"positionMap","type":"Identifier","range":[207,218]},{"text":"set","type":"Identifier","range":[219,222]},{"text":"element","type":"Identifier","range":[223,230]},{"text":"element","type":"Identifier","range":[232,239]},{"text":"getBoundingClientRect","type":"Identifier","range":[240,261]},{"text":"export","type":"Keyword","range":[269,275]},{"text":"function","type":"Keyword","range":[276,284]},{"text":"recordNewPosition","type":"Identifier","range":[285,302]},{"text":"element","type":"Identifier","range":[303,310]},{"text":"Element","type":"Identifier","range":[312,319]},{"text":"newPositionMap","type":"Identifier","range":[325,339]},{"text":"set","type":"Identifier","range":[340,343]},{"text":"element","type":"Identifier","range":[344,351]},{"text":"element","type":"Identifier","range":[353,360]},{"text":"getBoundingClientRect","type":"Identifier","range":[361,382]},{"text":"export","type":"Keyword","range":[390,396]},{"text":"function","type":"Keyword","range":[397,405]},{"text":"applyTranslation","type":"Identifier","range":[406,422]},{"text":"element","type":"Identifier","range":[423,430]},{"text":"Element","type":"Identifier","range":[432,439]},{"text":"const","type":"Keyword","range":[445,450]},{"text":"oldPos","type":"Identifier","range":[451,457]},{"text":"positionMap","type":"Identifier","range":[460,471]},{"text":"get","type":"Identifier","range":[472,475]},{"text":"element","type":"Identifier","range":[476,483]},{"text":"const","type":"Keyword","range":[488,493]},{"text":"newPos","type":"Identifier","range":[494,500]},{"text":"newPositionMap","type":"Identifier","range":[503,517]},{"text":"get","type":"Identifier","range":[518,521]},{"text":"element","type":"Identifier","range":[522,529]},{"text":" istanbul ignore if","type":"Line","range":[534,555]},{"text":"if","type":"Keyword","range":[558,560]},{"text":"oldPos","type":"Identifier","range":[563,569]},{"text":"newPos","type":"Identifier","range":[574,580]},{"text":"return","type":"Keyword","range":[582,588]},{"text":"const","type":"Keyword","range":[592,597]},{"text":"dx","type":"Identifier","range":[598,600]},{"text":"oldPos","type":"Identifier","range":[603,609]},{"text":"left","type":"Identifier","range":[610,614]},{"text":"newPos","type":"Identifier","range":[617,623]},{"text":"left","type":"Identifier","range":[624,628]},{"text":"const","type":"Keyword","range":[632,637]},{"text":"dy","type":"Identifier","range":[638,640]},{"text":"oldPos","type":"Identifier","range":[643,649]},{"text":"top","type":"Identifier","range":[650,653]},{"text":"newPos","type":"Identifier","range":[656,662]},{"text":"top","type":"Identifier","range":[663,666]},{"text":"if","type":"Keyword","range":[670,672]},{"text":"dx","type":"Identifier","range":[675,677]},{"text":"dy","type":"Identifier","range":[682,684]},{"text":"return","type":"Keyword","range":[686,692]},{"text":"const","type":"Keyword","range":[696,701]},{"text":"style","type":"Identifier","range":[702,707]},{"text":"element","type":"Identifier","range":[711,718]},{"text":"as","type":"Identifier","range":[719,721]},{"text":"HTMLElement","type":"Identifier","range":[722,733]},{"text":"style","type":"Identifier","range":[735,740]},{"text":"style","type":"Identifier","range":[744,749]},{"text":"transform","type":"Identifier","range":[750,759]},{"text":"`translate(${","type":"Template","range":[762,775]},{"text":"dx","type":"Identifier","range":[775,777]},{"text":"}px,${","type":"Template","range":[777,783]},{"text":"dy","type":"Identifier","range":[783,785]},{"text":"}px)`","type":"Template","range":[785,790]},{"text":"style","type":"Identifier","range":[794,799]},{"text":"transitionDuration","type":"Identifier","range":[800,818]},{"text":"\"0\"","type":"String","range":[821,824]},{"text":"return","type":"Keyword","range":[828,834]},{"text":"element","type":"Identifier","range":[835,842]},{"text":"export","type":"Keyword","range":[847,853]},{"text":"function","type":"Keyword","range":[854,862]},{"text":"forceReflow","type":"Identifier","range":[863,874]},{"text":"return","type":"Keyword","range":[881,887]},{"text":"document","type":"Identifier","range":[888,896]},{"text":"body","type":"Identifier","range":[897,901]},{"text":"offsetHeight","type":"Identifier","range":[902,914]}]}