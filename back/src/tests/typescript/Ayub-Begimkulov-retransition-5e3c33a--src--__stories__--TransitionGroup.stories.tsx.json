{"type":"typescript","text":"import React, { useState } from \"react\";\nimport { Transition, TransitionGroup } from \"..\";\nimport \"./style.css\";\n\nexport default {\n  title: \"Components/TransitionGroup\",\n  component: TransitionGroup,\n};\n\nfunction shuffle(array: any[]) {\n  const length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  let index = -1;\n  const lastIndex = length - 1;\n  const result = array.slice();\n  while (++index < length) {\n    const rand = index + Math.floor(Math.random() * (lastIndex - index + 1));\n    const value = result[rand];\n    result[rand] = result[index];\n    result[index] = value;\n  }\n  return result;\n}\n\nconst getRandomIndex = (length: number) => Math.floor(Math.random() * length);\n\nconst initialNumbers = new Array(10)\n  .fill(null)\n  .map((_, i) => ({ value: i, index: Math.random() }));\n\nexport const Default = () => {\n  const [numbers, setNumbers] = useState(initialNumbers);\n\n  const add = () => {\n    const index = getRandomIndex(numbers.length);\n    const newNum = {\n      value: numbers.length,\n      index: Math.random(),\n    };\n    const newValue = [\n      ...numbers.slice(0, index),\n      newNum,\n      ...numbers.slice(index),\n    ];\n    setNumbers(newValue);\n  };\n\n  const remove = () => {\n    const index = getRandomIndex(numbers.length);\n    const newValue = numbers.filter((_, idx) => idx !== index);\n    setNumbers(newValue);\n  };\n\n  const reorder = () => {\n    setNumbers(n => shuffle(n));\n  };\n\n  return (\n    <>\n      <button onClick={add} style={{ marginRight: 5 }}>\n        Add\n      </button>\n      <button onClick={remove} style={{ marginRight: 5 }}>\n        Remove\n      </button>\n      <button onClick={reorder} style={{ marginRight: 5 }}>\n        Shuffle\n      </button>\n      <div>\n        <TransitionGroup name=\"fade\">\n          {numbers.map(n => (\n            <Transition key={n.index}>\n              {({ ref }) => (\n                <div ref={ref} style={{ padding: 5 }}>\n                  {n.value}\n                </div>\n              )}\n            </Transition>\n          ))}\n        </TransitionGroup>\n      </div>\n    </>\n  );\n};\n\nconst makeArr = () => {\n  return Array(81)\n    .fill(null)\n    .map((_, index) => ({\n      id: \"$\" + index,\n      number: (index % 9) + 1,\n    }));\n};\n\nexport const Sudoku = () => {\n  const [numbers, setNumbers] = useState(() => makeArr());\n\n  return (\n    <>\n      <button onClick={() => setNumbers(v => shuffle(v))}>shuffle</button>{\" \"}\n      <div className=\"container\">\n        <TransitionGroup name=\"cell\">\n          {numbers.map(({ id, number }) => (\n            <Transition key={id}>\n              {({ ref }) => (\n                <div ref={ref} className=\"cell\">\n                  {number}\n                </div>\n              )}\n            </Transition>\n          ))}\n        </TransitionGroup>\n      </div>\n    </>\n  );\n};\n","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"React","type":"Identifier","range":[7,12]},{"text":"useState","type":"Identifier","range":[16,24]},{"text":"from","type":"Identifier","range":[27,31]},{"text":"\"react\"","type":"String","range":[32,39]},{"text":"import","type":"Keyword","range":[41,47]},{"text":"Transition","type":"Identifier","range":[50,60]},{"text":"TransitionGroup","type":"Identifier","range":[62,77]},{"text":"from","type":"Identifier","range":[80,84]},{"text":"\"..\"","type":"String","range":[85,89]},{"text":"import","type":"Keyword","range":[91,97]},{"text":"\"./style.css\"","type":"String","range":[98,111]},{"text":"export","type":"Keyword","range":[114,120]},{"text":"default","type":"Keyword","range":[121,128]},{"text":"title","type":"Identifier","range":[133,138]},{"text":"\"Components/TransitionGroup\"","type":"String","range":[140,168]},{"text":"component","type":"Identifier","range":[172,181]},{"text":"TransitionGroup","type":"Identifier","range":[183,198]},{"text":"function","type":"Keyword","range":[204,212]},{"text":"shuffle","type":"Identifier","range":[213,220]},{"text":"array","type":"Identifier","range":[221,226]},{"text":"any","type":"Identifier","range":[228,231]},{"text":"const","type":"Keyword","range":[239,244]},{"text":"length","type":"Identifier","range":[245,251]},{"text":"array","type":"Identifier","range":[254,259]},{"text":"null","type":"Keyword","range":[263,267]},{"text":"0","type":"Numeric","range":[270,271]},{"text":"array","type":"Identifier","range":[274,279]},{"text":"length","type":"Identifier","range":[280,286]},{"text":"if","type":"Keyword","range":[290,292]},{"text":"length","type":"Identifier","range":[295,301]},{"text":"return","type":"Keyword","range":[309,315]},{"text":"let","type":"Keyword","range":[326,329]},{"text":"index","type":"Identifier","range":[330,335]},{"text":"1","type":"Numeric","range":[339,340]},{"text":"const","type":"Keyword","range":[344,349]},{"text":"lastIndex","type":"Identifier","range":[350,359]},{"text":"length","type":"Identifier","range":[362,368]},{"text":"1","type":"Numeric","range":[371,372]},{"text":"const","type":"Keyword","range":[376,381]},{"text":"result","type":"Identifier","range":[382,388]},{"text":"array","type":"Identifier","range":[391,396]},{"text":"slice","type":"Identifier","range":[397,402]},{"text":"while","type":"Keyword","range":[408,413]},{"text":"index","type":"Identifier","range":[417,422]},{"text":"length","type":"Identifier","range":[425,431]},{"text":"const","type":"Keyword","range":[439,444]},{"text":"rand","type":"Identifier","range":[445,449]},{"text":"index","type":"Identifier","range":[452,457]},{"text":"Math","type":"Identifier","range":[460,464]},{"text":"floor","type":"Identifier","range":[465,470]},{"text":"Math","type":"Identifier","range":[471,475]},{"text":"random","type":"Identifier","range":[476,482]},{"text":"lastIndex","type":"Identifier","range":[488,497]},{"text":"index","type":"Identifier","range":[500,505]},{"text":"1","type":"Numeric","range":[508,509]},{"text":"const","type":"Keyword","range":[517,522]},{"text":"value","type":"Identifier","range":[523,528]},{"text":"result","type":"Identifier","range":[531,537]},{"text":"rand","type":"Identifier","range":[538,542]},{"text":"result","type":"Identifier","range":[549,555]},{"text":"rand","type":"Identifier","range":[556,560]},{"text":"result","type":"Identifier","range":[564,570]},{"text":"index","type":"Identifier","range":[571,576]},{"text":"result","type":"Identifier","range":[583,589]},{"text":"index","type":"Identifier","range":[590,595]},{"text":"value","type":"Identifier","range":[599,604]},{"text":"return","type":"Keyword","range":[612,618]},{"text":"result","type":"Identifier","range":[619,625]},{"text":"const","type":"Keyword","range":[630,635]},{"text":"getRandomIndex","type":"Identifier","range":[636,650]},{"text":"length","type":"Identifier","range":[654,660]},{"text":"number","type":"Identifier","range":[662,668]},{"text":"Math","type":"Identifier","range":[673,677]},{"text":"floor","type":"Identifier","range":[678,683]},{"text":"Math","type":"Identifier","range":[684,688]},{"text":"random","type":"Identifier","range":[689,695]},{"text":"length","type":"Identifier","range":[700,706]},{"text":"const","type":"Keyword","range":[710,715]},{"text":"initialNumbers","type":"Identifier","range":[716,730]},{"text":"new","type":"Keyword","range":[733,736]},{"text":"Array","type":"Identifier","range":[737,742]},{"text":"10","type":"Numeric","range":[743,745]},{"text":"fill","type":"Identifier","range":[750,754]},{"text":"null","type":"Keyword","range":[755,759]},{"text":"map","type":"Identifier","range":[764,767]},{"text":"_","type":"Identifier","range":[769,770]},{"text":"i","type":"Identifier","range":[772,773]},{"text":"value","type":"Identifier","range":[781,786]},{"text":"i","type":"Identifier","range":[788,789]},{"text":"index","type":"Identifier","range":[791,796]},{"text":"Math","type":"Identifier","range":[798,802]},{"text":"random","type":"Identifier","range":[803,809]},{"text":"export","type":"Keyword","range":[818,824]},{"text":"const","type":"Keyword","range":[825,830]},{"text":"Default","type":"Identifier","range":[831,838]},{"text":"const","type":"Keyword","range":[851,856]},{"text":"numbers","type":"Identifier","range":[858,865]},{"text":"setNumbers","type":"Identifier","range":[867,877]},{"text":"useState","type":"Identifier","range":[881,889]},{"text":"initialNumbers","type":"Identifier","range":[890,904]},{"text":"const","type":"Keyword","range":[910,915]},{"text":"add","type":"Identifier","range":[916,919]},{"text":"const","type":"Keyword","range":[934,939]},{"text":"index","type":"Identifier","range":[940,945]},{"text":"getRandomIndex","type":"Identifier","range":[948,962]},{"text":"numbers","type":"Identifier","range":[963,970]},{"text":"length","type":"Identifier","range":[971,977]},{"text":"const","type":"Keyword","range":[984,989]},{"text":"newNum","type":"Identifier","range":[990,996]},{"text":"value","type":"Identifier","range":[1007,1012]},{"text":"numbers","type":"Identifier","range":[1014,1021]},{"text":"length","type":"Identifier","range":[1022,1028]},{"text":"index","type":"Identifier","range":[1036,1041]},{"text":"Math","type":"Identifier","range":[1043,1047]},{"text":"random","type":"Identifier","range":[1048,1054]},{"text":"const","type":"Keyword","range":[1069,1074]},{"text":"newValue","type":"Identifier","range":[1075,1083]},{"text":"numbers","type":"Identifier","range":[1097,1104]},{"text":"slice","type":"Identifier","range":[1105,1110]},{"text":"0","type":"Numeric","range":[1111,1112]},{"text":"index","type":"Identifier","range":[1114,1119]},{"text":"newNum","type":"Identifier","range":[1128,1134]},{"text":"numbers","type":"Identifier","range":[1145,1152]},{"text":"slice","type":"Identifier","range":[1153,1158]},{"text":"index","type":"Identifier","range":[1159,1164]},{"text":"setNumbers","type":"Identifier","range":[1178,1188]},{"text":"newValue","type":"Identifier","range":[1189,1197]},{"text":"const","type":"Keyword","range":[1208,1213]},{"text":"remove","type":"Identifier","range":[1214,1220]},{"text":"const","type":"Keyword","range":[1235,1240]},{"text":"index","type":"Identifier","range":[1241,1246]},{"text":"getRandomIndex","type":"Identifier","range":[1249,1263]},{"text":"numbers","type":"Identifier","range":[1264,1271]},{"text":"length","type":"Identifier","range":[1272,1278]},{"text":"const","type":"Keyword","range":[1285,1290]},{"text":"newValue","type":"Identifier","range":[1291,1299]},{"text":"numbers","type":"Identifier","range":[1302,1309]},{"text":"filter","type":"Identifier","range":[1310,1316]},{"text":"_","type":"Identifier","range":[1318,1319]},{"text":"idx","type":"Identifier","range":[1321,1324]},{"text":"idx","type":"Identifier","range":[1329,1332]},{"text":"index","type":"Identifier","range":[1337,1342]},{"text":"setNumbers","type":"Identifier","range":[1349,1359]},{"text":"newValue","type":"Identifier","range":[1360,1368]},{"text":"const","type":"Keyword","range":[1379,1384]},{"text":"reorder","type":"Identifier","range":[1385,1392]},{"text":"setNumbers","type":"Identifier","range":[1407,1417]},{"text":"n","type":"Identifier","range":[1418,1419]},{"text":"shuffle","type":"Identifier","range":[1423,1430]},{"text":"n","type":"Identifier","range":[1431,1432]},{"text":"return","type":"Keyword","range":[1444,1450]},{"text":"\n      ","type":"JSXText","range":[1459,1466]},{"text":"button","type":"JSXIdentifier","range":[1467,1473]},{"text":"onClick","type":"JSXIdentifier","range":[1474,1481]},{"text":"add","type":"Identifier","range":[1483,1486]},{"text":"style","type":"JSXIdentifier","range":[1488,1493]},{"text":"marginRight","type":"Identifier","range":[1497,1508]},{"text":"5","type":"Numeric","range":[1510,1511]},{"text":"\n        Add\n      ","type":"JSXText","range":[1515,1534]},{"text":"button","type":"JSXIdentifier","range":[1536,1542]},{"text":"\n      ","type":"JSXText","range":[1543,1550]},{"text":"button","type":"JSXIdentifier","range":[1551,1557]},{"text":"onClick","type":"JSXIdentifier","range":[1558,1565]},{"text":"remove","type":"Identifier","range":[1567,1573]},{"text":"style","type":"JSXIdentifier","range":[1575,1580]},{"text":"marginRight","type":"Identifier","range":[1584,1595]},{"text":"5","type":"Numeric","range":[1597,1598]},{"text":"\n        Remove\n      ","type":"JSXText","range":[1602,1624]},{"text":"button","type":"JSXIdentifier","range":[1626,1632]},{"text":"\n      ","type":"JSXText","range":[1633,1640]},{"text":"button","type":"JSXIdentifier","range":[1641,1647]},{"text":"onClick","type":"JSXIdentifier","range":[1648,1655]},{"text":"reorder","type":"Identifier","range":[1657,1664]},{"text":"style","type":"JSXIdentifier","range":[1666,1671]},{"text":"marginRight","type":"Identifier","range":[1675,1686]},{"text":"5","type":"Numeric","range":[1688,1689]},{"text":"\n        Shuffle\n      ","type":"JSXText","range":[1693,1716]},{"text":"button","type":"JSXIdentifier","range":[1718,1724]},{"text":"\n      ","type":"JSXText","range":[1725,1732]},{"text":"div","type":"JSXIdentifier","range":[1733,1736]},{"text":"\n        ","type":"JSXText","range":[1737,1746]},{"text":"TransitionGroup","type":"JSXIdentifier","range":[1747,1762]},{"text":"name","type":"JSXIdentifier","range":[1763,1767]},{"text":"\"fade\"","type":"JSXText","range":[1768,1774]},{"text":"\n          ","type":"JSXText","range":[1775,1786]},{"text":"numbers","type":"JSXIdentifier","range":[1787,1794]},{"text":"map","type":"JSXIdentifier","range":[1795,1798]},{"text":"n","type":"Identifier","range":[1799,1800]},{"text":"Transition","type":"JSXIdentifier","range":[1819,1829]},{"text":"key","type":"JSXIdentifier","range":[1830,1833]},{"text":"n","type":"JSXIdentifier","range":[1835,1836]},{"text":"index","type":"JSXIdentifier","range":[1837,1842]},{"text":"\n              ","type":"JSXText","range":[1844,1859]},{"text":"ref","type":"Identifier","range":[1863,1866]},{"text":"div","type":"JSXIdentifier","range":[1892,1895]},{"text":"ref","type":"JSXIdentifier","range":[1896,1899]},{"text":"ref","type":"Identifier","range":[1901,1904]},{"text":"style","type":"JSXIdentifier","range":[1906,1911]},{"text":"padding","type":"Identifier","range":[1915,1922]},{"text":"5","type":"Numeric","range":[1924,1925]},{"text":"\n                  ","type":"JSXText","range":[1929,1948]},{"text":"n","type":"JSXIdentifier","range":[1949,1950]},{"text":"value","type":"JSXIdentifier","range":[1951,1956]},{"text":"\n                ","type":"JSXText","range":[1957,1974]},{"text":"div","type":"JSXIdentifier","range":[1976,1979]},{"text":"\n            ","type":"JSXText","range":[1997,2010]},{"text":"Transition","type":"JSXIdentifier","range":[2012,2022]},{"text":"\n        ","type":"JSXText","range":[2037,2046]},{"text":"TransitionGroup","type":"JSXIdentifier","range":[2048,2063]},{"text":"\n      ","type":"JSXText","range":[2064,2071]},{"text":"div","type":"JSXIdentifier","range":[2073,2076]},{"text":"\n    ","type":"JSXText","range":[2077,2082]},{"text":"const","type":"Keyword","range":[2095,2100]},{"text":"makeArr","type":"Identifier","range":[2101,2108]},{"text":"return","type":"Keyword","range":[2121,2127]},{"text":"Array","type":"Identifier","range":[2128,2133]},{"text":"81","type":"Numeric","range":[2134,2136]},{"text":"fill","type":"Identifier","range":[2143,2147]},{"text":"null","type":"Keyword","range":[2148,2152]},{"text":"map","type":"Identifier","range":[2159,2162]},{"text":"_","type":"Identifier","range":[2164,2165]},{"text":"index","type":"Identifier","range":[2167,2172]},{"text":"id","type":"Identifier","range":[2186,2188]},{"text":"\"$\"","type":"String","range":[2190,2193]},{"text":"index","type":"Identifier","range":[2196,2201]},{"text":"number","type":"Identifier","range":[2209,2215]},{"text":"index","type":"Identifier","range":[2218,2223]},{"text":"9","type":"Numeric","range":[2226,2227]},{"text":"1","type":"Numeric","range":[2231,2232]},{"text":"export","type":"Keyword","range":[2247,2253]},{"text":"const","type":"Keyword","range":[2254,2259]},{"text":"Sudoku","type":"Identifier","range":[2260,2266]},{"text":"const","type":"Keyword","range":[2279,2284]},{"text":"numbers","type":"Identifier","range":[2286,2293]},{"text":"setNumbers","type":"Identifier","range":[2295,2305]},{"text":"useState","type":"Identifier","range":[2309,2317]},{"text":"makeArr","type":"Identifier","range":[2324,2331]},{"text":"return","type":"Keyword","range":[2339,2345]},{"text":"\n      ","type":"JSXText","range":[2354,2361]},{"text":"button","type":"JSXIdentifier","range":[2362,2368]},{"text":"onClick","type":"JSXIdentifier","range":[2369,2376]},{"text":"setNumbers","type":"Identifier","range":[2384,2394]},{"text":"v","type":"Identifier","range":[2395,2396]},{"text":"shuffle","type":"Identifier","range":[2400,2407]},{"text":"v","type":"Identifier","range":[2408,2409]},{"text":"shuffle","type":"JSXText","range":[2413,2420]},{"text":"button","type":"JSXIdentifier","range":[2422,2428]},{"text":"\" \"","type":"String","range":[2430,2433]},{"text":"\n      ","type":"JSXText","range":[2434,2441]},{"text":"div","type":"JSXIdentifier","range":[2442,2445]},{"text":"className","type":"JSXIdentifier","range":[2446,2455]},{"text":"\"container\"","type":"JSXText","range":[2456,2467]},{"text":"\n        ","type":"JSXText","range":[2468,2477]},{"text":"TransitionGroup","type":"JSXIdentifier","range":[2478,2493]},{"text":"name","type":"JSXIdentifier","range":[2494,2498]},{"text":"\"cell\"","type":"JSXText","range":[2499,2505]},{"text":"\n          ","type":"JSXText","range":[2506,2517]},{"text":"numbers","type":"JSXIdentifier","range":[2518,2525]},{"text":"map","type":"JSXIdentifier","range":[2526,2529]},{"text":"id","type":"Identifier","range":[2533,2535]},{"text":"number","type":"Identifier","range":[2537,2543]},{"text":"Transition","type":"JSXIdentifier","range":[2565,2575]},{"text":"key","type":"JSXIdentifier","range":[2576,2579]},{"text":"id","type":"Identifier","range":[2581,2583]},{"text":"\n              ","type":"JSXText","range":[2585,2600]},{"text":"ref","type":"Identifier","range":[2604,2607]},{"text":"div","type":"JSXIdentifier","range":[2633,2636]},{"text":"ref","type":"JSXIdentifier","range":[2637,2640]},{"text":"ref","type":"Identifier","range":[2642,2645]},{"text":"className","type":"JSXIdentifier","range":[2647,2656]},{"text":"\"cell\"","type":"JSXText","range":[2657,2663]},{"text":"\n                  ","type":"JSXText","range":[2664,2683]},{"text":"number","type":"Identifier","range":[2684,2690]},{"text":"\n                ","type":"JSXText","range":[2691,2708]},{"text":"div","type":"JSXIdentifier","range":[2710,2713]},{"text":"\n            ","type":"JSXText","range":[2731,2744]},{"text":"Transition","type":"JSXIdentifier","range":[2746,2756]},{"text":"\n        ","type":"JSXText","range":[2771,2780]},{"text":"TransitionGroup","type":"JSXIdentifier","range":[2782,2797]},{"text":"\n      ","type":"JSXText","range":[2798,2805]},{"text":"div","type":"JSXIdentifier","range":[2807,2810]},{"text":"\n    ","type":"JSXText","range":[2811,2816]}]}