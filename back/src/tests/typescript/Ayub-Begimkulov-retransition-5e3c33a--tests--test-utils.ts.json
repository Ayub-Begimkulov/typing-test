{"type":"typescript","text":"import playwright from \"playwright\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createCoverageMap } from \"istanbul-lib-coverage\";\nimport { AnyObject } from \"../src/types\";\n\nexport function setupPlaywright() {\n  let browser: playwright.Browser;\n  let page: playwright.Page;\n\n  beforeEach(async () => {\n    browser = await playwright.chromium.launch();\n    page = await browser.newPage();\n\n    page.on(\"console\", async e => {\n      const type = e.type() as keyof Console;\n      typeof console[type] === \"function\"\n        ? console[type](e.text())\n        : console.log(e.type(), e.text());\n    });\n  });\n\n  afterEach(async () => {\n    await browser.close();\n  });\n\n  if (process.env.COVERAGE === \"true\") {\n    const coverageMap = createCoverageMap({});\n    afterAll(() => {\n      try {\n        const outputFolder = path.resolve(__dirname, \"..\", \"coverage\");\n        if (!fs.existsSync(outputFolder)) {\n          fs.mkdirSync(outputFolder);\n        }\n        fs.writeFileSync(\n          path.resolve(\n            outputFolder,\n            `coverage-${Math.random().toString().slice(2)}.json`\n          ),\n          JSON.stringify(coverageMap)\n        );\n      } catch (e) {\n        console.error(e);\n      }\n    });\n\n    afterEach(async () => {\n      const coverage = await page.evaluate(() => (window as any).__coverage__);\n      coverageMap.merge(coverage);\n    });\n  }\n\n  function text(selector: string) {\n    return page.$eval(selector, node => node.textContent);\n  }\n\n  function value(selector: string) {\n    return page.$eval(selector, node => (node as HTMLInputElement).value);\n  }\n\n  function html(selector: string) {\n    return page.$eval(selector, node => node.innerHTML);\n  }\n\n  function classList(selector: string) {\n    return page.$eval(selector, (node: any) => [...node.classList]);\n  }\n\n  async function isVisible(selector: string) {\n    const display = await page.$eval(selector, node => {\n      return window.getComputedStyle(node).display;\n    });\n    return display !== \"none\";\n  }\n\n  function timeout(time: number) {\n    return page.evaluate(time => {\n      return new Promise(r => {\n        setTimeout(r, time);\n      });\n    }, time);\n  }\n\n  function nextFrame() {\n    return page.evaluate(() => {\n      return new Promise(resolve => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(resolve);\n        });\n      });\n    });\n  }\n  // TODO maybe switch to cypress?\n  // refactor this\n  function makeRender<T extends AnyObject>(\n    fn: (props: T) => JSX.Element,\n    onRender: (res: (val: any) => void) => void\n  ) {\n    return async function (props: T) {\n      // get all passed props\n      const keys = Object.keys(props);\n      const serializableProps: AnyObject = {};\n      // if the value is function expose it as global function\n      // else add it to `serializableProps`\n      const promises = mapEntries(props, (key, value) => {\n        if (typeof value === \"function\") {\n          return page.exposeFunction(key, value);\n        }\n        return void (serializableProps[key] = value);\n      });\n\n      await Promise.all(promises);\n\n      return page.evaluate(\n        ({ fn, onRenderString, serializableProps, keys }) => {\n          const render = new Function(\"return \" + fn)();\n          const onRender = new Function(\"return \" + onRenderString)();\n\n          const w: any = window;\n          const { ReactDOM } = w;\n          const baseElement = document.querySelector(\"#app\")!;\n\n          const propsToPass = keys.reduce((acc: AnyObject, key) => {\n            // if the props isn't in `serializableProps`, then it's\n            // a global function\n            acc[key] = serializableProps.hasOwnProperty(key)\n              ? serializableProps[key]\n              : () => {\n                  w[key]();\n                };\n            return acc;\n          }, {});\n\n          w.lastProps = {\n            ...w.lastProps,\n            ...propsToPass,\n          };\n          return new Promise(res => {\n            ReactDOM.render(render(w.lastProps), baseElement, () =>\n              onRender(res)\n            );\n          });\n        },\n        {\n          fn: fn.toString(),\n          onRenderString: onRender.toString(),\n          serializableProps,\n          keys,\n        }\n      );\n    };\n  }\n\n  return {\n    page: () => page,\n    text,\n    value,\n    html,\n    classList,\n    timeout,\n    nextFrame,\n    makeRender,\n    isVisible,\n  };\n}\n\nfunction mapEntries<T>(\n  obj: AnyObject,\n  cb: (key: string, value: any) => T\n): T[] {\n  return Object.entries(obj).map(([k, v]) => cb(k, v));\n}\n\nexport function omitBy<T extends AnyObject>(\n  obj: T,\n  predicate: (val: T[keyof T], key: keyof T) => boolean\n) {\n  return Object.keys(obj).reduce((acc, c: keyof T) => {\n    if (predicate(obj[c], c)) {\n      acc[c] = obj[c];\n    }\n    return acc;\n  }, {} as T);\n}\n\n// function pickBy<T extends AnyObject>(\n//   obj: T,\n//   predicate: (val: T[keyof T], key: keyof T) => boolean\n// ) {\n//   return omitBy(obj, (val, key) => !predicate(val, key));\n// }\n","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"playwright","type":"Identifier","range":[7,17]},{"text":"from","type":"Identifier","range":[18,22]},{"text":"\"playwright\"","type":"String","range":[23,35]},{"text":"import","type":"Keyword","range":[37,43]},{"text":"fs","type":"Identifier","range":[44,46]},{"text":"from","type":"Identifier","range":[47,51]},{"text":"\"fs\"","type":"String","range":[52,56]},{"text":"import","type":"Keyword","range":[58,64]},{"text":"path","type":"Identifier","range":[65,69]},{"text":"from","type":"Identifier","range":[70,74]},{"text":"\"path\"","type":"String","range":[75,81]},{"text":"import","type":"Keyword","range":[83,89]},{"text":"createCoverageMap","type":"Identifier","range":[92,109]},{"text":"from","type":"Identifier","range":[112,116]},{"text":"\"istanbul-lib-coverage\"","type":"String","range":[117,140]},{"text":"import","type":"Keyword","range":[142,148]},{"text":"AnyObject","type":"Identifier","range":[151,160]},{"text":"from","type":"Identifier","range":[163,167]},{"text":"\"../src/types\"","type":"String","range":[168,182]},{"text":"export","type":"Keyword","range":[185,191]},{"text":"function","type":"Keyword","range":[192,200]},{"text":"setupPlaywright","type":"Identifier","range":[201,216]},{"text":"let","type":"Keyword","range":[223,226]},{"text":"browser","type":"Identifier","range":[227,234]},{"text":"playwright","type":"Identifier","range":[236,246]},{"text":"Browser","type":"Identifier","range":[247,254]},{"text":"let","type":"Keyword","range":[258,261]},{"text":"page","type":"Identifier","range":[262,266]},{"text":"playwright","type":"Identifier","range":[268,278]},{"text":"Page","type":"Identifier","range":[279,283]},{"text":"beforeEach","type":"Identifier","range":[288,298]},{"text":"async","type":"Identifier","range":[299,304]},{"text":"browser","type":"Identifier","range":[317,324]},{"text":"await","type":"Identifier","range":[327,332]},{"text":"playwright","type":"Identifier","range":[333,343]},{"text":"chromium","type":"Identifier","range":[344,352]},{"text":"launch","type":"Identifier","range":[353,359]},{"text":"page","type":"Identifier","range":[367,371]},{"text":"await","type":"Identifier","range":[374,379]},{"text":"browser","type":"Identifier","range":[380,387]},{"text":"newPage","type":"Identifier","range":[388,395]},{"text":"page","type":"Identifier","range":[404,408]},{"text":"on","type":"Identifier","range":[409,411]},{"text":"\"console\"","type":"String","range":[412,421]},{"text":"async","type":"Identifier","range":[423,428]},{"text":"e","type":"Identifier","range":[429,430]},{"text":"const","type":"Keyword","range":[442,447]},{"text":"type","type":"Identifier","range":[448,452]},{"text":"e","type":"Identifier","range":[455,456]},{"text":"type","type":"Identifier","range":[457,461]},{"text":"as","type":"Identifier","range":[464,466]},{"text":"keyof","type":"Identifier","range":[467,472]},{"text":"Console","type":"Identifier","range":[473,480]},{"text":"typeof","type":"Keyword","range":[488,494]},{"text":"console","type":"Identifier","range":[495,502]},{"text":"type","type":"Identifier","range":[503,507]},{"text":"\"function\"","type":"String","range":[513,523]},{"text":"console","type":"Identifier","range":[534,541]},{"text":"type","type":"Identifier","range":[542,546]},{"text":"e","type":"Identifier","range":[548,549]},{"text":"text","type":"Identifier","range":[550,554]},{"text":"console","type":"Identifier","range":[568,575]},{"text":"log","type":"Identifier","range":[576,579]},{"text":"e","type":"Identifier","range":[580,581]},{"text":"type","type":"Identifier","range":[582,586]},{"text":"e","type":"Identifier","range":[590,591]},{"text":"text","type":"Identifier","range":[592,596]},{"text":"afterEach","type":"Identifier","range":[618,627]},{"text":"async","type":"Identifier","range":[628,633]},{"text":"await","type":"Identifier","range":[646,651]},{"text":"browser","type":"Identifier","range":[652,659]},{"text":"close","type":"Identifier","range":[660,665]},{"text":"if","type":"Keyword","range":[678,680]},{"text":"process","type":"Identifier","range":[682,689]},{"text":"env","type":"Identifier","range":[690,693]},{"text":"COVERAGE","type":"Identifier","range":[694,702]},{"text":"\"true\"","type":"String","range":[707,713]},{"text":"const","type":"Keyword","range":[721,726]},{"text":"coverageMap","type":"Identifier","range":[727,738]},{"text":"createCoverageMap","type":"Identifier","range":[741,758]},{"text":"afterAll","type":"Identifier","range":[768,776]},{"text":"try","type":"Keyword","range":[791,794]},{"text":"const","type":"Keyword","range":[805,810]},{"text":"outputFolder","type":"Identifier","range":[811,823]},{"text":"path","type":"Identifier","range":[826,830]},{"text":"resolve","type":"Identifier","range":[831,838]},{"text":"__dirname","type":"Identifier","range":[839,848]},{"text":"\"..\"","type":"String","range":[850,854]},{"text":"\"coverage\"","type":"String","range":[856,866]},{"text":"if","type":"Keyword","range":[877,879]},{"text":"fs","type":"Identifier","range":[882,884]},{"text":"existsSync","type":"Identifier","range":[885,895]},{"text":"outputFolder","type":"Identifier","range":[896,908]},{"text":"fs","type":"Identifier","range":[923,925]},{"text":"mkdirSync","type":"Identifier","range":[926,935]},{"text":"outputFolder","type":"Identifier","range":[936,948]},{"text":"fs","type":"Identifier","range":[969,971]},{"text":"writeFileSync","type":"Identifier","range":[972,985]},{"text":"path","type":"Identifier","range":[997,1001]},{"text":"resolve","type":"Identifier","range":[1002,1009]},{"text":"outputFolder","type":"Identifier","range":[1023,1035]},{"text":"`coverage-${","type":"Template","range":[1049,1061]},{"text":"Math","type":"Identifier","range":[1061,1065]},{"text":"random","type":"Identifier","range":[1066,1072]},{"text":"toString","type":"Identifier","range":[1075,1083]},{"text":"slice","type":"Identifier","range":[1086,1091]},{"text":"2","type":"Numeric","range":[1092,1093]},{"text":"}.json`","type":"Template","range":[1094,1101]},{"text":"JSON","type":"Identifier","range":[1125,1129]},{"text":"stringify","type":"Identifier","range":[1130,1139]},{"text":"coverageMap","type":"Identifier","range":[1140,1151]},{"text":"catch","type":"Keyword","range":[1172,1177]},{"text":"e","type":"Identifier","range":[1179,1180]},{"text":"console","type":"Identifier","range":[1192,1199]},{"text":"error","type":"Identifier","range":[1200,1205]},{"text":"e","type":"Identifier","range":[1206,1207]},{"text":"afterEach","type":"Identifier","range":[1231,1240]},{"text":"async","type":"Identifier","range":[1241,1246]},{"text":"const","type":"Keyword","range":[1261,1266]},{"text":"coverage","type":"Identifier","range":[1267,1275]},{"text":"await","type":"Identifier","range":[1278,1283]},{"text":"page","type":"Identifier","range":[1284,1288]},{"text":"evaluate","type":"Identifier","range":[1289,1297]},{"text":"window","type":"Identifier","range":[1305,1311]},{"text":"as","type":"Identifier","range":[1312,1314]},{"text":"any","type":"Identifier","range":[1315,1318]},{"text":"__coverage__","type":"Identifier","range":[1320,1332]},{"text":"coverageMap","type":"Identifier","range":[1341,1352]},{"text":"merge","type":"Identifier","range":[1353,1358]},{"text":"coverage","type":"Identifier","range":[1359,1367]},{"text":"function","type":"Keyword","range":[1385,1393]},{"text":"text","type":"Identifier","range":[1394,1398]},{"text":"selector","type":"Identifier","range":[1399,1407]},{"text":"string","type":"Identifier","range":[1409,1415]},{"text":"return","type":"Keyword","range":[1423,1429]},{"text":"page","type":"Identifier","range":[1430,1434]},{"text":"$eval","type":"Identifier","range":[1435,1440]},{"text":"selector","type":"Identifier","range":[1441,1449]},{"text":"node","type":"Identifier","range":[1451,1455]},{"text":"node","type":"Identifier","range":[1459,1463]},{"text":"textContent","type":"Identifier","range":[1464,1475]},{"text":"function","type":"Keyword","range":[1485,1493]},{"text":"value","type":"Identifier","range":[1494,1499]},{"text":"selector","type":"Identifier","range":[1500,1508]},{"text":"string","type":"Identifier","range":[1510,1516]},{"text":"return","type":"Keyword","range":[1524,1530]},{"text":"page","type":"Identifier","range":[1531,1535]},{"text":"$eval","type":"Identifier","range":[1536,1541]},{"text":"selector","type":"Identifier","range":[1542,1550]},{"text":"node","type":"Identifier","range":[1552,1556]},{"text":"node","type":"Identifier","range":[1561,1565]},{"text":"as","type":"Identifier","range":[1566,1568]},{"text":"HTMLInputElement","type":"Identifier","range":[1569,1585]},{"text":"value","type":"Identifier","range":[1587,1592]},{"text":"function","type":"Keyword","range":[1602,1610]},{"text":"html","type":"Identifier","range":[1611,1615]},{"text":"selector","type":"Identifier","range":[1616,1624]},{"text":"string","type":"Identifier","range":[1626,1632]},{"text":"return","type":"Keyword","range":[1640,1646]},{"text":"page","type":"Identifier","range":[1647,1651]},{"text":"$eval","type":"Identifier","range":[1652,1657]},{"text":"selector","type":"Identifier","range":[1658,1666]},{"text":"node","type":"Identifier","range":[1668,1672]},{"text":"node","type":"Identifier","range":[1676,1680]},{"text":"innerHTML","type":"Identifier","range":[1681,1690]},{"text":"function","type":"Keyword","range":[1700,1708]},{"text":"classList","type":"Identifier","range":[1709,1718]},{"text":"selector","type":"Identifier","range":[1719,1727]},{"text":"string","type":"Identifier","range":[1729,1735]},{"text":"return","type":"Keyword","range":[1743,1749]},{"text":"page","type":"Identifier","range":[1750,1754]},{"text":"$eval","type":"Identifier","range":[1755,1760]},{"text":"selector","type":"Identifier","range":[1761,1769]},{"text":"node","type":"Identifier","range":[1772,1776]},{"text":"any","type":"Identifier","range":[1778,1781]},{"text":"node","type":"Identifier","range":[1790,1794]},{"text":"classList","type":"Identifier","range":[1795,1804]},{"text":"async","type":"Identifier","range":[1815,1820]},{"text":"function","type":"Keyword","range":[1821,1829]},{"text":"isVisible","type":"Identifier","range":[1830,1839]},{"text":"selector","type":"Identifier","range":[1840,1848]},{"text":"string","type":"Identifier","range":[1850,1856]},{"text":"const","type":"Keyword","range":[1864,1869]},{"text":"display","type":"Identifier","range":[1870,1877]},{"text":"await","type":"Identifier","range":[1880,1885]},{"text":"page","type":"Identifier","range":[1886,1890]},{"text":"$eval","type":"Identifier","range":[1891,1896]},{"text":"selector","type":"Identifier","range":[1897,1905]},{"text":"node","type":"Identifier","range":[1907,1911]},{"text":"return","type":"Keyword","range":[1923,1929]},{"text":"window","type":"Identifier","range":[1930,1936]},{"text":"getComputedStyle","type":"Identifier","range":[1937,1953]},{"text":"node","type":"Identifier","range":[1954,1958]},{"text":"display","type":"Identifier","range":[1960,1967]},{"text":"return","type":"Keyword","range":[1981,1987]},{"text":"display","type":"Identifier","range":[1988,1995]},{"text":"\"none\"","type":"String","range":[2000,2006]},{"text":"function","type":"Keyword","range":[2015,2023]},{"text":"timeout","type":"Identifier","range":[2024,2031]},{"text":"time","type":"Identifier","range":[2032,2036]},{"text":"number","type":"Identifier","range":[2038,2044]},{"text":"return","type":"Keyword","range":[2052,2058]},{"text":"page","type":"Identifier","range":[2059,2063]},{"text":"evaluate","type":"Identifier","range":[2064,2072]},{"text":"time","type":"Identifier","range":[2073,2077]},{"text":"return","type":"Keyword","range":[2089,2095]},{"text":"new","type":"Keyword","range":[2096,2099]},{"text":"Promise","type":"Identifier","range":[2100,2107]},{"text":"r","type":"Identifier","range":[2108,2109]},{"text":"setTimeout","type":"Identifier","range":[2123,2133]},{"text":"r","type":"Identifier","range":[2134,2135]},{"text":"time","type":"Identifier","range":[2137,2141]},{"text":"time","type":"Identifier","range":[2161,2165]},{"text":"function","type":"Keyword","range":[2175,2183]},{"text":"nextFrame","type":"Identifier","range":[2184,2193]},{"text":"return","type":"Keyword","range":[2202,2208]},{"text":"page","type":"Identifier","range":[2209,2213]},{"text":"evaluate","type":"Identifier","range":[2214,2222]},{"text":"return","type":"Keyword","range":[2237,2243]},{"text":"new","type":"Keyword","range":[2244,2247]},{"text":"Promise","type":"Identifier","range":[2248,2255]},{"text":"resolve","type":"Identifier","range":[2256,2263]},{"text":"requestAnimationFrame","type":"Identifier","range":[2277,2298]},{"text":"requestAnimationFrame","type":"Identifier","range":[2317,2338]},{"text":"resolve","type":"Identifier","range":[2339,2346]},{"text":" TODO maybe switch to cypress?","type":"Line","range":[2385,2417]},{"text":" refactor this","type":"Line","range":[2420,2436]},{"text":"function","type":"Keyword","range":[2439,2447]},{"text":"makeRender","type":"Identifier","range":[2448,2458]},{"text":"T","type":"Identifier","range":[2459,2460]},{"text":"extends","type":"Keyword","range":[2461,2468]},{"text":"AnyObject","type":"Identifier","range":[2469,2478]},{"text":"fn","type":"Identifier","range":[2485,2487]},{"text":"props","type":"Identifier","range":[2490,2495]},{"text":"T","type":"Identifier","range":[2497,2498]},{"text":"JSX","type":"Identifier","range":[2503,2506]},{"text":"Element","type":"Identifier","range":[2507,2514]},{"text":"onRender","type":"Identifier","range":[2520,2528]},{"text":"res","type":"Identifier","range":[2531,2534]},{"text":"val","type":"Identifier","range":[2537,2540]},{"text":"any","type":"Identifier","range":[2542,2545]},{"text":"void","type":"Keyword","range":[2550,2554]},{"text":"void","type":"Keyword","range":[2559,2563]},{"text":"return","type":"Keyword","range":[2574,2580]},{"text":"async","type":"Identifier","range":[2581,2586]},{"text":"function","type":"Keyword","range":[2587,2595]},{"text":"props","type":"Identifier","range":[2597,2602]},{"text":"T","type":"Identifier","range":[2604,2605]},{"text":" get all passed props","type":"Line","range":[2615,2638]},{"text":"const","type":"Keyword","range":[2645,2650]},{"text":"keys","type":"Identifier","range":[2651,2655]},{"text":"Object","type":"Identifier","range":[2658,2664]},{"text":"keys","type":"Identifier","range":[2665,2669]},{"text":"props","type":"Identifier","range":[2670,2675]},{"text":"const","type":"Keyword","range":[2684,2689]},{"text":"serializableProps","type":"Identifier","range":[2690,2707]},{"text":"AnyObject","type":"Identifier","range":[2709,2718]},{"text":" if the value is function expose it as global function","type":"Line","range":[2731,2787]},{"text":" else add it to `serializableProps`","type":"Line","range":[2794,2831]},{"text":"const","type":"Keyword","range":[2838,2843]},{"text":"promises","type":"Identifier","range":[2844,2852]},{"text":"mapEntries","type":"Identifier","range":[2855,2865]},{"text":"props","type":"Identifier","range":[2866,2871]},{"text":"key","type":"Identifier","range":[2874,2877]},{"text":"value","type":"Identifier","range":[2879,2884]},{"text":"if","type":"Keyword","range":[2899,2901]},{"text":"typeof","type":"Keyword","range":[2903,2909]},{"text":"value","type":"Identifier","range":[2910,2915]},{"text":"\"function\"","type":"String","range":[2920,2930]},{"text":"return","type":"Keyword","range":[2944,2950]},{"text":"page","type":"Identifier","range":[2951,2955]},{"text":"exposeFunction","type":"Identifier","range":[2956,2970]},{"text":"key","type":"Identifier","range":[2971,2974]},{"text":"value","type":"Identifier","range":[2976,2981]},{"text":"return","type":"Keyword","range":[3002,3008]},{"text":"void","type":"Keyword","range":[3009,3013]},{"text":"serializableProps","type":"Identifier","range":[3015,3032]},{"text":"key","type":"Identifier","range":[3033,3036]},{"text":"value","type":"Identifier","range":[3040,3045]},{"text":"await","type":"Identifier","range":[3065,3070]},{"text":"Promise","type":"Identifier","range":[3071,3078]},{"text":"all","type":"Identifier","range":[3079,3082]},{"text":"promises","type":"Identifier","range":[3083,3091]},{"text":"return","type":"Keyword","range":[3101,3107]},{"text":"page","type":"Identifier","range":[3108,3112]},{"text":"evaluate","type":"Identifier","range":[3113,3121]},{"text":"fn","type":"Identifier","range":[3134,3136]},{"text":"onRenderString","type":"Identifier","range":[3138,3152]},{"text":"serializableProps","type":"Identifier","range":[3154,3171]},{"text":"keys","type":"Identifier","range":[3173,3177]},{"text":"const","type":"Keyword","range":[3196,3201]},{"text":"render","type":"Identifier","range":[3202,3208]},{"text":"new","type":"Keyword","range":[3211,3214]},{"text":"Function","type":"Identifier","range":[3215,3223]},{"text":"\"return \"","type":"String","range":[3224,3233]},{"text":"fn","type":"Identifier","range":[3236,3238]},{"text":"const","type":"Keyword","range":[3253,3258]},{"text":"onRender","type":"Identifier","range":[3259,3267]},{"text":"new","type":"Keyword","range":[3270,3273]},{"text":"Function","type":"Identifier","range":[3274,3282]},{"text":"\"return \"","type":"String","range":[3283,3292]},{"text":"onRenderString","type":"Identifier","range":[3295,3309]},{"text":"const","type":"Keyword","range":[3325,3330]},{"text":"w","type":"Identifier","range":[3331,3332]},{"text":"any","type":"Identifier","range":[3334,3337]},{"text":"window","type":"Identifier","range":[3340,3346]},{"text":"const","type":"Keyword","range":[3358,3363]},{"text":"ReactDOM","type":"Identifier","range":[3366,3374]},{"text":"w","type":"Identifier","range":[3379,3380]},{"text":"const","type":"Keyword","range":[3392,3397]},{"text":"baseElement","type":"Identifier","range":[3398,3409]},{"text":"document","type":"Identifier","range":[3412,3420]},{"text":"querySelector","type":"Identifier","range":[3421,3434]},{"text":"\"#app\"","type":"String","range":[3435,3441]},{"text":"const","type":"Keyword","range":[3456,3461]},{"text":"propsToPass","type":"Identifier","range":[3462,3473]},{"text":"keys","type":"Identifier","range":[3476,3480]},{"text":"reduce","type":"Identifier","range":[3481,3487]},{"text":"acc","type":"Identifier","range":[3489,3492]},{"text":"AnyObject","type":"Identifier","range":[3494,3503]},{"text":"key","type":"Identifier","range":[3505,3508]},{"text":" if the props isn't in `serializableProps`, then it's","type":"Line","range":[3527,3582]},{"text":" a global function","type":"Line","range":[3595,3615]},{"text":"acc","type":"Identifier","range":[3628,3631]},{"text":"key","type":"Identifier","range":[3632,3635]},{"text":"serializableProps","type":"Identifier","range":[3639,3656]},{"text":"hasOwnProperty","type":"Identifier","range":[3657,3671]},{"text":"key","type":"Identifier","range":[3672,3675]},{"text":"serializableProps","type":"Identifier","range":[3693,3710]},{"text":"key","type":"Identifier","range":[3711,3714]},{"text":"w","type":"Identifier","range":[3758,3759]},{"text":"key","type":"Identifier","range":[3760,3763]},{"text":"return","type":"Keyword","range":[3799,3805]},{"text":"acc","type":"Identifier","range":[3806,3809]},{"text":"w","type":"Identifier","range":[3840,3841]},{"text":"lastProps","type":"Identifier","range":[3842,3851]},{"text":"w","type":"Identifier","range":[3871,3872]},{"text":"lastProps","type":"Identifier","range":[3873,3882]},{"text":"propsToPass","type":"Identifier","range":[3899,3910]},{"text":"return","type":"Keyword","range":[3935,3941]},{"text":"new","type":"Keyword","range":[3942,3945]},{"text":"Promise","type":"Identifier","range":[3946,3953]},{"text":"res","type":"Identifier","range":[3954,3957]},{"text":"ReactDOM","type":"Identifier","range":[3975,3983]},{"text":"render","type":"Identifier","range":[3984,3990]},{"text":"render","type":"Identifier","range":[3991,3997]},{"text":"w","type":"Identifier","range":[3998,3999]},{"text":"lastProps","type":"Identifier","range":[4000,4009]},{"text":"baseElement","type":"Identifier","range":[4012,4023]},{"text":"onRender","type":"Identifier","range":[4045,4053]},{"text":"res","type":"Identifier","range":[4054,4057]},{"text":"fn","type":"Identifier","range":[4119,4121]},{"text":"fn","type":"Identifier","range":[4123,4125]},{"text":"toString","type":"Identifier","range":[4126,4134]},{"text":"onRenderString","type":"Identifier","range":[4148,4162]},{"text":"onRender","type":"Identifier","range":[4164,4172]},{"text":"toString","type":"Identifier","range":[4173,4181]},{"text":"serializableProps","type":"Identifier","range":[4195,4212]},{"text":"keys","type":"Identifier","range":[4224,4228]},{"text":"return","type":"Keyword","range":[4263,4269]},{"text":"page","type":"Identifier","range":[4276,4280]},{"text":"page","type":"Identifier","range":[4288,4292]},{"text":"text","type":"Identifier","range":[4298,4302]},{"text":"value","type":"Identifier","range":[4308,4313]},{"text":"html","type":"Identifier","range":[4319,4323]},{"text":"classList","type":"Identifier","range":[4329,4338]},{"text":"timeout","type":"Identifier","range":[4344,4351]},{"text":"nextFrame","type":"Identifier","range":[4357,4366]},{"text":"makeRender","type":"Identifier","range":[4372,4382]},{"text":"isVisible","type":"Identifier","range":[4388,4397]},{"text":"function","type":"Keyword","range":[4407,4415]},{"text":"mapEntries","type":"Identifier","range":[4416,4426]},{"text":"T","type":"Identifier","range":[4427,4428]},{"text":"obj","type":"Identifier","range":[4433,4436]},{"text":"AnyObject","type":"Identifier","range":[4438,4447]},{"text":"cb","type":"Identifier","range":[4451,4453]},{"text":"key","type":"Identifier","range":[4456,4459]},{"text":"string","type":"Identifier","range":[4461,4467]},{"text":"value","type":"Identifier","range":[4469,4474]},{"text":"any","type":"Identifier","range":[4476,4479]},{"text":"T","type":"Identifier","range":[4484,4485]},{"text":"T","type":"Identifier","range":[4489,4490]},{"text":"return","type":"Keyword","range":[4497,4503]},{"text":"Object","type":"Identifier","range":[4504,4510]},{"text":"entries","type":"Identifier","range":[4511,4518]},{"text":"obj","type":"Identifier","range":[4519,4522]},{"text":"map","type":"Identifier","range":[4524,4527]},{"text":"k","type":"Identifier","range":[4530,4531]},{"text":"v","type":"Identifier","range":[4533,4534]},{"text":"cb","type":"Identifier","range":[4540,4542]},{"text":"k","type":"Identifier","range":[4543,4544]},{"text":"v","type":"Identifier","range":[4546,4547]},{"text":"export","type":"Keyword","range":[4554,4560]},{"text":"function","type":"Keyword","range":[4561,4569]},{"text":"omitBy","type":"Identifier","range":[4570,4576]},{"text":"T","type":"Identifier","range":[4577,4578]},{"text":"extends","type":"Keyword","range":[4579,4586]},{"text":"AnyObject","type":"Identifier","range":[4587,4596]},{"text":"obj","type":"Identifier","range":[4601,4604]},{"text":"T","type":"Identifier","range":[4606,4607]},{"text":"predicate","type":"Identifier","range":[4611,4620]},{"text":"val","type":"Identifier","range":[4623,4626]},{"text":"T","type":"Identifier","range":[4628,4629]},{"text":"keyof","type":"Identifier","range":[4630,4635]},{"text":"T","type":"Identifier","range":[4636,4637]},{"text":"key","type":"Identifier","range":[4640,4643]},{"text":"keyof","type":"Identifier","range":[4645,4650]},{"text":"T","type":"Identifier","range":[4651,4652]},{"text":"boolean","type":"Identifier","range":[4657,4664]},{"text":"return","type":"Keyword","range":[4671,4677]},{"text":"Object","type":"Identifier","range":[4678,4684]},{"text":"keys","type":"Identifier","range":[4685,4689]},{"text":"obj","type":"Identifier","range":[4690,4693]},{"text":"reduce","type":"Identifier","range":[4695,4701]},{"text":"acc","type":"Identifier","range":[4703,4706]},{"text":"c","type":"Identifier","range":[4708,4709]},{"text":"keyof","type":"Identifier","range":[4711,4716]},{"text":"T","type":"Identifier","range":[4717,4718]},{"text":"if","type":"Keyword","range":[4729,4731]},{"text":"predicate","type":"Identifier","range":[4733,4742]},{"text":"obj","type":"Identifier","range":[4743,4746]},{"text":"c","type":"Identifier","range":[4747,4748]},{"text":"c","type":"Identifier","range":[4751,4752]},{"text":"acc","type":"Identifier","range":[4763,4766]},{"text":"c","type":"Identifier","range":[4767,4768]},{"text":"obj","type":"Identifier","range":[4772,4775]},{"text":"c","type":"Identifier","range":[4776,4777]},{"text":"return","type":"Keyword","range":[4790,4796]},{"text":"acc","type":"Identifier","range":[4797,4800]},{"text":"as","type":"Identifier","range":[4810,4812]},{"text":"T","type":"Identifier","range":[4813,4814]},{"text":" function pickBy<T extends AnyObject>(","type":"Line","range":[4820,4860]},{"text":"   obj: T,","type":"Line","range":[4861,4873]},{"text":"   predicate: (val: T[keyof T], key: keyof T) => boolean","type":"Line","range":[4874,4932]},{"text":" ) {","type":"Line","range":[4933,4939]},{"text":"   return omitBy(obj, (val, key) => !predicate(val, key));","type":"Line","range":[4940,5000]},{"text":" }","type":"Line","range":[5001,5005]}]}