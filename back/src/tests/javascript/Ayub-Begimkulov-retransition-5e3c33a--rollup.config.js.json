{"type":"javascript","text":"import path from \"path\";\nimport typescript from \"rollup-plugin-typescript2\";\nimport replace from \"@rollup/plugin-replace\";\nimport { terser } from \"rollup-plugin-terser\";\nimport { sizeSnapshot } from \"rollup-plugin-size-snapshot\";\n\nconst isTesting = process.env.TESTING === \"true\";\n\nconst umdOptions = {\n  name: \"Retransition\",\n  globals: {\n    react: \"React\",\n  },\n};\n\nfunction createRollupConfig(outputDir, tsOptions, env, formats = {}) {\n  const { umd, cjs, es } = formats;\n  return {\n    input: \"src/index.ts\",\n    plugins: [\n      typescript(tsOptions),\n      replace({\n        \"process.env.NODE_ENV\": JSON.stringify(env),\n        \"process.env.TESTING\": JSON.stringify(isTesting),\n      }),\n      !isTesting && sizeSnapshot(),\n      !isTesting && terser(),\n    ].filter(Boolean),\n    external: [\"react\"],\n    output: [\n      cjs && {\n        file: path.resolve(outputDir, `index.${env}.js`),\n        format: \"cjs\",\n      },\n      es && {\n        file: path.resolve(outputDir, \"index.es.js\"),\n        format: \"es\",\n      },\n      umd && {\n        file: path.resolve(outputDir, \"index.umd.js\"),\n        format: \"umd\",\n        ...umdOptions,\n        sourcemap: isTesting ? \"inline\" : undefined,\n      },\n    ].filter(Boolean),\n  };\n}\n\nconst distDir = path.resolve(__dirname, \"dist\");\nconst ie11Dir = path.resolve(__dirname, \"dist\", \"ie11\");\nconst testDir = path.resolve(__dirname, \"tests\");\n\nexport default isTesting\n  ? createRollupConfig(\n      testDir,\n      {\n        tsconfigOverride: {\n          compilerOptions: {\n            // throws error about declarationDir\n            declaration: false,\n            sourceMap: true,\n            inlineSourceMap: true,\n            inlineSources: true,\n            removeComments: false,\n          },\n        },\n      },\n      \"production\",\n      { umd: true }\n    )\n  : [\n      createRollupConfig(distDir, undefined, \"production\", {\n        es: true,\n        umd: true,\n        cjs: true,\n      }),\n      createRollupConfig(distDir, undefined, \"development\", { cjs: true }),\n      createRollupConfig(\n        ie11Dir,\n        { tsconfig: \"tsconfig.ie11.json\" },\n        \"production\",\n        { es: true, umd: true, cjs: true }\n      ),\n      createRollupConfig(ie11Dir, undefined, \"development\", { cjs: true }),\n    ];","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"path","type":"Identifier","range":[7,11]},{"text":"from","type":"Identifier","range":[12,16]},{"text":"\"path\"","type":"String","range":[17,23]},{"text":"import","type":"Keyword","range":[25,31]},{"text":"typescript","type":"Identifier","range":[32,42]},{"text":"from","type":"Identifier","range":[43,47]},{"text":"\"rollup-plugin-typescript2\"","type":"String","range":[48,75]},{"text":"import","type":"Keyword","range":[77,83]},{"text":"replace","type":"Identifier","range":[84,91]},{"text":"from","type":"Identifier","range":[92,96]},{"text":"\"@rollup/plugin-replace\"","type":"String","range":[97,121]},{"text":"import","type":"Keyword","range":[123,129]},{"text":"terser","type":"Identifier","range":[132,138]},{"text":"from","type":"Identifier","range":[141,145]},{"text":"\"rollup-plugin-terser\"","type":"String","range":[146,168]},{"text":"import","type":"Keyword","range":[170,176]},{"text":"sizeSnapshot","type":"Identifier","range":[179,191]},{"text":"from","type":"Identifier","range":[194,198]},{"text":"\"rollup-plugin-size-snapshot\"","type":"String","range":[199,228]},{"text":"const","type":"Keyword","range":[231,236]},{"text":"isTesting","type":"Identifier","range":[237,246]},{"text":"process","type":"Identifier","range":[249,256]},{"text":"env","type":"Identifier","range":[257,260]},{"text":"TESTING","type":"Identifier","range":[261,268]},{"text":"\"true\"","type":"String","range":[273,279]},{"text":"const","type":"Keyword","range":[282,287]},{"text":"umdOptions","type":"Identifier","range":[288,298]},{"text":"name","type":"Identifier","range":[305,309]},{"text":"\"Retransition\"","type":"String","range":[311,325]},{"text":"globals","type":"Identifier","range":[329,336]},{"text":"react","type":"Identifier","range":[344,349]},{"text":"\"React\"","type":"String","range":[351,358]},{"text":"function","type":"Keyword","range":[369,377]},{"text":"createRollupConfig","type":"Identifier","range":[378,396]},{"text":"outputDir","type":"Identifier","range":[397,406]},{"text":"tsOptions","type":"Identifier","range":[408,417]},{"text":"env","type":"Identifier","range":[419,422]},{"text":"formats","type":"Identifier","range":[424,431]},{"text":"const","type":"Keyword","range":[442,447]},{"text":"umd","type":"Identifier","range":[450,453]},{"text":"cjs","type":"Identifier","range":[455,458]},{"text":"es","type":"Identifier","range":[460,462]},{"text":"formats","type":"Identifier","range":[467,474]},{"text":"return","type":"Keyword","range":[478,484]},{"text":"input","type":"Identifier","range":[491,496]},{"text":"\"src/index.ts\"","type":"String","range":[498,512]},{"text":"plugins","type":"Identifier","range":[518,525]},{"text":"typescript","type":"Identifier","range":[535,545]},{"text":"tsOptions","type":"Identifier","range":[546,555]},{"text":"replace","type":"Identifier","range":[564,571]},{"text":"\"process.env.NODE_ENV\"","type":"String","range":[582,604]},{"text":"JSON","type":"Identifier","range":[606,610]},{"text":"stringify","type":"Identifier","range":[611,620]},{"text":"env","type":"Identifier","range":[621,624]},{"text":"\"process.env.TESTING\"","type":"String","range":[635,656]},{"text":"JSON","type":"Identifier","range":[658,662]},{"text":"stringify","type":"Identifier","range":[663,672]},{"text":"isTesting","type":"Identifier","range":[673,682]},{"text":"isTesting","type":"Identifier","range":[702,711]},{"text":"sizeSnapshot","type":"Identifier","range":[715,727]},{"text":"isTesting","type":"Identifier","range":[738,747]},{"text":"terser","type":"Identifier","range":[751,757]},{"text":"filter","type":"Identifier","range":[767,773]},{"text":"Boolean","type":"Identifier","range":[774,781]},{"text":"external","type":"Identifier","range":[788,796]},{"text":"\"react\"","type":"String","range":[799,806]},{"text":"output","type":"Identifier","range":[813,819]},{"text":"cjs","type":"Identifier","range":[829,832]},{"text":"file","type":"Identifier","range":[846,850]},{"text":"path","type":"Identifier","range":[852,856]},{"text":"resolve","type":"Identifier","range":[857,864]},{"text":"outputDir","type":"Identifier","range":[865,874]},{"text":"`index.${","type":"Template","range":[876,885]},{"text":"env","type":"Identifier","range":[885,888]},{"text":"}.js`","type":"Template","range":[888,893]},{"text":"format","type":"Identifier","range":[904,910]},{"text":"\"cjs\"","type":"String","range":[912,917]},{"text":"es","type":"Identifier","range":[934,936]},{"text":"file","type":"Identifier","range":[950,954]},{"text":"path","type":"Identifier","range":[956,960]},{"text":"resolve","type":"Identifier","range":[961,968]},{"text":"outputDir","type":"Identifier","range":[969,978]},{"text":"\"index.es.js\"","type":"String","range":[980,993]},{"text":"format","type":"Identifier","range":[1004,1010]},{"text":"\"es\"","type":"String","range":[1012,1016]},{"text":"umd","type":"Identifier","range":[1033,1036]},{"text":"file","type":"Identifier","range":[1050,1054]},{"text":"path","type":"Identifier","range":[1056,1060]},{"text":"resolve","type":"Identifier","range":[1061,1068]},{"text":"outputDir","type":"Identifier","range":[1069,1078]},{"text":"\"index.umd.js\"","type":"String","range":[1080,1094]},{"text":"format","type":"Identifier","range":[1105,1111]},{"text":"\"umd\"","type":"String","range":[1113,1118]},{"text":"umdOptions","type":"Identifier","range":[1131,1141]},{"text":"sourcemap","type":"Identifier","range":[1151,1160]},{"text":"isTesting","type":"Identifier","range":[1162,1171]},{"text":"\"inline\"","type":"String","range":[1174,1182]},{"text":"undefined","type":"Identifier","range":[1185,1194]},{"text":"filter","type":"Identifier","range":[1211,1217]},{"text":"Boolean","type":"Identifier","range":[1218,1225]},{"text":"const","type":"Keyword","range":[1236,1241]},{"text":"distDir","type":"Identifier","range":[1242,1249]},{"text":"path","type":"Identifier","range":[1252,1256]},{"text":"resolve","type":"Identifier","range":[1257,1264]},{"text":"__dirname","type":"Identifier","range":[1265,1274]},{"text":"\"dist\"","type":"String","range":[1276,1282]},{"text":"const","type":"Keyword","range":[1285,1290]},{"text":"ie11Dir","type":"Identifier","range":[1291,1298]},{"text":"path","type":"Identifier","range":[1301,1305]},{"text":"resolve","type":"Identifier","range":[1306,1313]},{"text":"__dirname","type":"Identifier","range":[1314,1323]},{"text":"\"dist\"","type":"String","range":[1325,1331]},{"text":"\"ie11\"","type":"String","range":[1333,1339]},{"text":"const","type":"Keyword","range":[1342,1347]},{"text":"testDir","type":"Identifier","range":[1348,1355]},{"text":"path","type":"Identifier","range":[1358,1362]},{"text":"resolve","type":"Identifier","range":[1363,1370]},{"text":"__dirname","type":"Identifier","range":[1371,1380]},{"text":"\"tests\"","type":"String","range":[1382,1389]},{"text":"export","type":"Keyword","range":[1393,1399]},{"text":"default","type":"Keyword","range":[1400,1407]},{"text":"isTesting","type":"Identifier","range":[1408,1417]},{"text":"createRollupConfig","type":"Identifier","range":[1422,1440]},{"text":"testDir","type":"Identifier","range":[1448,1455]},{"text":"tsconfigOverride","type":"Identifier","range":[1473,1489]},{"text":"compilerOptions","type":"Identifier","range":[1503,1518]},{"text":" throws error about declarationDir","type":"Line","range":[1534,1570]},{"text":"declaration","type":"Identifier","range":[1583,1594]},{"text":"false","type":"Boolean","range":[1596,1601]},{"text":"sourceMap","type":"Identifier","range":[1615,1624]},{"text":"true","type":"Boolean","range":[1626,1630]},{"text":"inlineSourceMap","type":"Identifier","range":[1644,1659]},{"text":"true","type":"Boolean","range":[1661,1665]},{"text":"inlineSources","type":"Identifier","range":[1679,1692]},{"text":"true","type":"Boolean","range":[1694,1698]},{"text":"removeComments","type":"Identifier","range":[1712,1726]},{"text":"false","type":"Boolean","range":[1728,1733]},{"text":"\"production\"","type":"String","range":[1774,1786]},{"text":"umd","type":"Identifier","range":[1796,1799]},{"text":"true","type":"Boolean","range":[1801,1805]},{"text":"createRollupConfig","type":"Identifier","range":[1826,1844]},{"text":"distDir","type":"Identifier","range":[1845,1852]},{"text":"undefined","type":"Identifier","range":[1854,1863]},{"text":"\"production\"","type":"String","range":[1865,1877]},{"text":"es","type":"Identifier","range":[1889,1891]},{"text":"true","type":"Boolean","range":[1893,1897]},{"text":"umd","type":"Identifier","range":[1907,1910]},{"text":"true","type":"Boolean","range":[1912,1916]},{"text":"cjs","type":"Identifier","range":[1926,1929]},{"text":"true","type":"Boolean","range":[1931,1935]},{"text":"createRollupConfig","type":"Identifier","range":[1953,1971]},{"text":"distDir","type":"Identifier","range":[1972,1979]},{"text":"undefined","type":"Identifier","range":[1981,1990]},{"text":"\"development\"","type":"String","range":[1992,2005]},{"text":"cjs","type":"Identifier","range":[2009,2012]},{"text":"true","type":"Boolean","range":[2014,2018]},{"text":"createRollupConfig","type":"Identifier","range":[2029,2047]},{"text":"ie11Dir","type":"Identifier","range":[2057,2064]},{"text":"tsconfig","type":"Identifier","range":[2076,2084]},{"text":"\"tsconfig.ie11.json\"","type":"String","range":[2086,2106]},{"text":"\"production\"","type":"String","range":[2118,2130]},{"text":"es","type":"Identifier","range":[2142,2144]},{"text":"true","type":"Boolean","range":[2146,2150]},{"text":"umd","type":"Identifier","range":[2152,2155]},{"text":"true","type":"Boolean","range":[2157,2161]},{"text":"cjs","type":"Identifier","range":[2163,2166]},{"text":"true","type":"Boolean","range":[2168,2172]},{"text":"createRollupConfig","type":"Identifier","range":[2190,2208]},{"text":"ie11Dir","type":"Identifier","range":[2209,2216]},{"text":"undefined","type":"Identifier","range":[2218,2227]},{"text":"\"development\"","type":"String","range":[2229,2242]},{"text":"cjs","type":"Identifier","range":[2246,2249]},{"text":"true","type":"Boolean","range":[2251,2255]}]}