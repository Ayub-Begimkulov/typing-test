{"type":"javascript","text":"import { useState, useEffect } from 'react';\nimport { useLatest } from './use-latest';\nimport { useCombinedRef } from './use-combined-ref';\n\nexport function useMutationObserver(cb, options) {\n  const [element, setElement] = useState(null);\n  const latestCb = useLatest(cb);\n\n  useEffect(() => {\n    if (!element) return;\n\n    const observer = new MutationObserver((...args) => {\n      latestCb.current(...args);\n    });\n\n    observer.observe(element, options);\n\n    return () => observer.disconnect();\n  }, [element, latestCb, options]);\n\n  return setElement;\n}\n\nexport function MutationObserverComponent({\n  children,\n  onMutation,\n  options,\n  nodeRef,\n}) {\n  const mutationRef = useMutationObserver(onMutation, options);\n\n  const combinedRef = useCombinedRef(nodeRef, mutationRef);\n\n  return children(combinedRef);\n}","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"useState","type":"Identifier","range":[9,17]},{"text":"useEffect","type":"Identifier","range":[19,28]},{"text":"from","type":"Identifier","range":[31,35]},{"text":"'react'","type":"String","range":[36,43]},{"text":"import","type":"Keyword","range":[45,51]},{"text":"useLatest","type":"Identifier","range":[54,63]},{"text":"from","type":"Identifier","range":[66,70]},{"text":"'./use-latest'","type":"String","range":[71,85]},{"text":"import","type":"Keyword","range":[87,93]},{"text":"useCombinedRef","type":"Identifier","range":[96,110]},{"text":"from","type":"Identifier","range":[113,117]},{"text":"'./use-combined-ref'","type":"String","range":[118,138]},{"text":"export","type":"Keyword","range":[141,147]},{"text":"function","type":"Keyword","range":[148,156]},{"text":"useMutationObserver","type":"Identifier","range":[157,176]},{"text":"cb","type":"Identifier","range":[177,179]},{"text":"options","type":"Identifier","range":[181,188]},{"text":"const","type":"Keyword","range":[194,199]},{"text":"element","type":"Identifier","range":[201,208]},{"text":"setElement","type":"Identifier","range":[210,220]},{"text":"useState","type":"Identifier","range":[224,232]},{"text":"null","type":"Keyword","range":[233,237]},{"text":"const","type":"Keyword","range":[242,247]},{"text":"latestCb","type":"Identifier","range":[248,256]},{"text":"useLatest","type":"Identifier","range":[259,268]},{"text":"cb","type":"Identifier","range":[269,271]},{"text":"useEffect","type":"Identifier","range":[277,286]},{"text":"if","type":"Keyword","range":[299,301]},{"text":"element","type":"Identifier","range":[304,311]},{"text":"return","type":"Keyword","range":[313,319]},{"text":"const","type":"Keyword","range":[326,331]},{"text":"observer","type":"Identifier","range":[332,340]},{"text":"new","type":"Keyword","range":[343,346]},{"text":"MutationObserver","type":"Identifier","range":[347,363]},{"text":"args","type":"Identifier","range":[368,372]},{"text":"latestCb","type":"Identifier","range":[385,393]},{"text":"current","type":"Identifier","range":[394,401]},{"text":"args","type":"Identifier","range":[405,409]},{"text":"observer","type":"Identifier","range":[425,433]},{"text":"observe","type":"Identifier","range":[434,441]},{"text":"element","type":"Identifier","range":[442,449]},{"text":"options","type":"Identifier","range":[451,458]},{"text":"return","type":"Keyword","range":[466,472]},{"text":"observer","type":"Identifier","range":[479,487]},{"text":"disconnect","type":"Identifier","range":[488,498]},{"text":"element","type":"Identifier","range":[508,515]},{"text":"latestCb","type":"Identifier","range":[517,525]},{"text":"options","type":"Identifier","range":[527,534]},{"text":"return","type":"Keyword","range":[541,547]},{"text":"setElement","type":"Identifier","range":[548,558]},{"text":"export","type":"Keyword","range":[563,569]},{"text":"function","type":"Keyword","range":[570,578]},{"text":"MutationObserverComponent","type":"Identifier","range":[579,604]},{"text":"children","type":"Identifier","range":[609,617]},{"text":"onMutation","type":"Identifier","range":[621,631]},{"text":"options","type":"Identifier","range":[635,642]},{"text":"nodeRef","type":"Identifier","range":[646,653]},{"text":"const","type":"Keyword","range":[662,667]},{"text":"mutationRef","type":"Identifier","range":[668,679]},{"text":"useMutationObserver","type":"Identifier","range":[682,701]},{"text":"onMutation","type":"Identifier","range":[702,712]},{"text":"options","type":"Identifier","range":[714,721]},{"text":"const","type":"Keyword","range":[727,732]},{"text":"combinedRef","type":"Identifier","range":[733,744]},{"text":"useCombinedRef","type":"Identifier","range":[747,761]},{"text":"nodeRef","type":"Identifier","range":[762,769]},{"text":"mutationRef","type":"Identifier","range":[771,782]},{"text":"return","type":"Keyword","range":[788,794]},{"text":"children","type":"Identifier","range":[795,803]},{"text":"combinedRef","type":"Identifier","range":[804,815]}]}