{"type":"typescript-jsx","text":"import { Children, useMemo } from 'react';\nimport { CollapseProvider, useCollapseItem } from './Collapse.context';\n\nexport interface CollapseProps {\n  openedItems: string[];\n  onChange: (openedItems: string[]) => void;\n  children: React.ReactElement[];\n  mode?: 'default' | 'accordion';\n}\n\nexport const ACCORDION_MODE_ERROR =\n  '<Collapse /> can only accept 1 opened item in `accordion` mode';\n\nexport function Collapse({\n  openedItems,\n  onChange,\n  children,\n  mode = 'default',\n}: CollapseProps) {\n  const childrenArray = Children.toArray(children);\n\n  const openedItemsSet = useMemo(() => {\n    if (mode === 'accordion' && openedItems.length > 1) {\n      console.warn(ACCORDION_MODE_ERROR);\n\n      return new Set(openedItems.slice(0, 1));\n    }\n\n    return new Set(openedItems);\n  }, [openedItems]);\n\n  const onHeaderClick = (name: string) => {\n    const isOpened = openedItemsSet.has(name);\n\n    if (mode === 'default') {\n      const newOpenedItems = isOpened\n        ? openedItems.filter(item => item !== name)\n        : [...openedItems, name];\n\n      onChange(newOpenedItems);\n\n      return;\n    }\n\n    onChange(isOpened ? [] : [name]);\n  };\n\n  return (\n    <CollapseProvider value={{ openedItems: openedItemsSet, onHeaderClick }}>\n      {childrenArray}\n    </CollapseProvider>\n  );\n}\n\ninterface CollapseItemChildrenProps {\n  headerProps: CollapseItemChildrenHeaderProps;\n  contentVisible: boolean;\n}\n\ninterface CollapseItemChildrenHeaderProps {\n  onClick: React.MouseEventHandler;\n}\n\ninterface CollapseItemProps {\n  name: string;\n  children: (props: CollapseItemChildrenProps) => React.ReactElement;\n}\n\nexport function CollapseItem({ name, children }: CollapseItemProps) {\n  const { isOpened, onHeaderClick } = useCollapseItem(name);\n\n  return children({\n    headerProps: { onClick: () => onHeaderClick(name) },\n    contentVisible: isOpened,\n  });\n}","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"Children","type":"Identifier","range":[9,17]},{"text":"useMemo","type":"Identifier","range":[19,26]},{"text":"from","type":"Identifier","range":[29,33]},{"text":"'react'","type":"String","range":[34,41]},{"text":"import","type":"Keyword","range":[43,49]},{"text":"CollapseProvider","type":"Identifier","range":[52,68]},{"text":"useCollapseItem","type":"Identifier","range":[70,85]},{"text":"from","type":"Identifier","range":[88,92]},{"text":"'./Collapse.context'","type":"String","range":[93,113]},{"text":"export","type":"Keyword","range":[116,122]},{"text":"interface","type":"Keyword","range":[123,132]},{"text":"CollapseProps","type":"Identifier","range":[133,146]},{"text":"openedItems","type":"Identifier","range":[151,162]},{"text":"string","type":"Identifier","range":[164,170]},{"text":"onChange","type":"Identifier","range":[176,184]},{"text":"openedItems","type":"Identifier","range":[187,198]},{"text":"string","type":"Identifier","range":[200,206]},{"text":"void","type":"Keyword","range":[213,217]},{"text":"children","type":"Identifier","range":[221,229]},{"text":"React","type":"Identifier","range":[231,236]},{"text":"ReactElement","type":"Identifier","range":[237,249]},{"text":"mode","type":"Identifier","range":[255,259]},{"text":"'default'","type":"String","range":[262,271]},{"text":"'accordion'","type":"String","range":[274,285]},{"text":"export","type":"Keyword","range":[290,296]},{"text":"const","type":"Keyword","range":[297,302]},{"text":"ACCORDION_MODE_ERROR","type":"Identifier","range":[303,323]},{"text":"'<Collapse /> can only accept 1 opened item in `accordion` mode'","type":"String","range":[328,392]},{"text":"export","type":"Keyword","range":[395,401]},{"text":"function","type":"Keyword","range":[402,410]},{"text":"Collapse","type":"Identifier","range":[411,419]},{"text":"openedItems","type":"Identifier","range":[424,435]},{"text":"onChange","type":"Identifier","range":[439,447]},{"text":"children","type":"Identifier","range":[451,459]},{"text":"mode","type":"Identifier","range":[463,467]},{"text":"'default'","type":"String","range":[470,479]},{"text":"CollapseProps","type":"Identifier","range":[484,497]},{"text":"const","type":"Keyword","range":[503,508]},{"text":"childrenArray","type":"Identifier","range":[509,522]},{"text":"Children","type":"Identifier","range":[525,533]},{"text":"toArray","type":"Identifier","range":[534,541]},{"text":"children","type":"Identifier","range":[542,550]},{"text":"const","type":"Keyword","range":[556,561]},{"text":"openedItemsSet","type":"Identifier","range":[562,576]},{"text":"useMemo","type":"Identifier","range":[579,586]},{"text":"if","type":"Keyword","range":[599,601]},{"text":"mode","type":"Identifier","range":[603,607]},{"text":"'accordion'","type":"String","range":[612,623]},{"text":"openedItems","type":"Identifier","range":[627,638]},{"text":"length","type":"Identifier","range":[639,645]},{"text":"1","type":"Numeric","range":[648,649]},{"text":"console","type":"Identifier","range":[659,666]},{"text":"warn","type":"Identifier","range":[667,671]},{"text":"ACCORDION_MODE_ERROR","type":"Identifier","range":[672,692]},{"text":"return","type":"Keyword","range":[702,708]},{"text":"new","type":"Keyword","range":[709,712]},{"text":"Set","type":"Identifier","range":[713,716]},{"text":"openedItems","type":"Identifier","range":[717,728]},{"text":"slice","type":"Identifier","range":[729,734]},{"text":"0","type":"Numeric","range":[735,736]},{"text":"1","type":"Numeric","range":[738,739]},{"text":"return","type":"Keyword","range":[754,760]},{"text":"new","type":"Keyword","range":[761,764]},{"text":"Set","type":"Identifier","range":[765,768]},{"text":"openedItems","type":"Identifier","range":[769,780]},{"text":"openedItems","type":"Identifier","range":[789,800]},{"text":"const","type":"Keyword","range":[807,812]},{"text":"onHeaderClick","type":"Identifier","range":[813,826]},{"text":"name","type":"Identifier","range":[830,834]},{"text":"string","type":"Identifier","range":[836,842]},{"text":"const","type":"Keyword","range":[853,858]},{"text":"isOpened","type":"Identifier","range":[859,867]},{"text":"openedItemsSet","type":"Identifier","range":[870,884]},{"text":"has","type":"Identifier","range":[885,888]},{"text":"name","type":"Identifier","range":[889,893]},{"text":"if","type":"Keyword","range":[901,903]},{"text":"mode","type":"Identifier","range":[905,909]},{"text":"'default'","type":"String","range":[914,923]},{"text":"const","type":"Keyword","range":[933,938]},{"text":"newOpenedItems","type":"Identifier","range":[939,953]},{"text":"isOpened","type":"Identifier","range":[956,964]},{"text":"openedItems","type":"Identifier","range":[975,986]},{"text":"filter","type":"Identifier","range":[987,993]},{"text":"item","type":"Identifier","range":[994,998]},{"text":"item","type":"Identifier","range":[1002,1006]},{"text":"name","type":"Identifier","range":[1011,1015]},{"text":"openedItems","type":"Identifier","range":[1031,1042]},{"text":"name","type":"Identifier","range":[1044,1048]},{"text":"onChange","type":"Identifier","range":[1058,1066]},{"text":"newOpenedItems","type":"Identifier","range":[1067,1081]},{"text":"return","type":"Keyword","range":[1091,1097]},{"text":"onChange","type":"Identifier","range":[1110,1118]},{"text":"isOpened","type":"Identifier","range":[1119,1127]},{"text":"name","type":"Identifier","range":[1136,1140]},{"text":"return","type":"Keyword","range":[1152,1158]},{"text":"CollapseProvider","type":"JSXIdentifier","range":[1166,1182]},{"text":"value","type":"JSXIdentifier","range":[1183,1188]},{"text":"openedItems","type":"Identifier","range":[1192,1203]},{"text":"openedItemsSet","type":"Identifier","range":[1205,1219]},{"text":"onHeaderClick","type":"Identifier","range":[1221,1234]},{"text":"\n      ","type":"JSXText","range":[1238,1245]},{"text":"childrenArray","type":"Identifier","range":[1246,1259]},{"text":"\n    ","type":"JSXText","range":[1260,1265]},{"text":"CollapseProvider","type":"JSXIdentifier","range":[1267,1283]},{"text":"interface","type":"Keyword","range":[1293,1302]},{"text":"CollapseItemChildrenProps","type":"Identifier","range":[1303,1328]},{"text":"headerProps","type":"Identifier","range":[1333,1344]},{"text":"CollapseItemChildrenHeaderProps","type":"Identifier","range":[1346,1377]},{"text":"contentVisible","type":"Identifier","range":[1381,1395]},{"text":"boolean","type":"Identifier","range":[1397,1404]},{"text":"interface","type":"Keyword","range":[1409,1418]},{"text":"CollapseItemChildrenHeaderProps","type":"Identifier","range":[1419,1450]},{"text":"onClick","type":"Identifier","range":[1455,1462]},{"text":"React","type":"Identifier","range":[1464,1469]},{"text":"MouseEventHandler","type":"Identifier","range":[1470,1487]},{"text":"interface","type":"Keyword","range":[1492,1501]},{"text":"CollapseItemProps","type":"Identifier","range":[1502,1519]},{"text":"name","type":"Identifier","range":[1524,1528]},{"text":"string","type":"Identifier","range":[1530,1536]},{"text":"children","type":"Identifier","range":[1540,1548]},{"text":"props","type":"Identifier","range":[1551,1556]},{"text":"CollapseItemChildrenProps","type":"Identifier","range":[1558,1583]},{"text":"React","type":"Identifier","range":[1588,1593]},{"text":"ReactElement","type":"Identifier","range":[1594,1606]},{"text":"export","type":"Keyword","range":[1611,1617]},{"text":"function","type":"Keyword","range":[1618,1626]},{"text":"CollapseItem","type":"Identifier","range":[1627,1639]},{"text":"name","type":"Identifier","range":[1642,1646]},{"text":"children","type":"Identifier","range":[1648,1656]},{"text":"CollapseItemProps","type":"Identifier","range":[1660,1677]},{"text":"const","type":"Keyword","range":[1683,1688]},{"text":"isOpened","type":"Identifier","range":[1691,1699]},{"text":"onHeaderClick","type":"Identifier","range":[1701,1714]},{"text":"useCollapseItem","type":"Identifier","range":[1719,1734]},{"text":"name","type":"Identifier","range":[1735,1739]},{"text":"return","type":"Keyword","range":[1745,1751]},{"text":"children","type":"Identifier","range":[1752,1760]},{"text":"headerProps","type":"Identifier","range":[1767,1778]},{"text":"onClick","type":"Identifier","range":[1782,1789]},{"text":"onHeaderClick","type":"Identifier","range":[1797,1810]},{"text":"name","type":"Identifier","range":[1811,1815]},{"text":"contentVisible","type":"Identifier","range":[1824,1838]},{"text":"isOpened","type":"Identifier","range":[1840,1848]}]}