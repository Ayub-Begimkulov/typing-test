{"type":"typescript-jsx","text":"import { Fragment } from \"react\";\n\nimport { I18N } from \"../i18n\";\nimport { I18NContext } from \"./context\";\n\ninterface I18NProviderProps {\n  i18n: I18N<any>;\n  children: React.ReactNode;\n}\n\nexport const I18NProvider = ({ i18n, children }: I18NProviderProps) => {\n  return <I18NContext.Provider value={i18n}>{children}</I18NContext.Provider>;\n};\n\ninterface TaggedTextProps {\n  text: string;\n  tags?: Record<string, (str: string) => JSX.Element>;\n}\n\nconst tagsRegex = /(<\\d+>[^<>]*<\\/\\d+>)/;\nconst openCloseTagRegex = /<(\\d+)>([^<>]*)<\\/(\\d+)>/;\n\nconst interpolateTags = (\n  text: string,\n  params?: Record<string, (str: string) => JSX.Element>\n) => {\n  if (!params) {\n    return text;\n  }\n\n  const tokens = text.split(tagsRegex);\n\n  return tokens.map((token) => {\n    const matchResult = openCloseTagRegex.exec(token);\n\n    if (!matchResult) {\n      return token;\n    }\n\n    const [, openTag, content, closeTag] = matchResult;\n\n    if (!openTag || !closeTag || openTag !== closeTag) {\n      return token;\n    }\n\n    return (\n      <Fragment key={content}>{params[openTag]?.(content ?? \"\")}</Fragment>\n    );\n  });\n};\n\nexport const TaggedText = ({ text, tags }: TaggedTextProps) => {\n  return <>{interpolateTags(text, tags)}</>;\n};","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"Fragment","type":"Identifier","range":[9,17]},{"text":"from","type":"Identifier","range":[20,24]},{"text":"\"react\"","type":"String","range":[25,32]},{"text":"import","type":"Keyword","range":[35,41]},{"text":"I18N","type":"Identifier","range":[44,48]},{"text":"from","type":"Identifier","range":[51,55]},{"text":"\"../i18n\"","type":"String","range":[56,65]},{"text":"import","type":"Keyword","range":[67,73]},{"text":"I18NContext","type":"Identifier","range":[76,87]},{"text":"from","type":"Identifier","range":[90,94]},{"text":"\"./context\"","type":"String","range":[95,106]},{"text":"interface","type":"Keyword","range":[109,118]},{"text":"I18NProviderProps","type":"Identifier","range":[119,136]},{"text":"i18n","type":"Identifier","range":[141,145]},{"text":"I18N","type":"Identifier","range":[147,151]},{"text":"any","type":"Identifier","range":[152,155]},{"text":"children","type":"Identifier","range":[160,168]},{"text":"React","type":"Identifier","range":[170,175]},{"text":"ReactNode","type":"Identifier","range":[176,185]},{"text":"export","type":"Keyword","range":[190,196]},{"text":"const","type":"Keyword","range":[197,202]},{"text":"I18NProvider","type":"Identifier","range":[203,215]},{"text":"i18n","type":"Identifier","range":[221,225]},{"text":"children","type":"Identifier","range":[227,235]},{"text":"I18NProviderProps","type":"Identifier","range":[239,256]},{"text":"return","type":"Keyword","range":[265,271]},{"text":"I18NContext","type":"JSXIdentifier","range":[273,284]},{"text":"Provider","type":"JSXIdentifier","range":[285,293]},{"text":"value","type":"JSXIdentifier","range":[294,299]},{"text":"i18n","type":"Identifier","range":[301,305]},{"text":"children","type":"Identifier","range":[308,316]},{"text":"I18NContext","type":"JSXIdentifier","range":[319,330]},{"text":"Provider","type":"JSXIdentifier","range":[331,339]},{"text":"interface","type":"Keyword","range":[346,355]},{"text":"TaggedTextProps","type":"Identifier","range":[356,371]},{"text":"text","type":"Identifier","range":[376,380]},{"text":"string","type":"Identifier","range":[382,388]},{"text":"tags","type":"Identifier","range":[392,396]},{"text":"Record","type":"Identifier","range":[399,405]},{"text":"string","type":"Identifier","range":[406,412]},{"text":"str","type":"Identifier","range":[415,418]},{"text":"string","type":"Identifier","range":[420,426]},{"text":"JSX","type":"Identifier","range":[431,434]},{"text":"Element","type":"Identifier","range":[435,442]},{"text":"const","type":"Keyword","range":[448,453]},{"text":"tagsRegex","type":"Identifier","range":[454,463]},{"text":"/(<\\d+>[^<>]*<\\/\\d+>)/","type":"RegularExpression","range":[466,488]},{"text":"const","type":"Keyword","range":[490,495]},{"text":"openCloseTagRegex","type":"Identifier","range":[496,513]},{"text":"/<(\\d+)>([^<>]*)<\\/(\\d+)>/","type":"RegularExpression","range":[516,542]},{"text":"const","type":"Keyword","range":[545,550]},{"text":"interpolateTags","type":"Identifier","range":[551,566]},{"text":"text","type":"Identifier","range":[573,577]},{"text":"string","type":"Identifier","range":[579,585]},{"text":"params","type":"Identifier","range":[589,595]},{"text":"Record","type":"Identifier","range":[598,604]},{"text":"string","type":"Identifier","range":[605,611]},{"text":"str","type":"Identifier","range":[614,617]},{"text":"string","type":"Identifier","range":[619,625]},{"text":"JSX","type":"Identifier","range":[630,633]},{"text":"Element","type":"Identifier","range":[634,641]},{"text":"if","type":"Keyword","range":[652,654]},{"text":"params","type":"Identifier","range":[657,663]},{"text":"return","type":"Keyword","range":[671,677]},{"text":"text","type":"Identifier","range":[678,682]},{"text":"const","type":"Keyword","range":[691,696]},{"text":"tokens","type":"Identifier","range":[697,703]},{"text":"text","type":"Identifier","range":[706,710]},{"text":"split","type":"Identifier","range":[711,716]},{"text":"tagsRegex","type":"Identifier","range":[717,726]},{"text":"return","type":"Keyword","range":[732,738]},{"text":"tokens","type":"Identifier","range":[739,745]},{"text":"map","type":"Identifier","range":[746,749]},{"text":"token","type":"Identifier","range":[751,756]},{"text":"const","type":"Keyword","range":[767,772]},{"text":"matchResult","type":"Identifier","range":[773,784]},{"text":"openCloseTagRegex","type":"Identifier","range":[787,804]},{"text":"exec","type":"Identifier","range":[805,809]},{"text":"token","type":"Identifier","range":[810,815]},{"text":"if","type":"Keyword","range":[823,825]},{"text":"matchResult","type":"Identifier","range":[828,839]},{"text":"return","type":"Keyword","range":[849,855]},{"text":"token","type":"Identifier","range":[856,861]},{"text":"const","type":"Keyword","range":[874,879]},{"text":"openTag","type":"Identifier","range":[883,890]},{"text":"content","type":"Identifier","range":[892,899]},{"text":"closeTag","type":"Identifier","range":[901,909]},{"text":"matchResult","type":"Identifier","range":[913,924]},{"text":"if","type":"Keyword","range":[931,933]},{"text":"openTag","type":"Identifier","range":[936,943]},{"text":"closeTag","type":"Identifier","range":[948,956]},{"text":"openTag","type":"Identifier","range":[960,967]},{"text":"closeTag","type":"Identifier","range":[972,980]},{"text":"return","type":"Keyword","range":[990,996]},{"text":"token","type":"Identifier","range":[997,1002]},{"text":"return","type":"Keyword","range":[1015,1021]},{"text":"Fragment","type":"JSXIdentifier","range":[1031,1039]},{"text":"key","type":"JSXIdentifier","range":[1040,1043]},{"text":"content","type":"Identifier","range":[1045,1052]},{"text":"params","type":"Identifier","range":[1055,1061]},{"text":"openTag","type":"Identifier","range":[1062,1069]},{"text":"content","type":"Identifier","range":[1073,1080]},{"text":"\"\"","type":"String","range":[1084,1086]},{"text":"Fragment","type":"JSXIdentifier","range":[1090,1098]},{"text":"export","type":"Keyword","range":[1117,1123]},{"text":"const","type":"Keyword","range":[1124,1129]},{"text":"TaggedText","type":"Identifier","range":[1130,1140]},{"text":"text","type":"Identifier","range":[1146,1150]},{"text":"tags","type":"Identifier","range":[1152,1156]},{"text":"TaggedTextProps","type":"Identifier","range":[1160,1175]},{"text":"return","type":"Keyword","range":[1184,1190]},{"text":"interpolateTags","type":"Identifier","range":[1194,1209]},{"text":"text","type":"Identifier","range":[1210,1214]},{"text":"tags","type":"Identifier","range":[1216,1220]}]}