{"type":"javascript","text":"import { usePrevious } from './use-previous';\n\nexport function useWhyDidUpdate(props) {\n  const prevPropsRef = usePrevious(props);\n\n  const prevProps = prevPropsRef.current;\n\n  if (!prevProps) {\n    console.log('initial render');\n    return;\n  }\n\n  const prevKeys = Object.keys(prevProps);\n  const keys = Object.keys(props);\n\n  const allKeys = [...new Set(keys.concat(prevKeys))];\n  let hasChanged = false;\n\n  allKeys.forEach(key => {\n    if (props[key] !== prevProps[key]) {\n      console.log('============');\n      console.log(`prop ${key} chaged`);\n      console.log(`prev value ${prevProps[key]}`);\n      console.log(`current value ${props[key]}`);\n      console.log('============');\n\n      hasChanged = true;\n    }\n  });\n\n  if (!hasChanged) {\n    console.log('state changed');\n  }\n}","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"usePrevious","type":"Identifier","range":[9,20]},{"text":"from","type":"Identifier","range":[23,27]},{"text":"'./use-previous'","type":"String","range":[28,44]},{"text":"export","type":"Keyword","range":[47,53]},{"text":"function","type":"Keyword","range":[54,62]},{"text":"useWhyDidUpdate","type":"Identifier","range":[63,78]},{"text":"props","type":"Identifier","range":[79,84]},{"text":"const","type":"Keyword","range":[90,95]},{"text":"prevPropsRef","type":"Identifier","range":[96,108]},{"text":"usePrevious","type":"Identifier","range":[111,122]},{"text":"props","type":"Identifier","range":[123,128]},{"text":"const","type":"Keyword","range":[134,139]},{"text":"prevProps","type":"Identifier","range":[140,149]},{"text":"prevPropsRef","type":"Identifier","range":[152,164]},{"text":"current","type":"Identifier","range":[165,172]},{"text":"if","type":"Keyword","range":[177,179]},{"text":"prevProps","type":"Identifier","range":[182,191]},{"text":"console","type":"Identifier","range":[199,206]},{"text":"log","type":"Identifier","range":[207,210]},{"text":"'initial render'","type":"String","range":[211,227]},{"text":"return","type":"Keyword","range":[234,240]},{"text":"const","type":"Keyword","range":[249,254]},{"text":"prevKeys","type":"Identifier","range":[255,263]},{"text":"Object","type":"Identifier","range":[266,272]},{"text":"keys","type":"Identifier","range":[273,277]},{"text":"prevProps","type":"Identifier","range":[278,287]},{"text":"const","type":"Keyword","range":[292,297]},{"text":"keys","type":"Identifier","range":[298,302]},{"text":"Object","type":"Identifier","range":[305,311]},{"text":"keys","type":"Identifier","range":[312,316]},{"text":"props","type":"Identifier","range":[317,322]},{"text":"const","type":"Keyword","range":[328,333]},{"text":"allKeys","type":"Identifier","range":[334,341]},{"text":"new","type":"Keyword","range":[348,351]},{"text":"Set","type":"Identifier","range":[352,355]},{"text":"keys","type":"Identifier","range":[356,360]},{"text":"concat","type":"Identifier","range":[361,367]},{"text":"prevKeys","type":"Identifier","range":[368,376]},{"text":"let","type":"Keyword","range":[383,386]},{"text":"hasChanged","type":"Identifier","range":[387,397]},{"text":"false","type":"Boolean","range":[400,405]},{"text":"allKeys","type":"Identifier","range":[410,417]},{"text":"forEach","type":"Identifier","range":[418,425]},{"text":"key","type":"Identifier","range":[426,429]},{"text":"if","type":"Keyword","range":[439,441]},{"text":"props","type":"Identifier","range":[443,448]},{"text":"key","type":"Identifier","range":[449,452]},{"text":"prevProps","type":"Identifier","range":[458,467]},{"text":"key","type":"Identifier","range":[468,471]},{"text":"console","type":"Identifier","range":[482,489]},{"text":"log","type":"Identifier","range":[490,493]},{"text":"'============'","type":"String","range":[494,508]},{"text":"console","type":"Identifier","range":[517,524]},{"text":"log","type":"Identifier","range":[525,528]},{"text":"`prop ${","type":"Template","range":[529,537]},{"text":"key","type":"Identifier","range":[537,540]},{"text":"} chaged`","type":"Template","range":[540,549]},{"text":"console","type":"Identifier","range":[558,565]},{"text":"log","type":"Identifier","range":[566,569]},{"text":"`prev value ${","type":"Template","range":[570,584]},{"text":"prevProps","type":"Identifier","range":[584,593]},{"text":"key","type":"Identifier","range":[594,597]},{"text":"}`","type":"Template","range":[598,600]},{"text":"console","type":"Identifier","range":[609,616]},{"text":"log","type":"Identifier","range":[617,620]},{"text":"`current value ${","type":"Template","range":[621,638]},{"text":"props","type":"Identifier","range":[638,643]},{"text":"key","type":"Identifier","range":[644,647]},{"text":"}`","type":"Template","range":[648,650]},{"text":"console","type":"Identifier","range":[659,666]},{"text":"log","type":"Identifier","range":[667,670]},{"text":"'============'","type":"String","range":[671,685]},{"text":"hasChanged","type":"Identifier","range":[695,705]},{"text":"true","type":"Boolean","range":[708,712]},{"text":"if","type":"Keyword","range":[729,731]},{"text":"hasChanged","type":"Identifier","range":[734,744]},{"text":"console","type":"Identifier","range":[752,759]},{"text":"log","type":"Identifier","range":[760,763]},{"text":"'state changed'","type":"String","range":[764,779]}]}