{"type":"typescript","text":"import Benchmark = require(\"benchmark\");\nimport { transduce, filter, map } from \"../src\";\n\ninterface ITestCase {\n  name: string;\n  run: () => void;\n}\n\nfunction runBench(...cases: ITestCase[]) {\n  const suite = new Benchmark.Suite();\n  cases.forEach(({ name, run }) => {\n    suite.add(name, run);\n  });\n  suite\n    .on(\"cycle\", (event: any) => {\n      console.log(String(event.target));\n    })\n    .on(\"complete\", () => {\n      console.log(\"Fastest is \" + suite.filter(\"fastest\").map(\"name\"));\n    })\n    .run({ async: true });\n}\n\nfunction createArray(length: number) {\n  const arr = Array(length);\n  for (let i = 0; i < length; i++) {\n    arr.push(Math.random());\n  }\n  return arr;\n}\n\nconst size = process.env[\"ARR_SIZE\"]\n  ? parseInt(process.env[\"ARR_SIZE\"])\n  : 1_000_000;\n\nconst vanillaArr = createArray(size);\nconst transducingArr = createArray(size);\n\nconst mapper = (v: number) => v + 1;\nconst predicate = (v: number) => v > 500;\n\nrunBench(\n  {\n    name: \"vanilla\",\n    run() {\n      vanillaArr.map(mapper).filter(predicate);\n    },\n  },\n  {\n    name: \"with transducing\",\n    run() {\n      transduce(transducingArr, map(mapper), filter(predicate));\n    },\n  }\n);","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"Benchmark","type":"Identifier","range":[7,16]},{"text":"require","type":"Identifier","range":[19,26]},{"text":"\"benchmark\"","type":"String","range":[27,38]},{"text":"import","type":"Keyword","range":[41,47]},{"text":"transduce","type":"Identifier","range":[50,59]},{"text":"filter","type":"Identifier","range":[61,67]},{"text":"map","type":"Identifier","range":[69,72]},{"text":"from","type":"Identifier","range":[75,79]},{"text":"\"../src\"","type":"String","range":[80,88]},{"text":"interface","type":"Keyword","range":[91,100]},{"text":"ITestCase","type":"Identifier","range":[101,110]},{"text":"name","type":"Identifier","range":[115,119]},{"text":"string","type":"Identifier","range":[121,127]},{"text":"run","type":"Identifier","range":[131,134]},{"text":"void","type":"Keyword","range":[142,146]},{"text":"function","type":"Keyword","range":[151,159]},{"text":"runBench","type":"Identifier","range":[160,168]},{"text":"cases","type":"Identifier","range":[172,177]},{"text":"ITestCase","type":"Identifier","range":[179,188]},{"text":"const","type":"Keyword","range":[196,201]},{"text":"suite","type":"Identifier","range":[202,207]},{"text":"new","type":"Keyword","range":[210,213]},{"text":"Benchmark","type":"Identifier","range":[214,223]},{"text":"Suite","type":"Identifier","range":[224,229]},{"text":"cases","type":"Identifier","range":[235,240]},{"text":"forEach","type":"Identifier","range":[241,248]},{"text":"name","type":"Identifier","range":[252,256]},{"text":"run","type":"Identifier","range":[258,261]},{"text":"suite","type":"Identifier","range":[274,279]},{"text":"add","type":"Identifier","range":[280,283]},{"text":"name","type":"Identifier","range":[284,288]},{"text":"run","type":"Identifier","range":[290,293]},{"text":"suite","type":"Identifier","range":[304,309]},{"text":"on","type":"Identifier","range":[315,317]},{"text":"\"cycle\"","type":"String","range":[318,325]},{"text":"event","type":"Identifier","range":[328,333]},{"text":"any","type":"Identifier","range":[335,338]},{"text":"console","type":"Identifier","range":[351,358]},{"text":"log","type":"Identifier","range":[359,362]},{"text":"String","type":"Identifier","range":[363,369]},{"text":"event","type":"Identifier","range":[370,375]},{"text":"target","type":"Identifier","range":[376,382]},{"text":"on","type":"Identifier","range":[398,400]},{"text":"\"complete\"","type":"String","range":[401,411]},{"text":"console","type":"Identifier","range":[427,434]},{"text":"log","type":"Identifier","range":[435,438]},{"text":"\"Fastest is \"","type":"String","range":[439,452]},{"text":"suite","type":"Identifier","range":[455,460]},{"text":"filter","type":"Identifier","range":[461,467]},{"text":"\"fastest\"","type":"String","range":[468,477]},{"text":"map","type":"Identifier","range":[479,482]},{"text":"\"name\"","type":"String","range":[483,489]},{"text":"run","type":"Identifier","range":[505,508]},{"text":"async","type":"Identifier","range":[511,516]},{"text":"true","type":"Boolean","range":[518,522]},{"text":"function","type":"Keyword","range":[530,538]},{"text":"createArray","type":"Identifier","range":[539,550]},{"text":"length","type":"Identifier","range":[551,557]},{"text":"number","type":"Identifier","range":[559,565]},{"text":"const","type":"Keyword","range":[571,576]},{"text":"arr","type":"Identifier","range":[577,580]},{"text":"Array","type":"Identifier","range":[583,588]},{"text":"length","type":"Identifier","range":[589,595]},{"text":"for","type":"Keyword","range":[600,603]},{"text":"let","type":"Keyword","range":[605,608]},{"text":"i","type":"Identifier","range":[609,610]},{"text":"0","type":"Numeric","range":[613,614]},{"text":"i","type":"Identifier","range":[616,617]},{"text":"length","type":"Identifier","range":[620,626]},{"text":"i","type":"Identifier","range":[628,629]},{"text":"arr","type":"Identifier","range":[639,642]},{"text":"push","type":"Identifier","range":[643,647]},{"text":"Math","type":"Identifier","range":[648,652]},{"text":"random","type":"Identifier","range":[653,659]},{"text":"return","type":"Keyword","range":[670,676]},{"text":"arr","type":"Identifier","range":[677,680]},{"text":"const","type":"Keyword","range":[685,690]},{"text":"size","type":"Identifier","range":[691,695]},{"text":"process","type":"Identifier","range":[698,705]},{"text":"env","type":"Identifier","range":[706,709]},{"text":"\"ARR_SIZE\"","type":"String","range":[710,720]},{"text":"parseInt","type":"Identifier","range":[726,734]},{"text":"process","type":"Identifier","range":[735,742]},{"text":"env","type":"Identifier","range":[743,746]},{"text":"\"ARR_SIZE\"","type":"String","range":[747,757]},{"text":"1_000_000","type":"Numeric","range":[764,773]},{"text":"const","type":"Keyword","range":[776,781]},{"text":"vanillaArr","type":"Identifier","range":[782,792]},{"text":"createArray","type":"Identifier","range":[795,806]},{"text":"size","type":"Identifier","range":[807,811]},{"text":"const","type":"Keyword","range":[814,819]},{"text":"transducingArr","type":"Identifier","range":[820,834]},{"text":"createArray","type":"Identifier","range":[837,848]},{"text":"size","type":"Identifier","range":[849,853]},{"text":"const","type":"Keyword","range":[857,862]},{"text":"mapper","type":"Identifier","range":[863,869]},{"text":"v","type":"Identifier","range":[873,874]},{"text":"number","type":"Identifier","range":[876,882]},{"text":"v","type":"Identifier","range":[887,888]},{"text":"1","type":"Numeric","range":[891,892]},{"text":"const","type":"Keyword","range":[894,899]},{"text":"predicate","type":"Identifier","range":[900,909]},{"text":"v","type":"Identifier","range":[913,914]},{"text":"number","type":"Identifier","range":[916,922]},{"text":"v","type":"Identifier","range":[927,928]},{"text":"500","type":"Numeric","range":[931,934]},{"text":"runBench","type":"Identifier","range":[937,945]},{"text":"name","type":"Identifier","range":[955,959]},{"text":"\"vanilla\"","type":"String","range":[961,970]},{"text":"run","type":"Identifier","range":[976,979]},{"text":"vanillaArr","type":"Identifier","range":[990,1000]},{"text":"map","type":"Identifier","range":[1001,1004]},{"text":"mapper","type":"Identifier","range":[1005,1011]},{"text":"filter","type":"Identifier","range":[1013,1019]},{"text":"predicate","type":"Identifier","range":[1020,1029]},{"text":"name","type":"Identifier","range":[1052,1056]},{"text":"\"with transducing\"","type":"String","range":[1058,1076]},{"text":"run","type":"Identifier","range":[1082,1085]},{"text":"transduce","type":"Identifier","range":[1096,1105]},{"text":"transducingArr","type":"Identifier","range":[1106,1120]},{"text":"map","type":"Identifier","range":[1122,1125]},{"text":"mapper","type":"Identifier","range":[1126,1132]},{"text":"filter","type":"Identifier","range":[1135,1141]},{"text":"predicate","type":"Identifier","range":[1142,1151]}]}