{"type":"typescript","text":"import React, { useCallback, useState } from \"react\";\nimport { useIsMounted } from \"./use-is-mounted\";\n\nexport function useSafeState<T>(initialValue: T | (() => T)) {\n  const [state, setState] = useState(initialValue);\n  const isMounted = useIsMounted();\n\n  const safeSetState = useCallback(\n    (value: React.SetStateAction<T>) => {\n      if (!isMounted.current) return;\n      setState(value);\n    },\n    [isMounted]\n  );\n\n  return [state, safeSetState] as const;\n}","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"React","type":"Identifier","range":[7,12]},{"text":"useCallback","type":"Identifier","range":[16,27]},{"text":"useState","type":"Identifier","range":[29,37]},{"text":"from","type":"Identifier","range":[40,44]},{"text":"\"react\"","type":"String","range":[45,52]},{"text":"import","type":"Keyword","range":[54,60]},{"text":"useIsMounted","type":"Identifier","range":[63,75]},{"text":"from","type":"Identifier","range":[78,82]},{"text":"\"./use-is-mounted\"","type":"String","range":[83,101]},{"text":"export","type":"Keyword","range":[104,110]},{"text":"function","type":"Keyword","range":[111,119]},{"text":"useSafeState","type":"Identifier","range":[120,132]},{"text":"T","type":"Identifier","range":[133,134]},{"text":"initialValue","type":"Identifier","range":[136,148]},{"text":"T","type":"Identifier","range":[150,151]},{"text":"T","type":"Identifier","range":[161,162]},{"text":"const","type":"Keyword","range":[169,174]},{"text":"state","type":"Identifier","range":[176,181]},{"text":"setState","type":"Identifier","range":[183,191]},{"text":"useState","type":"Identifier","range":[195,203]},{"text":"initialValue","type":"Identifier","range":[204,216]},{"text":"const","type":"Keyword","range":[221,226]},{"text":"isMounted","type":"Identifier","range":[227,236]},{"text":"useIsMounted","type":"Identifier","range":[239,251]},{"text":"const","type":"Keyword","range":[258,263]},{"text":"safeSetState","type":"Identifier","range":[264,276]},{"text":"useCallback","type":"Identifier","range":[279,290]},{"text":"value","type":"Identifier","range":[297,302]},{"text":"React","type":"Identifier","range":[304,309]},{"text":"SetStateAction","type":"Identifier","range":[310,324]},{"text":"T","type":"Identifier","range":[325,326]},{"text":"if","type":"Keyword","range":[340,342]},{"text":"isMounted","type":"Identifier","range":[345,354]},{"text":"current","type":"Identifier","range":[355,362]},{"text":"return","type":"Keyword","range":[364,370]},{"text":"setState","type":"Identifier","range":[378,386]},{"text":"value","type":"Identifier","range":[387,392]},{"text":"isMounted","type":"Identifier","range":[407,416]},{"text":"return","type":"Keyword","range":[426,432]},{"text":"state","type":"Identifier","range":[434,439]},{"text":"safeSetState","type":"Identifier","range":[441,453]},{"text":"as","type":"Identifier","range":[455,457]},{"text":"const","type":"Keyword","range":[458,463]}]}