{"type":"typescript","text":"import React, { Children, useCallback, useContext, useRef } from \"react\";\nimport { __DEV__ } from \"./constants\";\nimport { TransitionGroupContext } from \"./context\";\nimport {\n  useIsMounted,\n  useLatest,\n  usePrevious,\n  useSafeState,\n  useCombinedRef,\n  useIsomorphicLayoutEffect as useLayoutEffect,\n} from \"./hooks\";\nimport {\n  addClass,\n  nextFrame,\n  removeClass,\n  whenTransitionEnds,\n  CSSTransitionType,\n  once,\n} from \"./utils\";\n\nexport interface TransitionProps {\n  visible?: boolean;\n  name?: string;\n  type?: CSSTransitionType;\n  appear?: boolean;\n  customAppear?: boolean;\n  unmount?: boolean;\n  nodeRef?:\n    | React.MutableRefObject<Element | null>\n    | ((node: Element | null) => void);\n  enterFromClass?: string;\n  enterActiveClass?: string;\n  enterToClass?: string;\n  appearFromClass?: string;\n  appearActiveClass?: string;\n  appearToClass?: string;\n  leaveFromClass?: string;\n  leaveActiveClass?: string;\n  leaveToClass?: string;\n  onBeforeEnter?: (el: Element) => void;\n  onEnter?: (el: Element /* , done: () => void */) => void;\n  onAfterEnter?: (el: Element) => void;\n  onEnterCancelled?: (el: Element) => void;\n  onBeforeLeave?: (el: Element) => void;\n  onLeave?: (el: Element /* , done: () => void */) => void;\n  onAfterLeave?: (el: Element) => void;\n  onLeaveCancelled?: (el: Element) => void;\n  onBeforeAppear?: (el: Element) => void;\n  onAppear?: (el: Element /* , done: () => void */) => void;\n  onAfterAppear?: (el: Element) => void;\n  onAppearCancelled?: (el: Element) => void;\n  children: (props: TransitionChildrenProps) => React.ReactElement;\n}\n\ninterface TransitionChildrenProps {\n  ref: (node: Element | null) => void;\n}\n\nconst Transition = (props: TransitionProps) => {\n  const context = useContext(TransitionGroupContext);\n  const latestProps = useLatest(props);\n  const { visible, children, unmount = true, nodeRef } = props;\n\n  const [localVisible, setLocalVisible] = useSafeState(visible);\n\n  const previousVisible = usePrevious(visible);\n  // wrapping `localVisible` with ref to prevent unnecessary\n  // effect calls\n  const localVisibleRef = useLatest(localVisible);\n\n  const isMounted = useIsMounted();\n  const elementRef = useRef<Element | null>(null);\n  const elementDisplay = useRef<string | null>(null);\n  const finishEnter = useRef<((cancelled?: boolean) => void) | null>(null);\n  const finishLeave = useRef<((cancelled?: boolean) => void) | null>(null);\n\n  const recordDisplayAndHide = useCallback(\n    (element: Element) => {\n      // unmount is always true unless user explicitly passed `false`\n      if (latestProps.current.unmount !== false) return;\n      const style = (element as HTMLElement).style;\n      elementDisplay.current = style.display;\n      style.display = \"none\";\n    },\n    [latestProps]\n  );\n\n  const performEnter = useCallback(\n    (el: Element) => {\n      const {\n        type,\n        appear = false,\n        unmount = true,\n        customAppear = false,\n        name = \"transition\",\n        enterFromClass = `${name}-enter-from`,\n        enterActiveClass = `${name}-enter-active`,\n        enterToClass = `${name}-enter-to`,\n        appearFromClass = customAppear ? `${name}-appear-from` : enterFromClass,\n        appearActiveClass = customAppear\n          ? `${name}-appear-active`\n          : enterActiveClass,\n        appearToClass = customAppear ? `${name}-appear-to` : enterToClass,\n        onBeforeEnter,\n        onEnter,\n        onAfterEnter,\n        onEnterCancelled,\n        onBeforeAppear = customAppear ? undefined : onBeforeEnter,\n        onAppear = customAppear ? undefined : onEnter,\n        onAfterAppear = customAppear ? undefined : onAfterEnter,\n        onAppearCancelled = customAppear ? undefined : onEnterCancelled,\n      } = latestProps.current;\n\n      context?.register(el);\n\n      // exit if no appear and component isn't mounted\n      if (!appear && !isMounted.current) {\n        return;\n      }\n\n      // technically it's appear transition, but the parent <TransitionGroup> is already\n      // mounted\n      const isAppear =\n        appear && !isMounted.current && (context ? context.isAppearing : true);\n\n      if (finishLeave.current) {\n        finishLeave.current(true);\n      }\n\n      const [\n        beforeHook,\n        hook,\n        afterHook,\n        cancelHook,\n        fromClass,\n        activeClass,\n        toClass,\n      ] = isAppear\n        ? [\n            onBeforeAppear,\n            onAppear,\n            onAfterAppear,\n            onAppearCancelled,\n            appearFromClass,\n            appearActiveClass,\n            appearToClass,\n          ]\n        : [\n            onBeforeEnter,\n            onEnter,\n            onAfterEnter,\n            onEnterCancelled,\n            enterFromClass,\n            enterActiveClass,\n            enterToClass,\n          ];\n      beforeHook && beforeHook(el);\n      if (!unmount && elementDisplay.current) {\n        (el as HTMLElement).style.display = elementDisplay.current;\n      }\n      addClass(el, fromClass, activeClass);\n      hook && hook(el);\n      nextFrame(() => {\n        removeClass(el, fromClass);\n        addClass(el, toClass);\n        const onEnd = (finishEnter.current = once((cancelled?: boolean) => {\n          removeClass(el, toClass, activeClass);\n          const finishHook = cancelled ? cancelHook : afterHook;\n          finishHook && finishHook(el);\n          finishEnter.current = null;\n        }));\n        whenTransitionEnds(el, onEnd, type);\n      });\n    },\n    [latestProps, isMounted, context]\n  );\n\n  const performLeave = useCallback(\n    (el: Element) => {\n      if (finishEnter.current) {\n        finishEnter.current(true);\n      }\n      context?.unregister(el);\n\n      const {\n        type,\n        name = \"transition\",\n        leaveFromClass = `${name}-leave-from`,\n        leaveActiveClass = `${name}-leave-active`,\n        leaveToClass = `${name}-leave-to`,\n        onBeforeLeave,\n        onLeave,\n        onAfterLeave,\n        onLeaveCancelled,\n      } = latestProps.current;\n\n      onBeforeLeave && onBeforeLeave(el);\n      addClass(el, leaveFromClass);\n      addClass(el, leaveActiveClass);\n      onLeave && onLeave(el);\n      nextFrame(() => {\n        removeClass(el, leaveFromClass);\n        addClass(el, leaveToClass);\n        const onEnd = (finishLeave.current = once((cancelled?: boolean) => {\n          removeClass(el, leaveToClass);\n          removeClass(el, leaveActiveClass);\n\n          if (!cancelled) {\n            setLocalVisible(false);\n            recordDisplayAndHide(el);\n          }\n\n          const finishHook = cancelled ? onLeaveCancelled : onAfterLeave;\n          finishHook && finishHook(el);\n          finishLeave.current = null;\n        }));\n        whenTransitionEnds(el, onEnd, type);\n      });\n    },\n    [latestProps, context, isMounted, setLocalVisible, recordDisplayAndHide]\n  );\n\n  // sync state action\n  useLayoutEffect(() => {\n    if (visible) {\n      return setLocalVisible(true);\n    }\n    const element = elementRef.current;\n    if (!element) return;\n    // TODO refactor this block\n    if (!isMounted.current) {\n      recordDisplayAndHide(element);\n      // do not run `performLeave` on initial render\n      return;\n    }\n    // we need to make an animation before exiting\n    performLeave(element);\n  }, [\n    visible,\n    latestProps,\n    isMounted,\n    setLocalVisible,\n    performLeave,\n    recordDisplayAndHide,\n  ]);\n\n  // enter after cancel\n  useLayoutEffect(() => {\n    const element = elementRef.current;\n    if (\n      element &&\n      isMounted.current &&\n      previousVisible.current !== localVisibleRef.current\n    ) {\n      performEnter(element);\n    }\n  }, [visible, previousVisible, localVisibleRef, isMounted, performEnter]);\n\n  // perform enter animation\n  useLayoutEffect(() => {\n    const element = elementRef.current;\n\n    if (element && localVisible) {\n      performEnter(element);\n    }\n  }, [localVisible, context, performEnter]);\n\n  const combinedRef = useCombinedRef(elementRef, nodeRef);\n\n  if (unmount && !localVisible) return null;\n\n  try {\n    // TODO do we need this verification?\n    return Children.only(children({ ref: combinedRef }));\n  } catch {\n    if (__DEV__) {\n      throw new Error(\n        \"[retransition]: wrong `children` passed to the <Transition> component \" +\n          \"expected to have `ReactElement`, got \" +\n          typeof children\n      );\n    }\n    return null;\n  }\n};\n\nexport default Transition;","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"React","type":"Identifier","range":[7,12]},{"text":"Children","type":"Identifier","range":[16,24]},{"text":"useCallback","type":"Identifier","range":[26,37]},{"text":"useContext","type":"Identifier","range":[39,49]},{"text":"useRef","type":"Identifier","range":[51,57]},{"text":"from","type":"Identifier","range":[60,64]},{"text":"\"react\"","type":"String","range":[65,72]},{"text":"import","type":"Keyword","range":[74,80]},{"text":"__DEV__","type":"Identifier","range":[83,90]},{"text":"from","type":"Identifier","range":[93,97]},{"text":"\"./constants\"","type":"String","range":[98,111]},{"text":"import","type":"Keyword","range":[113,119]},{"text":"TransitionGroupContext","type":"Identifier","range":[122,144]},{"text":"from","type":"Identifier","range":[147,151]},{"text":"\"./context\"","type":"String","range":[152,163]},{"text":"import","type":"Keyword","range":[165,171]},{"text":"useIsMounted","type":"Identifier","range":[176,188]},{"text":"useLatest","type":"Identifier","range":[192,201]},{"text":"usePrevious","type":"Identifier","range":[205,216]},{"text":"useSafeState","type":"Identifier","range":[220,232]},{"text":"useCombinedRef","type":"Identifier","range":[236,250]},{"text":"useIsomorphicLayoutEffect","type":"Identifier","range":[254,279]},{"text":"as","type":"Identifier","range":[280,282]},{"text":"useLayoutEffect","type":"Identifier","range":[283,298]},{"text":"from","type":"Identifier","range":[302,306]},{"text":"\"./hooks\"","type":"String","range":[307,316]},{"text":"import","type":"Keyword","range":[318,324]},{"text":"addClass","type":"Identifier","range":[329,337]},{"text":"nextFrame","type":"Identifier","range":[341,350]},{"text":"removeClass","type":"Identifier","range":[354,365]},{"text":"whenTransitionEnds","type":"Identifier","range":[369,387]},{"text":"CSSTransitionType","type":"Identifier","range":[391,408]},{"text":"once","type":"Identifier","range":[412,416]},{"text":"from","type":"Identifier","range":[420,424]},{"text":"\"./utils\"","type":"String","range":[425,434]},{"text":"export","type":"Keyword","range":[437,443]},{"text":"interface","type":"Keyword","range":[444,453]},{"text":"TransitionProps","type":"Identifier","range":[454,469]},{"text":"visible","type":"Identifier","range":[474,481]},{"text":"boolean","type":"Identifier","range":[484,491]},{"text":"name","type":"Identifier","range":[495,499]},{"text":"string","type":"Identifier","range":[502,508]},{"text":"type","type":"Identifier","range":[512,516]},{"text":"CSSTransitionType","type":"Identifier","range":[519,536]},{"text":"appear","type":"Identifier","range":[540,546]},{"text":"boolean","type":"Identifier","range":[549,556]},{"text":"customAppear","type":"Identifier","range":[560,572]},{"text":"boolean","type":"Identifier","range":[575,582]},{"text":"unmount","type":"Identifier","range":[586,593]},{"text":"boolean","type":"Identifier","range":[596,603]},{"text":"nodeRef","type":"Identifier","range":[607,614]},{"text":"React","type":"Identifier","range":[623,628]},{"text":"MutableRefObject","type":"Identifier","range":[629,645]},{"text":"Element","type":"Identifier","range":[646,653]},{"text":"null","type":"Keyword","range":[656,660]},{"text":"node","type":"Identifier","range":[670,674]},{"text":"Element","type":"Identifier","range":[676,683]},{"text":"null","type":"Keyword","range":[686,690]},{"text":"void","type":"Keyword","range":[695,699]},{"text":"enterFromClass","type":"Identifier","range":[704,718]},{"text":"string","type":"Identifier","range":[721,727]},{"text":"enterActiveClass","type":"Identifier","range":[731,747]},{"text":"string","type":"Identifier","range":[750,756]},{"text":"enterToClass","type":"Identifier","range":[760,772]},{"text":"string","type":"Identifier","range":[775,781]},{"text":"appearFromClass","type":"Identifier","range":[785,800]},{"text":"string","type":"Identifier","range":[803,809]},{"text":"appearActiveClass","type":"Identifier","range":[813,830]},{"text":"string","type":"Identifier","range":[833,839]},{"text":"appearToClass","type":"Identifier","range":[843,856]},{"text":"string","type":"Identifier","range":[859,865]},{"text":"leaveFromClass","type":"Identifier","range":[869,883]},{"text":"string","type":"Identifier","range":[886,892]},{"text":"leaveActiveClass","type":"Identifier","range":[896,912]},{"text":"string","type":"Identifier","range":[915,921]},{"text":"leaveToClass","type":"Identifier","range":[925,937]},{"text":"string","type":"Identifier","range":[940,946]},{"text":"onBeforeEnter","type":"Identifier","range":[950,963]},{"text":"el","type":"Identifier","range":[967,969]},{"text":"Element","type":"Identifier","range":[971,978]},{"text":"void","type":"Keyword","range":[983,987]},{"text":"onEnter","type":"Identifier","range":[991,998]},{"text":"el","type":"Identifier","range":[1002,1004]},{"text":"Element","type":"Identifier","range":[1006,1013]},{"text":" , done: () => void ","type":"Block","range":[1014,1038]},{"text":"void","type":"Keyword","range":[1043,1047]},{"text":"onAfterEnter","type":"Identifier","range":[1051,1063]},{"text":"el","type":"Identifier","range":[1067,1069]},{"text":"Element","type":"Identifier","range":[1071,1078]},{"text":"void","type":"Keyword","range":[1083,1087]},{"text":"onEnterCancelled","type":"Identifier","range":[1091,1107]},{"text":"el","type":"Identifier","range":[1111,1113]},{"text":"Element","type":"Identifier","range":[1115,1122]},{"text":"void","type":"Keyword","range":[1127,1131]},{"text":"onBeforeLeave","type":"Identifier","range":[1135,1148]},{"text":"el","type":"Identifier","range":[1152,1154]},{"text":"Element","type":"Identifier","range":[1156,1163]},{"text":"void","type":"Keyword","range":[1168,1172]},{"text":"onLeave","type":"Identifier","range":[1176,1183]},{"text":"el","type":"Identifier","range":[1187,1189]},{"text":"Element","type":"Identifier","range":[1191,1198]},{"text":" , done: () => void ","type":"Block","range":[1199,1223]},{"text":"void","type":"Keyword","range":[1228,1232]},{"text":"onAfterLeave","type":"Identifier","range":[1236,1248]},{"text":"el","type":"Identifier","range":[1252,1254]},{"text":"Element","type":"Identifier","range":[1256,1263]},{"text":"void","type":"Keyword","range":[1268,1272]},{"text":"onLeaveCancelled","type":"Identifier","range":[1276,1292]},{"text":"el","type":"Identifier","range":[1296,1298]},{"text":"Element","type":"Identifier","range":[1300,1307]},{"text":"void","type":"Keyword","range":[1312,1316]},{"text":"onBeforeAppear","type":"Identifier","range":[1320,1334]},{"text":"el","type":"Identifier","range":[1338,1340]},{"text":"Element","type":"Identifier","range":[1342,1349]},{"text":"void","type":"Keyword","range":[1354,1358]},{"text":"onAppear","type":"Identifier","range":[1362,1370]},{"text":"el","type":"Identifier","range":[1374,1376]},{"text":"Element","type":"Identifier","range":[1378,1385]},{"text":" , done: () => void ","type":"Block","range":[1386,1410]},{"text":"void","type":"Keyword","range":[1415,1419]},{"text":"onAfterAppear","type":"Identifier","range":[1423,1436]},{"text":"el","type":"Identifier","range":[1440,1442]},{"text":"Element","type":"Identifier","range":[1444,1451]},{"text":"void","type":"Keyword","range":[1456,1460]},{"text":"onAppearCancelled","type":"Identifier","range":[1464,1481]},{"text":"el","type":"Identifier","range":[1485,1487]},{"text":"Element","type":"Identifier","range":[1489,1496]},{"text":"void","type":"Keyword","range":[1501,1505]},{"text":"children","type":"Identifier","range":[1509,1517]},{"text":"props","type":"Identifier","range":[1520,1525]},{"text":"TransitionChildrenProps","type":"Identifier","range":[1527,1550]},{"text":"React","type":"Identifier","range":[1555,1560]},{"text":"ReactElement","type":"Identifier","range":[1561,1573]},{"text":"interface","type":"Keyword","range":[1578,1587]},{"text":"TransitionChildrenProps","type":"Identifier","range":[1588,1611]},{"text":"ref","type":"Identifier","range":[1616,1619]},{"text":"node","type":"Identifier","range":[1622,1626]},{"text":"Element","type":"Identifier","range":[1628,1635]},{"text":"null","type":"Keyword","range":[1638,1642]},{"text":"void","type":"Keyword","range":[1647,1651]},{"text":"const","type":"Keyword","range":[1656,1661]},{"text":"Transition","type":"Identifier","range":[1662,1672]},{"text":"props","type":"Identifier","range":[1676,1681]},{"text":"TransitionProps","type":"Identifier","range":[1683,1698]},{"text":"const","type":"Keyword","range":[1707,1712]},{"text":"context","type":"Identifier","range":[1713,1720]},{"text":"useContext","type":"Identifier","range":[1723,1733]},{"text":"TransitionGroupContext","type":"Identifier","range":[1734,1756]},{"text":"const","type":"Keyword","range":[1761,1766]},{"text":"latestProps","type":"Identifier","range":[1767,1778]},{"text":"useLatest","type":"Identifier","range":[1781,1790]},{"text":"props","type":"Identifier","range":[1791,1796]},{"text":"const","type":"Keyword","range":[1801,1806]},{"text":"visible","type":"Identifier","range":[1809,1816]},{"text":"children","type":"Identifier","range":[1818,1826]},{"text":"unmount","type":"Identifier","range":[1828,1835]},{"text":"true","type":"Boolean","range":[1838,1842]},{"text":"nodeRef","type":"Identifier","range":[1844,1851]},{"text":"props","type":"Identifier","range":[1856,1861]},{"text":"const","type":"Keyword","range":[1866,1871]},{"text":"localVisible","type":"Identifier","range":[1873,1885]},{"text":"setLocalVisible","type":"Identifier","range":[1887,1902]},{"text":"useSafeState","type":"Identifier","range":[1906,1918]},{"text":"visible","type":"Identifier","range":[1919,1926]},{"text":"const","type":"Keyword","range":[1932,1937]},{"text":"previousVisible","type":"Identifier","range":[1938,1953]},{"text":"usePrevious","type":"Identifier","range":[1956,1967]},{"text":"visible","type":"Identifier","range":[1968,1975]},{"text":" wrapping `localVisible` with ref to prevent unnecessary","type":"Line","range":[1980,2038]},{"text":" effect calls","type":"Line","range":[2041,2056]},{"text":"const","type":"Keyword","range":[2059,2064]},{"text":"localVisibleRef","type":"Identifier","range":[2065,2080]},{"text":"useLatest","type":"Identifier","range":[2083,2092]},{"text":"localVisible","type":"Identifier","range":[2093,2105]},{"text":"const","type":"Keyword","range":[2111,2116]},{"text":"isMounted","type":"Identifier","range":[2117,2126]},{"text":"useIsMounted","type":"Identifier","range":[2129,2141]},{"text":"const","type":"Keyword","range":[2147,2152]},{"text":"elementRef","type":"Identifier","range":[2153,2163]},{"text":"useRef","type":"Identifier","range":[2166,2172]},{"text":"Element","type":"Identifier","range":[2173,2180]},{"text":"null","type":"Keyword","range":[2183,2187]},{"text":"null","type":"Keyword","range":[2189,2193]},{"text":"const","type":"Keyword","range":[2198,2203]},{"text":"elementDisplay","type":"Identifier","range":[2204,2218]},{"text":"useRef","type":"Identifier","range":[2221,2227]},{"text":"string","type":"Identifier","range":[2228,2234]},{"text":"null","type":"Keyword","range":[2237,2241]},{"text":"null","type":"Keyword","range":[2243,2247]},{"text":"const","type":"Keyword","range":[2252,2257]},{"text":"finishEnter","type":"Identifier","range":[2258,2269]},{"text":"useRef","type":"Identifier","range":[2272,2278]},{"text":"cancelled","type":"Identifier","range":[2281,2290]},{"text":"boolean","type":"Identifier","range":[2293,2300]},{"text":"void","type":"Keyword","range":[2305,2309]},{"text":"null","type":"Keyword","range":[2313,2317]},{"text":"null","type":"Keyword","range":[2319,2323]},{"text":"const","type":"Keyword","range":[2328,2333]},{"text":"finishLeave","type":"Identifier","range":[2334,2345]},{"text":"useRef","type":"Identifier","range":[2348,2354]},{"text":"cancelled","type":"Identifier","range":[2357,2366]},{"text":"boolean","type":"Identifier","range":[2369,2376]},{"text":"void","type":"Keyword","range":[2381,2385]},{"text":"null","type":"Keyword","range":[2389,2393]},{"text":"null","type":"Keyword","range":[2395,2399]},{"text":"const","type":"Keyword","range":[2405,2410]},{"text":"recordDisplayAndHide","type":"Identifier","range":[2411,2431]},{"text":"useCallback","type":"Identifier","range":[2434,2445]},{"text":"element","type":"Identifier","range":[2452,2459]},{"text":"Element","type":"Identifier","range":[2461,2468]},{"text":" unmount is always true unless user explicitly passed `false`","type":"Line","range":[2481,2544]},{"text":"if","type":"Keyword","range":[2551,2553]},{"text":"latestProps","type":"Identifier","range":[2555,2566]},{"text":"current","type":"Identifier","range":[2567,2574]},{"text":"unmount","type":"Identifier","range":[2575,2582]},{"text":"false","type":"Boolean","range":[2587,2592]},{"text":"return","type":"Keyword","range":[2594,2600]},{"text":"const","type":"Keyword","range":[2608,2613]},{"text":"style","type":"Identifier","range":[2614,2619]},{"text":"element","type":"Identifier","range":[2623,2630]},{"text":"as","type":"Identifier","range":[2631,2633]},{"text":"HTMLElement","type":"Identifier","range":[2634,2645]},{"text":"style","type":"Identifier","range":[2647,2652]},{"text":"elementDisplay","type":"Identifier","range":[2660,2674]},{"text":"current","type":"Identifier","range":[2675,2682]},{"text":"style","type":"Identifier","range":[2685,2690]},{"text":"display","type":"Identifier","range":[2691,2698]},{"text":"style","type":"Identifier","range":[2706,2711]},{"text":"display","type":"Identifier","range":[2712,2719]},{"text":"\"none\"","type":"String","range":[2722,2728]},{"text":"latestProps","type":"Identifier","range":[2742,2753]},{"text":"const","type":"Keyword","range":[2763,2768]},{"text":"performEnter","type":"Identifier","range":[2769,2781]},{"text":"useCallback","type":"Identifier","range":[2784,2795]},{"text":"el","type":"Identifier","range":[2802,2804]},{"text":"Element","type":"Identifier","range":[2806,2813]},{"text":"const","type":"Keyword","range":[2826,2831]},{"text":"type","type":"Identifier","range":[2842,2846]},{"text":"appear","type":"Identifier","range":[2856,2862]},{"text":"false","type":"Boolean","range":[2865,2870]},{"text":"unmount","type":"Identifier","range":[2880,2887]},{"text":"true","type":"Boolean","range":[2890,2894]},{"text":"customAppear","type":"Identifier","range":[2904,2916]},{"text":"false","type":"Boolean","range":[2919,2924]},{"text":"name","type":"Identifier","range":[2934,2938]},{"text":"\"transition\"","type":"String","range":[2941,2953]},{"text":"enterFromClass","type":"Identifier","range":[2963,2977]},{"text":"`${","type":"Template","range":[2980,2983]},{"text":"name","type":"Identifier","range":[2983,2987]},{"text":"}-enter-from`","type":"Template","range":[2987,3000]},{"text":"enterActiveClass","type":"Identifier","range":[3010,3026]},{"text":"`${","type":"Template","range":[3029,3032]},{"text":"name","type":"Identifier","range":[3032,3036]},{"text":"}-enter-active`","type":"Template","range":[3036,3051]},{"text":"enterToClass","type":"Identifier","range":[3061,3073]},{"text":"`${","type":"Template","range":[3076,3079]},{"text":"name","type":"Identifier","range":[3079,3083]},{"text":"}-enter-to`","type":"Template","range":[3083,3094]},{"text":"appearFromClass","type":"Identifier","range":[3104,3119]},{"text":"customAppear","type":"Identifier","range":[3122,3134]},{"text":"`${","type":"Template","range":[3137,3140]},{"text":"name","type":"Identifier","range":[3140,3144]},{"text":"}-appear-from`","type":"Template","range":[3144,3158]},{"text":"enterFromClass","type":"Identifier","range":[3161,3175]},{"text":"appearActiveClass","type":"Identifier","range":[3185,3202]},{"text":"customAppear","type":"Identifier","range":[3205,3217]},{"text":"`${","type":"Template","range":[3230,3233]},{"text":"name","type":"Identifier","range":[3233,3237]},{"text":"}-appear-active`","type":"Template","range":[3237,3253]},{"text":"enterActiveClass","type":"Identifier","range":[3266,3282]},{"text":"appearToClass","type":"Identifier","range":[3292,3305]},{"text":"customAppear","type":"Identifier","range":[3308,3320]},{"text":"`${","type":"Template","range":[3323,3326]},{"text":"name","type":"Identifier","range":[3326,3330]},{"text":"}-appear-to`","type":"Template","range":[3330,3342]},{"text":"enterToClass","type":"Identifier","range":[3345,3357]},{"text":"onBeforeEnter","type":"Identifier","range":[3367,3380]},{"text":"onEnter","type":"Identifier","range":[3390,3397]},{"text":"onAfterEnter","type":"Identifier","range":[3407,3419]},{"text":"onEnterCancelled","type":"Identifier","range":[3429,3445]},{"text":"onBeforeAppear","type":"Identifier","range":[3455,3469]},{"text":"customAppear","type":"Identifier","range":[3472,3484]},{"text":"undefined","type":"Identifier","range":[3487,3496]},{"text":"onBeforeEnter","type":"Identifier","range":[3499,3512]},{"text":"onAppear","type":"Identifier","range":[3522,3530]},{"text":"customAppear","type":"Identifier","range":[3533,3545]},{"text":"undefined","type":"Identifier","range":[3548,3557]},{"text":"onEnter","type":"Identifier","range":[3560,3567]},{"text":"onAfterAppear","type":"Identifier","range":[3577,3590]},{"text":"customAppear","type":"Identifier","range":[3593,3605]},{"text":"undefined","type":"Identifier","range":[3608,3617]},{"text":"onAfterEnter","type":"Identifier","range":[3620,3632]},{"text":"onAppearCancelled","type":"Identifier","range":[3642,3659]},{"text":"customAppear","type":"Identifier","range":[3662,3674]},{"text":"undefined","type":"Identifier","range":[3677,3686]},{"text":"onEnterCancelled","type":"Identifier","range":[3689,3705]},{"text":"latestProps","type":"Identifier","range":[3717,3728]},{"text":"current","type":"Identifier","range":[3729,3736]},{"text":"context","type":"Identifier","range":[3745,3752]},{"text":"register","type":"Identifier","range":[3754,3762]},{"text":"el","type":"Identifier","range":[3763,3765]},{"text":" exit if no appear and component isn't mounted","type":"Line","range":[3775,3823]},{"text":"if","type":"Keyword","range":[3830,3832]},{"text":"appear","type":"Identifier","range":[3835,3841]},{"text":"isMounted","type":"Identifier","range":[3846,3855]},{"text":"current","type":"Identifier","range":[3856,3863]},{"text":"return","type":"Keyword","range":[3875,3881]},{"text":" technically it's appear transition, but the parent <TransitionGroup> is already","type":"Line","range":[3898,3980]},{"text":" mounted","type":"Line","range":[3987,3997]},{"text":"const","type":"Keyword","range":[4004,4009]},{"text":"isAppear","type":"Identifier","range":[4010,4018]},{"text":"appear","type":"Identifier","range":[4029,4035]},{"text":"isMounted","type":"Identifier","range":[4040,4049]},{"text":"current","type":"Identifier","range":[4050,4057]},{"text":"context","type":"Identifier","range":[4062,4069]},{"text":"context","type":"Identifier","range":[4072,4079]},{"text":"isAppearing","type":"Identifier","range":[4080,4091]},{"text":"true","type":"Boolean","range":[4094,4098]},{"text":"if","type":"Keyword","range":[4108,4110]},{"text":"finishLeave","type":"Identifier","range":[4112,4123]},{"text":"current","type":"Identifier","range":[4124,4131]},{"text":"finishLeave","type":"Identifier","range":[4143,4154]},{"text":"current","type":"Identifier","range":[4155,4162]},{"text":"true","type":"Boolean","range":[4163,4167]},{"text":"const","type":"Keyword","range":[4185,4190]},{"text":"beforeHook","type":"Identifier","range":[4201,4211]},{"text":"hook","type":"Identifier","range":[4221,4225]},{"text":"afterHook","type":"Identifier","range":[4235,4244]},{"text":"cancelHook","type":"Identifier","range":[4254,4264]},{"text":"fromClass","type":"Identifier","range":[4274,4283]},{"text":"activeClass","type":"Identifier","range":[4293,4304]},{"text":"toClass","type":"Identifier","range":[4314,4321]},{"text":"isAppear","type":"Identifier","range":[4333,4341]},{"text":"onBeforeAppear","type":"Identifier","range":[4366,4380]},{"text":"onAppear","type":"Identifier","range":[4394,4402]},{"text":"onAfterAppear","type":"Identifier","range":[4416,4429]},{"text":"onAppearCancelled","type":"Identifier","range":[4443,4460]},{"text":"appearFromClass","type":"Identifier","range":[4474,4489]},{"text":"appearActiveClass","type":"Identifier","range":[4503,4520]},{"text":"appearToClass","type":"Identifier","range":[4534,4547]},{"text":"onBeforeEnter","type":"Identifier","range":[4585,4598]},{"text":"onEnter","type":"Identifier","range":[4612,4619]},{"text":"onAfterEnter","type":"Identifier","range":[4633,4645]},{"text":"onEnterCancelled","type":"Identifier","range":[4659,4675]},{"text":"enterFromClass","type":"Identifier","range":[4689,4703]},{"text":"enterActiveClass","type":"Identifier","range":[4717,4733]},{"text":"enterToClass","type":"Identifier","range":[4747,4759]},{"text":"beforeHook","type":"Identifier","range":[4780,4790]},{"text":"beforeHook","type":"Identifier","range":[4794,4804]},{"text":"el","type":"Identifier","range":[4805,4807]},{"text":"if","type":"Keyword","range":[4816,4818]},{"text":"unmount","type":"Identifier","range":[4821,4828]},{"text":"elementDisplay","type":"Identifier","range":[4832,4846]},{"text":"current","type":"Identifier","range":[4847,4854]},{"text":"el","type":"Identifier","range":[4867,4869]},{"text":"as","type":"Identifier","range":[4870,4872]},{"text":"HTMLElement","type":"Identifier","range":[4873,4884]},{"text":"style","type":"Identifier","range":[4886,4891]},{"text":"display","type":"Identifier","range":[4892,4899]},{"text":"elementDisplay","type":"Identifier","range":[4902,4916]},{"text":"current","type":"Identifier","range":[4917,4924]},{"text":"addClass","type":"Identifier","range":[4940,4948]},{"text":"el","type":"Identifier","range":[4949,4951]},{"text":"fromClass","type":"Identifier","range":[4953,4962]},{"text":"activeClass","type":"Identifier","range":[4964,4975]},{"text":"hook","type":"Identifier","range":[4984,4988]},{"text":"hook","type":"Identifier","range":[4992,4996]},{"text":"el","type":"Identifier","range":[4997,4999]},{"text":"nextFrame","type":"Identifier","range":[5008,5017]},{"text":"removeClass","type":"Identifier","range":[5034,5045]},{"text":"el","type":"Identifier","range":[5046,5048]},{"text":"fromClass","type":"Identifier","range":[5050,5059]},{"text":"addClass","type":"Identifier","range":[5070,5078]},{"text":"el","type":"Identifier","range":[5079,5081]},{"text":"toClass","type":"Identifier","range":[5083,5090]},{"text":"const","type":"Keyword","range":[5101,5106]},{"text":"onEnd","type":"Identifier","range":[5107,5112]},{"text":"finishEnter","type":"Identifier","range":[5116,5127]},{"text":"current","type":"Identifier","range":[5128,5135]},{"text":"once","type":"Identifier","range":[5138,5142]},{"text":"cancelled","type":"Identifier","range":[5144,5153]},{"text":"boolean","type":"Identifier","range":[5156,5163]},{"text":"removeClass","type":"Identifier","range":[5180,5191]},{"text":"el","type":"Identifier","range":[5192,5194]},{"text":"toClass","type":"Identifier","range":[5196,5203]},{"text":"activeClass","type":"Identifier","range":[5205,5216]},{"text":"const","type":"Keyword","range":[5229,5234]},{"text":"finishHook","type":"Identifier","range":[5235,5245]},{"text":"cancelled","type":"Identifier","range":[5248,5257]},{"text":"cancelHook","type":"Identifier","range":[5260,5270]},{"text":"afterHook","type":"Identifier","range":[5273,5282]},{"text":"finishHook","type":"Identifier","range":[5294,5304]},{"text":"finishHook","type":"Identifier","range":[5308,5318]},{"text":"el","type":"Identifier","range":[5319,5321]},{"text":"finishEnter","type":"Identifier","range":[5334,5345]},{"text":"current","type":"Identifier","range":[5346,5353]},{"text":"null","type":"Keyword","range":[5356,5360]},{"text":"whenTransitionEnds","type":"Identifier","range":[5383,5401]},{"text":"el","type":"Identifier","range":[5402,5404]},{"text":"onEnd","type":"Identifier","range":[5406,5411]},{"text":"type","type":"Identifier","range":[5413,5417]},{"text":"latestProps","type":"Identifier","range":[5442,5453]},{"text":"isMounted","type":"Identifier","range":[5455,5464]},{"text":"context","type":"Identifier","range":[5466,5473]},{"text":"const","type":"Keyword","range":[5483,5488]},{"text":"performLeave","type":"Identifier","range":[5489,5501]},{"text":"useCallback","type":"Identifier","range":[5504,5515]},{"text":"el","type":"Identifier","range":[5522,5524]},{"text":"Element","type":"Identifier","range":[5526,5533]},{"text":"if","type":"Keyword","range":[5546,5548]},{"text":"finishEnter","type":"Identifier","range":[5550,5561]},{"text":"current","type":"Identifier","range":[5562,5569]},{"text":"finishEnter","type":"Identifier","range":[5581,5592]},{"text":"current","type":"Identifier","range":[5593,5600]},{"text":"true","type":"Boolean","range":[5601,5605]},{"text":"context","type":"Identifier","range":[5622,5629]},{"text":"unregister","type":"Identifier","range":[5631,5641]},{"text":"el","type":"Identifier","range":[5642,5644]},{"text":"const","type":"Keyword","range":[5654,5659]},{"text":"type","type":"Identifier","range":[5670,5674]},{"text":"name","type":"Identifier","range":[5684,5688]},{"text":"\"transition\"","type":"String","range":[5691,5703]},{"text":"leaveFromClass","type":"Identifier","range":[5713,5727]},{"text":"`${","type":"Template","range":[5730,5733]},{"text":"name","type":"Identifier","range":[5733,5737]},{"text":"}-leave-from`","type":"Template","range":[5737,5750]},{"text":"leaveActiveClass","type":"Identifier","range":[5760,5776]},{"text":"`${","type":"Template","range":[5779,5782]},{"text":"name","type":"Identifier","range":[5782,5786]},{"text":"}-leave-active`","type":"Template","range":[5786,5801]},{"text":"leaveToClass","type":"Identifier","range":[5811,5823]},{"text":"`${","type":"Template","range":[5826,5829]},{"text":"name","type":"Identifier","range":[5829,5833]},{"text":"}-leave-to`","type":"Template","range":[5833,5844]},{"text":"onBeforeLeave","type":"Identifier","range":[5854,5867]},{"text":"onLeave","type":"Identifier","range":[5877,5884]},{"text":"onAfterLeave","type":"Identifier","range":[5894,5906]},{"text":"onLeaveCancelled","type":"Identifier","range":[5916,5932]},{"text":"latestProps","type":"Identifier","range":[5944,5955]},{"text":"current","type":"Identifier","range":[5956,5963]},{"text":"onBeforeLeave","type":"Identifier","range":[5972,5985]},{"text":"onBeforeLeave","type":"Identifier","range":[5989,6002]},{"text":"el","type":"Identifier","range":[6003,6005]},{"text":"addClass","type":"Identifier","range":[6014,6022]},{"text":"el","type":"Identifier","range":[6023,6025]},{"text":"leaveFromClass","type":"Identifier","range":[6027,6041]},{"text":"addClass","type":"Identifier","range":[6050,6058]},{"text":"el","type":"Identifier","range":[6059,6061]},{"text":"leaveActiveClass","type":"Identifier","range":[6063,6079]},{"text":"onLeave","type":"Identifier","range":[6088,6095]},{"text":"onLeave","type":"Identifier","range":[6099,6106]},{"text":"el","type":"Identifier","range":[6107,6109]},{"text":"nextFrame","type":"Identifier","range":[6118,6127]},{"text":"removeClass","type":"Identifier","range":[6144,6155]},{"text":"el","type":"Identifier","range":[6156,6158]},{"text":"leaveFromClass","type":"Identifier","range":[6160,6174]},{"text":"addClass","type":"Identifier","range":[6185,6193]},{"text":"el","type":"Identifier","range":[6194,6196]},{"text":"leaveToClass","type":"Identifier","range":[6198,6210]},{"text":"const","type":"Keyword","range":[6221,6226]},{"text":"onEnd","type":"Identifier","range":[6227,6232]},{"text":"finishLeave","type":"Identifier","range":[6236,6247]},{"text":"current","type":"Identifier","range":[6248,6255]},{"text":"once","type":"Identifier","range":[6258,6262]},{"text":"cancelled","type":"Identifier","range":[6264,6273]},{"text":"boolean","type":"Identifier","range":[6276,6283]},{"text":"removeClass","type":"Identifier","range":[6300,6311]},{"text":"el","type":"Identifier","range":[6312,6314]},{"text":"leaveToClass","type":"Identifier","range":[6316,6328]},{"text":"removeClass","type":"Identifier","range":[6341,6352]},{"text":"el","type":"Identifier","range":[6353,6355]},{"text":"leaveActiveClass","type":"Identifier","range":[6357,6373]},{"text":"if","type":"Keyword","range":[6387,6389]},{"text":"cancelled","type":"Identifier","range":[6392,6401]},{"text":"setLocalVisible","type":"Identifier","range":[6417,6432]},{"text":"false","type":"Boolean","range":[6433,6438]},{"text":"recordDisplayAndHide","type":"Identifier","range":[6453,6473]},{"text":"el","type":"Identifier","range":[6474,6476]},{"text":"const","type":"Keyword","range":[6502,6507]},{"text":"finishHook","type":"Identifier","range":[6508,6518]},{"text":"cancelled","type":"Identifier","range":[6521,6530]},{"text":"onLeaveCancelled","type":"Identifier","range":[6533,6549]},{"text":"onAfterLeave","type":"Identifier","range":[6552,6564]},{"text":"finishHook","type":"Identifier","range":[6576,6586]},{"text":"finishHook","type":"Identifier","range":[6590,6600]},{"text":"el","type":"Identifier","range":[6601,6603]},{"text":"finishLeave","type":"Identifier","range":[6616,6627]},{"text":"current","type":"Identifier","range":[6628,6635]},{"text":"null","type":"Keyword","range":[6638,6642]},{"text":"whenTransitionEnds","type":"Identifier","range":[6665,6683]},{"text":"el","type":"Identifier","range":[6684,6686]},{"text":"onEnd","type":"Identifier","range":[6688,6693]},{"text":"type","type":"Identifier","range":[6695,6699]},{"text":"latestProps","type":"Identifier","range":[6724,6735]},{"text":"context","type":"Identifier","range":[6737,6744]},{"text":"isMounted","type":"Identifier","range":[6746,6755]},{"text":"setLocalVisible","type":"Identifier","range":[6757,6772]},{"text":"recordDisplayAndHide","type":"Identifier","range":[6774,6794]},{"text":" sync state action","type":"Line","range":[6804,6824]},{"text":"useLayoutEffect","type":"Identifier","range":[6827,6842]},{"text":"if","type":"Keyword","range":[6855,6857]},{"text":"visible","type":"Identifier","range":[6859,6866]},{"text":"return","type":"Keyword","range":[6876,6882]},{"text":"setLocalVisible","type":"Identifier","range":[6883,6898]},{"text":"true","type":"Boolean","range":[6899,6903]},{"text":"const","type":"Keyword","range":[6916,6921]},{"text":"element","type":"Identifier","range":[6922,6929]},{"text":"elementRef","type":"Identifier","range":[6932,6942]},{"text":"current","type":"Identifier","range":[6943,6950]},{"text":"if","type":"Keyword","range":[6956,6958]},{"text":"element","type":"Identifier","range":[6961,6968]},{"text":"return","type":"Keyword","range":[6970,6976]},{"text":" TODO refactor this block","type":"Line","range":[6982,7009]},{"text":"if","type":"Keyword","range":[7014,7016]},{"text":"isMounted","type":"Identifier","range":[7019,7028]},{"text":"current","type":"Identifier","range":[7029,7036]},{"text":"recordDisplayAndHide","type":"Identifier","range":[7046,7066]},{"text":"element","type":"Identifier","range":[7067,7074]},{"text":" do not run `performLeave` on initial render","type":"Line","range":[7083,7129]},{"text":"return","type":"Keyword","range":[7136,7142]},{"text":" we need to make an animation before exiting","type":"Line","range":[7154,7200]},{"text":"performLeave","type":"Identifier","range":[7205,7217]},{"text":"element","type":"Identifier","range":[7218,7225]},{"text":"visible","type":"Identifier","range":[7239,7246]},{"text":"latestProps","type":"Identifier","range":[7252,7263]},{"text":"isMounted","type":"Identifier","range":[7269,7278]},{"text":"setLocalVisible","type":"Identifier","range":[7284,7299]},{"text":"performLeave","type":"Identifier","range":[7305,7317]},{"text":"recordDisplayAndHide","type":"Identifier","range":[7323,7343]},{"text":" enter after cancel","type":"Line","range":[7354,7375]},{"text":"useLayoutEffect","type":"Identifier","range":[7378,7393]},{"text":"const","type":"Keyword","range":[7406,7411]},{"text":"element","type":"Identifier","range":[7412,7419]},{"text":"elementRef","type":"Identifier","range":[7422,7432]},{"text":"current","type":"Identifier","range":[7433,7440]},{"text":"if","type":"Keyword","range":[7446,7448]},{"text":"element","type":"Identifier","range":[7457,7464]},{"text":"isMounted","type":"Identifier","range":[7474,7483]},{"text":"current","type":"Identifier","range":[7484,7491]},{"text":"previousVisible","type":"Identifier","range":[7501,7516]},{"text":"current","type":"Identifier","range":[7517,7524]},{"text":"localVisibleRef","type":"Identifier","range":[7529,7544]},{"text":"current","type":"Identifier","range":[7545,7552]},{"text":"performEnter","type":"Identifier","range":[7567,7579]},{"text":"element","type":"Identifier","range":[7580,7587]},{"text":"visible","type":"Identifier","range":[7602,7609]},{"text":"previousVisible","type":"Identifier","range":[7611,7626]},{"text":"localVisibleRef","type":"Identifier","range":[7628,7643]},{"text":"isMounted","type":"Identifier","range":[7645,7654]},{"text":"performEnter","type":"Identifier","range":[7656,7668]},{"text":" perform enter animation","type":"Line","range":[7675,7701]},{"text":"useLayoutEffect","type":"Identifier","range":[7704,7719]},{"text":"const","type":"Keyword","range":[7732,7737]},{"text":"element","type":"Identifier","range":[7738,7745]},{"text":"elementRef","type":"Identifier","range":[7748,7758]},{"text":"current","type":"Identifier","range":[7759,7766]},{"text":"if","type":"Keyword","range":[7773,7775]},{"text":"element","type":"Identifier","range":[7777,7784]},{"text":"localVisible","type":"Identifier","range":[7788,7800]},{"text":"performEnter","type":"Identifier","range":[7810,7822]},{"text":"element","type":"Identifier","range":[7823,7830]},{"text":"localVisible","type":"Identifier","range":[7845,7857]},{"text":"context","type":"Identifier","range":[7859,7866]},{"text":"performEnter","type":"Identifier","range":[7868,7880]},{"text":"const","type":"Keyword","range":[7887,7892]},{"text":"combinedRef","type":"Identifier","range":[7893,7904]},{"text":"useCombinedRef","type":"Identifier","range":[7907,7921]},{"text":"elementRef","type":"Identifier","range":[7922,7932]},{"text":"nodeRef","type":"Identifier","range":[7934,7941]},{"text":"if","type":"Keyword","range":[7947,7949]},{"text":"unmount","type":"Identifier","range":[7951,7958]},{"text":"localVisible","type":"Identifier","range":[7963,7975]},{"text":"return","type":"Keyword","range":[7977,7983]},{"text":"null","type":"Keyword","range":[7984,7988]},{"text":"try","type":"Keyword","range":[7993,7996]},{"text":" TODO do we need this verification?","type":"Line","range":[8003,8040]},{"text":"return","type":"Keyword","range":[8045,8051]},{"text":"Children","type":"Identifier","range":[8052,8060]},{"text":"only","type":"Identifier","range":[8061,8065]},{"text":"children","type":"Identifier","range":[8066,8074]},{"text":"ref","type":"Identifier","range":[8077,8080]},{"text":"combinedRef","type":"Identifier","range":[8082,8093]},{"text":"catch","type":"Keyword","range":[8103,8108]},{"text":"if","type":"Keyword","range":[8115,8117]},{"text":"__DEV__","type":"Identifier","range":[8119,8126]},{"text":"throw","type":"Keyword","range":[8136,8141]},{"text":"new","type":"Keyword","range":[8142,8145]},{"text":"Error","type":"Identifier","range":[8146,8151]},{"text":"\"[retransition]: wrong `children` passed to the <Transition> component \"","type":"String","range":[8161,8233]},{"text":"\"expected to have `ReactElement`, got \"","type":"String","range":[8246,8285]},{"text":"typeof","type":"Keyword","range":[8298,8304]},{"text":"children","type":"Identifier","range":[8305,8313]},{"text":"return","type":"Keyword","range":[8333,8339]},{"text":"null","type":"Keyword","range":[8340,8344]},{"text":"export","type":"Keyword","range":[8354,8360]},{"text":"default","type":"Keyword","range":[8361,8368]},{"text":"Transition","type":"Identifier","range":[8369,8379]}]}