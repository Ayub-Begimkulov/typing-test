{"type":"typescript","text":"import { renderIf, showIf } from \"../dom-helpers\";\nimport { observable } from \"../../observable\";\nimport { nextTick } from \"../scheduler\";\n\nbeforeEach(() => {\n  document.body.innerHTML = `<div></div>`;\n});\n\nafterEach(() => {\n  document.body.innerHTML = \"\";\n});\n\ndescribe(\"renderIf helper\", () => {\n  it(\"removes element when function returns falsy value\", () => {\n    const div = document.querySelector(\"div\")!;\n\n    renderIf(div, () => false);\n\n    expect(document.contains(div)).toBe(false);\n    expect(document.body.innerHTML).toBe(\"<!---->\");\n  });\n\n  it(\"doesn't remove element if function returns truthy value\", () => {\n    const div = document.querySelector(\"div\")!;\n\n    renderIf(div, () => true);\n\n    expect(document.contains(div)).toBe(true);\n    expect(document.body.innerHTML).not.toContain(\"<!---->\");\n  });\n\n  it(\"updates if observable state changes\", async () => {\n    const div = document.querySelector(\"div\")!;\n\n    const state = observable<Record<string, any>>({ renderDiv: false });\n\n    renderIf(div, () => state.renderDiv);\n\n    expect(document.contains(div)).toBe(false);\n    expect(document.body.innerHTML).toBe(\"<!---->\");\n\n    state.renderDiv = true;\n\n    await nextTick();\n\n    expect(document.contains(div)).toBe(true);\n    expect(document.body.innerHTML).not.toContain(\"<!---->\");\n  });\n});\n\ndescribe(\"showIf helper\", () => {\n  it(\"adds `display: none` if return value is falsy\", async () => {\n    const div = document.querySelector(\"div\")!;\n\n    showIf(div, () => false);\n\n    expect(div.style.display).toBe(\"none\");\n  });\n\n  it(\"doesn't add `display: none` if value is truthy\", async () => {\n    const div = document.querySelector(\"div\")!;\n\n    showIf(div, () => true);\n\n    expect(div.style.display).toBe(\"\");\n  });\n\n  it(\"updates when observable state changes\", async () => {\n    const div = document.querySelector(\"div\")!;\n\n    const state = observable({ showDiv: true });\n\n    showIf(div, () => state.showDiv);\n\n    expect(div.style.display).toBe(\"\");\n\n    state.showDiv = false;\n\n    await nextTick();\n\n    expect(div.style.display).toBe(\"none\");\n  });\n\n  it(\"respects initial display value\", async () => {\n    const div = document.querySelector(\"div\")!;\n    div.style.display = \"flex\";\n\n    const state = observable({ showDiv: false });\n\n    showIf(div, () => state.showDiv);\n\n    expect(div.style.display).toBe(\"none\");\n\n    state.showDiv = true;\n\n    await nextTick();\n\n    expect(div.style.display).toBe(\"flex\");\n  });\n});","words":[{"text":"import","type":"Keyword","range":[0,6]},{"text":"renderIf","type":"Identifier","range":[9,17]},{"text":"showIf","type":"Identifier","range":[19,25]},{"text":"from","type":"Identifier","range":[28,32]},{"text":"\"../dom-helpers\"","type":"String","range":[33,49]},{"text":"import","type":"Keyword","range":[51,57]},{"text":"observable","type":"Identifier","range":[60,70]},{"text":"from","type":"Identifier","range":[73,77]},{"text":"\"../../observable\"","type":"String","range":[78,96]},{"text":"import","type":"Keyword","range":[98,104]},{"text":"nextTick","type":"Identifier","range":[107,115]},{"text":"from","type":"Identifier","range":[118,122]},{"text":"\"../scheduler\"","type":"String","range":[123,137]},{"text":"beforeEach","type":"Identifier","range":[140,150]},{"text":"document","type":"Identifier","range":[161,169]},{"text":"body","type":"Identifier","range":[170,174]},{"text":"innerHTML","type":"Identifier","range":[175,184]},{"text":"`<div></div>`","type":"Template","range":[187,200]},{"text":"afterEach","type":"Identifier","range":[207,216]},{"text":"document","type":"Identifier","range":[227,235]},{"text":"body","type":"Identifier","range":[236,240]},{"text":"innerHTML","type":"Identifier","range":[241,250]},{"text":"\"\"","type":"String","range":[253,255]},{"text":"describe","type":"Identifier","range":[262,270]},{"text":"\"renderIf helper\"","type":"String","range":[271,288]},{"text":"it","type":"Identifier","range":[300,302]},{"text":"\"removes element when function returns falsy value\"","type":"String","range":[303,354]},{"text":"const","type":"Keyword","range":[368,373]},{"text":"div","type":"Identifier","range":[374,377]},{"text":"document","type":"Identifier","range":[380,388]},{"text":"querySelector","type":"Identifier","range":[389,402]},{"text":"\"div\"","type":"String","range":[403,408]},{"text":"renderIf","type":"Identifier","range":[417,425]},{"text":"div","type":"Identifier","range":[426,429]},{"text":"false","type":"Boolean","range":[437,442]},{"text":"expect","type":"Identifier","range":[450,456]},{"text":"document","type":"Identifier","range":[457,465]},{"text":"contains","type":"Identifier","range":[466,474]},{"text":"div","type":"Identifier","range":[475,478]},{"text":"toBe","type":"Identifier","range":[481,485]},{"text":"false","type":"Boolean","range":[486,491]},{"text":"expect","type":"Identifier","range":[498,504]},{"text":"document","type":"Identifier","range":[505,513]},{"text":"body","type":"Identifier","range":[514,518]},{"text":"innerHTML","type":"Identifier","range":[519,528]},{"text":"toBe","type":"Identifier","range":[530,534]},{"text":"\"<!---->\"","type":"String","range":[535,544]},{"text":"it","type":"Identifier","range":[556,558]},{"text":"\"doesn't remove element if function returns truthy value\"","type":"String","range":[559,616]},{"text":"const","type":"Keyword","range":[630,635]},{"text":"div","type":"Identifier","range":[636,639]},{"text":"document","type":"Identifier","range":[642,650]},{"text":"querySelector","type":"Identifier","range":[651,664]},{"text":"\"div\"","type":"String","range":[665,670]},{"text":"renderIf","type":"Identifier","range":[679,687]},{"text":"div","type":"Identifier","range":[688,691]},{"text":"true","type":"Boolean","range":[699,703]},{"text":"expect","type":"Identifier","range":[711,717]},{"text":"document","type":"Identifier","range":[718,726]},{"text":"contains","type":"Identifier","range":[727,735]},{"text":"div","type":"Identifier","range":[736,739]},{"text":"toBe","type":"Identifier","range":[742,746]},{"text":"true","type":"Boolean","range":[747,751]},{"text":"expect","type":"Identifier","range":[758,764]},{"text":"document","type":"Identifier","range":[765,773]},{"text":"body","type":"Identifier","range":[774,778]},{"text":"innerHTML","type":"Identifier","range":[779,788]},{"text":"not","type":"Identifier","range":[790,793]},{"text":"toContain","type":"Identifier","range":[794,803]},{"text":"\"<!---->\"","type":"String","range":[804,813]},{"text":"it","type":"Identifier","range":[825,827]},{"text":"\"updates if observable state changes\"","type":"String","range":[828,865]},{"text":"async","type":"Identifier","range":[867,872]},{"text":"const","type":"Keyword","range":[885,890]},{"text":"div","type":"Identifier","range":[891,894]},{"text":"document","type":"Identifier","range":[897,905]},{"text":"querySelector","type":"Identifier","range":[906,919]},{"text":"\"div\"","type":"String","range":[920,925]},{"text":"const","type":"Keyword","range":[934,939]},{"text":"state","type":"Identifier","range":[940,945]},{"text":"observable","type":"Identifier","range":[948,958]},{"text":"Record","type":"Identifier","range":[959,965]},{"text":"string","type":"Identifier","range":[966,972]},{"text":"any","type":"Identifier","range":[974,977]},{"text":"renderDiv","type":"Identifier","range":[982,991]},{"text":"false","type":"Boolean","range":[993,998]},{"text":"renderIf","type":"Identifier","range":[1008,1016]},{"text":"div","type":"Identifier","range":[1017,1020]},{"text":"state","type":"Identifier","range":[1028,1033]},{"text":"renderDiv","type":"Identifier","range":[1034,1043]},{"text":"expect","type":"Identifier","range":[1051,1057]},{"text":"document","type":"Identifier","range":[1058,1066]},{"text":"contains","type":"Identifier","range":[1067,1075]},{"text":"div","type":"Identifier","range":[1076,1079]},{"text":"toBe","type":"Identifier","range":[1082,1086]},{"text":"false","type":"Boolean","range":[1087,1092]},{"text":"expect","type":"Identifier","range":[1099,1105]},{"text":"document","type":"Identifier","range":[1106,1114]},{"text":"body","type":"Identifier","range":[1115,1119]},{"text":"innerHTML","type":"Identifier","range":[1120,1129]},{"text":"toBe","type":"Identifier","range":[1131,1135]},{"text":"\"<!---->\"","type":"String","range":[1136,1145]},{"text":"state","type":"Identifier","range":[1153,1158]},{"text":"renderDiv","type":"Identifier","range":[1159,1168]},{"text":"true","type":"Boolean","range":[1171,1175]},{"text":"await","type":"Identifier","range":[1182,1187]},{"text":"nextTick","type":"Identifier","range":[1188,1196]},{"text":"expect","type":"Identifier","range":[1205,1211]},{"text":"document","type":"Identifier","range":[1212,1220]},{"text":"contains","type":"Identifier","range":[1221,1229]},{"text":"div","type":"Identifier","range":[1230,1233]},{"text":"toBe","type":"Identifier","range":[1236,1240]},{"text":"true","type":"Boolean","range":[1241,1245]},{"text":"expect","type":"Identifier","range":[1252,1258]},{"text":"document","type":"Identifier","range":[1259,1267]},{"text":"body","type":"Identifier","range":[1268,1272]},{"text":"innerHTML","type":"Identifier","range":[1273,1282]},{"text":"not","type":"Identifier","range":[1284,1287]},{"text":"toContain","type":"Identifier","range":[1288,1297]},{"text":"\"<!---->\"","type":"String","range":[1298,1307]},{"text":"describe","type":"Identifier","range":[1321,1329]},{"text":"\"showIf helper\"","type":"String","range":[1330,1345]},{"text":"it","type":"Identifier","range":[1357,1359]},{"text":"\"adds `display: none` if return value is falsy\"","type":"String","range":[1360,1407]},{"text":"async","type":"Identifier","range":[1409,1414]},{"text":"const","type":"Keyword","range":[1427,1432]},{"text":"div","type":"Identifier","range":[1433,1436]},{"text":"document","type":"Identifier","range":[1439,1447]},{"text":"querySelector","type":"Identifier","range":[1448,1461]},{"text":"\"div\"","type":"String","range":[1462,1467]},{"text":"showIf","type":"Identifier","range":[1476,1482]},{"text":"div","type":"Identifier","range":[1483,1486]},{"text":"false","type":"Boolean","range":[1494,1499]},{"text":"expect","type":"Identifier","range":[1507,1513]},{"text":"div","type":"Identifier","range":[1514,1517]},{"text":"style","type":"Identifier","range":[1518,1523]},{"text":"display","type":"Identifier","range":[1524,1531]},{"text":"toBe","type":"Identifier","range":[1533,1537]},{"text":"\"none\"","type":"String","range":[1538,1544]},{"text":"it","type":"Identifier","range":[1556,1558]},{"text":"\"doesn't add `display: none` if value is truthy\"","type":"String","range":[1559,1607]},{"text":"async","type":"Identifier","range":[1609,1614]},{"text":"const","type":"Keyword","range":[1627,1632]},{"text":"div","type":"Identifier","range":[1633,1636]},{"text":"document","type":"Identifier","range":[1639,1647]},{"text":"querySelector","type":"Identifier","range":[1648,1661]},{"text":"\"div\"","type":"String","range":[1662,1667]},{"text":"showIf","type":"Identifier","range":[1676,1682]},{"text":"div","type":"Identifier","range":[1683,1686]},{"text":"true","type":"Boolean","range":[1694,1698]},{"text":"expect","type":"Identifier","range":[1706,1712]},{"text":"div","type":"Identifier","range":[1713,1716]},{"text":"style","type":"Identifier","range":[1717,1722]},{"text":"display","type":"Identifier","range":[1723,1730]},{"text":"toBe","type":"Identifier","range":[1732,1736]},{"text":"\"\"","type":"String","range":[1737,1739]},{"text":"it","type":"Identifier","range":[1751,1753]},{"text":"\"updates when observable state changes\"","type":"String","range":[1754,1793]},{"text":"async","type":"Identifier","range":[1795,1800]},{"text":"const","type":"Keyword","range":[1813,1818]},{"text":"div","type":"Identifier","range":[1819,1822]},{"text":"document","type":"Identifier","range":[1825,1833]},{"text":"querySelector","type":"Identifier","range":[1834,1847]},{"text":"\"div\"","type":"String","range":[1848,1853]},{"text":"const","type":"Keyword","range":[1862,1867]},{"text":"state","type":"Identifier","range":[1868,1873]},{"text":"observable","type":"Identifier","range":[1876,1886]},{"text":"showDiv","type":"Identifier","range":[1889,1896]},{"text":"true","type":"Boolean","range":[1898,1902]},{"text":"showIf","type":"Identifier","range":[1912,1918]},{"text":"div","type":"Identifier","range":[1919,1922]},{"text":"state","type":"Identifier","range":[1930,1935]},{"text":"showDiv","type":"Identifier","range":[1936,1943]},{"text":"expect","type":"Identifier","range":[1951,1957]},{"text":"div","type":"Identifier","range":[1958,1961]},{"text":"style","type":"Identifier","range":[1962,1967]},{"text":"display","type":"Identifier","range":[1968,1975]},{"text":"toBe","type":"Identifier","range":[1977,1981]},{"text":"\"\"","type":"String","range":[1982,1984]},{"text":"state","type":"Identifier","range":[1992,1997]},{"text":"showDiv","type":"Identifier","range":[1998,2005]},{"text":"false","type":"Boolean","range":[2008,2013]},{"text":"await","type":"Identifier","range":[2020,2025]},{"text":"nextTick","type":"Identifier","range":[2026,2034]},{"text":"expect","type":"Identifier","range":[2043,2049]},{"text":"div","type":"Identifier","range":[2050,2053]},{"text":"style","type":"Identifier","range":[2054,2059]},{"text":"display","type":"Identifier","range":[2060,2067]},{"text":"toBe","type":"Identifier","range":[2069,2073]},{"text":"\"none\"","type":"String","range":[2074,2080]},{"text":"it","type":"Identifier","range":[2092,2094]},{"text":"\"respects initial display value\"","type":"String","range":[2095,2127]},{"text":"async","type":"Identifier","range":[2129,2134]},{"text":"const","type":"Keyword","range":[2147,2152]},{"text":"div","type":"Identifier","range":[2153,2156]},{"text":"document","type":"Identifier","range":[2159,2167]},{"text":"querySelector","type":"Identifier","range":[2168,2181]},{"text":"\"div\"","type":"String","range":[2182,2187]},{"text":"div","type":"Identifier","range":[2195,2198]},{"text":"style","type":"Identifier","range":[2199,2204]},{"text":"display","type":"Identifier","range":[2205,2212]},{"text":"\"flex\"","type":"String","range":[2215,2221]},{"text":"const","type":"Keyword","range":[2228,2233]},{"text":"state","type":"Identifier","range":[2234,2239]},{"text":"observable","type":"Identifier","range":[2242,2252]},{"text":"showDiv","type":"Identifier","range":[2255,2262]},{"text":"false","type":"Boolean","range":[2264,2269]},{"text":"showIf","type":"Identifier","range":[2279,2285]},{"text":"div","type":"Identifier","range":[2286,2289]},{"text":"state","type":"Identifier","range":[2297,2302]},{"text":"showDiv","type":"Identifier","range":[2303,2310]},{"text":"expect","type":"Identifier","range":[2318,2324]},{"text":"div","type":"Identifier","range":[2325,2328]},{"text":"style","type":"Identifier","range":[2329,2334]},{"text":"display","type":"Identifier","range":[2335,2342]},{"text":"toBe","type":"Identifier","range":[2344,2348]},{"text":"\"none\"","type":"String","range":[2349,2355]},{"text":"state","type":"Identifier","range":[2363,2368]},{"text":"showDiv","type":"Identifier","range":[2369,2376]},{"text":"true","type":"Boolean","range":[2379,2383]},{"text":"await","type":"Identifier","range":[2390,2395]},{"text":"nextTick","type":"Identifier","range":[2396,2404]},{"text":"expect","type":"Identifier","range":[2413,2419]},{"text":"div","type":"Identifier","range":[2420,2423]},{"text":"style","type":"Identifier","range":[2424,2429]},{"text":"display","type":"Identifier","range":[2430,2437]},{"text":"toBe","type":"Identifier","range":[2439,2443]},{"text":"\"flex\"","type":"String","range":[2444,2450]}]}